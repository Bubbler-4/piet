"use strict";
(self["webpackChunkpiet"] = self["webpackChunkpiet"] || []).push([["index"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./src/index.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/index.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "svg {\n    margin: none;\n    padding: 2px;\n    border: 2px solid #ccc;\n}\n\n#svg-palette {\n    width: 368px;\n    height: 128px;\n}\n\ntextarea {\n    resize: none;\n    font-family: monospace;\n    white-space: pre-wrap;\n    overflow: hidden;\n}", "",{"version":3,"sources":["webpack://./src/index.css"],"names":[],"mappings":"AAAA;IACI,YAAY;IACZ,YAAY;IACZ,sBAAsB;AAC1B;;AAEA;IACI,YAAY;IACZ,aAAa;AACjB;;AAEA;IACI,YAAY;IACZ,sBAAsB;IACtB,qBAAqB;IACrB,gBAAgB;AACpB","sourcesContent":["svg {\n    margin: none;\n    padding: 2px;\n    border: 2px solid #ccc;\n}\n\n#svg-palette {\n    width: 368px;\n    height: 128px;\n}\n\ntextarea {\n    resize: none;\n    font-family: monospace;\n    white-space: pre-wrap;\n    overflow: hidden;\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/index.css":
/*!***********************!*\
  !*** ./src/index.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./index.css */ "./node_modules/css-loader/dist/cjs.js!./src/index.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bootstrap */ "./node_modules/bootstrap/dist/js/bootstrap.esm.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapsvg */ "./node_modules/snapsvg/dist/snap.svg.js");
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(snapsvg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _piet_ui_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./piet-ui.js */ "./src/piet-ui.js");
/* harmony import */ var bootstrap_dist_css_bootstrap_min_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bootstrap/dist/css/bootstrap.min.css */ "./node_modules/bootstrap/dist/css/bootstrap.min.css");
/* harmony import */ var bootstrap_icons_font_bootstrap_icons_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bootstrap-icons/font/bootstrap-icons.css */ "./node_modules/bootstrap-icons/font/bootstrap-icons.css");
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index.css */ "./src/index.css");








function init() {
  const ui = new _piet_ui_js__WEBPACK_IMPORTED_MODULE_3__["default"]();
}

window.onload = () => {
  init();
  console.log('loaded');
};


/***/ }),

/***/ "./src/piet-run.js":
/*!*************************!*\
  !*** ./src/piet-run.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PietRun)
/* harmony export */ });
/* harmony import */ var _piet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./piet.js */ "./src/piet.js");


function divmod(x, y) {
  if ((x >= 0n && y > 0n) || (x < 0n && y < 0n)) {
    return [x / y, x % y];
  }
  const xabs = x >= 0n ? x : -x;
  const [yabs, ysgn] = y >= 0n ? [y, 1n] : [-y, -1n];
  let div = xabs / yabs;
  let mod = xabs % yabs;
  if (mod !== 0n) {
    div += 1n;
    mod = yabs - mod;
  }
  return [-div, mod * ysgn];
}

class PietRun {
  static {
    this.rOff = [0, 1, 0, -1];
    this.cOff = [1, 0, -1, 0];
    this.dpText = ['Right', 'Down', 'Left', 'Up'];
    this.ccText = [
      'Top',
      'Bottom',
      'Right',
      'Left',
      'Bottom',
      'Top',
      'Left',
      'Right',
    ];
    this.abbrev = {
      push: '',
      pop: 'x',
      '+': '+',
      '-': '-',
      '*': '*',
      '/': '/',
      '%': '%',
      '!': '!',
      '>': '>',
      'DP+': 'D',
      'CC+': 'C',
      dup: 'd',
      roll: 'r',
      inN: 'I',
      inC: 'i',
      outN: 'O',
      outC: 'o',
    };
    this.cmds = {
      push: (self, size) => {
        self.stack.push(BigInt(size));
        self.lastCmd = `push ${size}`;
      },
      pop: self => {
        self.stack.pop();
      },
      '+': self => {
        if (self.stack.length >= 2) {
          const [top2, top] = self.stack.splice(-2);
          self.stack.push(top2 + top);
        }
      },
      '-': self => {
        if (self.stack.length >= 2) {
          const [top2, top] = self.stack.splice(-2);
          self.stack.push(top2 - top);
        }
      },
      '*': self => {
        if (self.stack.length >= 2) {
          const [top2, top] = self.stack.splice(-2);
          self.stack.push(top2 * top);
        }
      },
      '/': self => {
        if (
          self.stack.length >= 2 &&
          self.stack[self.stack.length - 1] !== 0n
        ) {
          const [top2, top] = self.stack.splice(-2);
          self.stack.push(divmod(top2, top)[0]);
        }
      },
      '%': self => {
        if (
          self.stack.length >= 2 &&
          self.stack[self.stack.length - 1] !== 0n
        ) {
          const [top2, top] = self.stack.splice(-2);
          self.stack.push(divmod(top2, top)[1]);
        }
      },
      '!': self => {
        if (self.stack.length >= 1) {
          const top = self.stack.pop();
          self.stack.push(top === 0n ? 1n : 0n);
        }
      },
      '>': self => {
        if (self.stack.length >= 2) {
          const [top2, top] = self.stack.splice(-2);
          self.stack.push(top2 > top ? 1n : 0n);
        }
      },
      'DP+': self => {
        if (self.stack.length >= 1) {
          const top = self.stack.pop();
          self.dp = (self.dp + Number(top % 4n) + 4) % 4;
        }
      },
      'CC+': self => {
        if (self.stack.length >= 1) {
          const top = self.stack.pop();
          self.cc = (self.cc + Number(top % 2n) + 2) % 2;
        }
      },
      dup: self => {
        if (self.stack.length >= 1) {
          const top = self.stack.pop();
          self.stack.push(top, top);
        }
      },
      roll: self => {
        if (self.stack.length >= 2) {
          const [top2, top] = self.stack.splice(-2);
          if (top2 >= 0n && self.stack.length >= Number(top2)) {
            const rot = divmod(-top, top2)[1];
            const removed = self.stack.splice(-Number(top2), Number(rot));
            self.stack.push(...removed);
          } else {
            self.stack.push(top2, top);
          }
        }
      },
      inN: self => {
        // skip whitespaces, accept digits and stop before non-digits
        // if no digits found, no-op
        const spaces = self.input.match(/^\s*/)[0];
        self.input = self.input.slice(spaces.length);
        const number = self.input.match(/^[0-9]*/)[0];
        if (number.length > 0) {
          self.stack.push(BigInt(number));
          self.input = self.input.slice(number.length);
        }
      },
      inC: self => {
        if (self.input !== '') {
          const cp = self.input.codePointAt(0);
          if (cp >= 65536) {
            self.input = self.input.slice(2);
          } else {
            self.input = self.input.slice(1);
          }
          self.stack.push(BigInt(cp));
        }
      },
      outN: self => {
        if (self.stack.length >= 1) {
          const top = self.stack.pop();
          self.output += top.toString();
        }
      },
      outC: self => {
        if (self.stack.length >= 1) {
          const top = self.stack.pop();
          if (top >= 0n && top <= 1114111n) {
            self.output += String.fromCodePoint(Number(top));
          }
        }
      },
    };
  }

  constructor(code, input) {
    this.dp = 0;
    this.cc = 0;
    this.curR = 0;
    this.curC = 0;
    this.lastCmd = 'N/A';
    this.lastChange = 'none';
    this.input = input;
    this.output = '';
    this.stack = [];
    this.tryHistory = [];
    this.finished = false;
    const rows = code.length;
    const cols = code[0].length;
    // for each cell (except black): reference to area object
    // for each area: list of cells, frontier cell for each dp and cc
    // white is 1 area per cell
    this.areas = [];
    for (let r = 0; r < rows; r += 1) {
      const areasRow = [];
      for (let c = 0; c < cols; c += 1) {
        areasRow.push(undefined);
      }
      this.areas.push(areasRow);
    }
    for (let r = 0; r < rows; r += 1) {
      for (let c = 0; c < cols; c += 1) {
        const curColor = code[r][c];
        if (this.areas[r][c] === undefined && curColor !== 19) {
          const newArea = {
            cells: [],
            color: curColor,
            frontier: [0, 0, 0, 0, 0, 0, 0, 0],
            frontierOut: [0, 0, 0, 0, 0, 0, 0, 0],
            frontierBlocked: Array(8).fill(false),
          };
          const stack = [[r, c]];
          while (stack.length !== 0) {
            const [curR, curC] = stack.pop();
            if (this.areas[curR][curC] === undefined) {
              this.areas[curR][curC] = newArea;
              newArea.cells.push([curR, curC]);
              [
                [curR - 1, curC],
                [curR, curC - 1],
                [curR + 1, curC],
                [curR, curC + 1],
              ].forEach(([nextR, nextC]) => {
                if (
                  nextR >= 0 &&
                  nextR < rows &&
                  nextC >= 0 &&
                  nextC < cols &&
                  code[nextR][nextC] === curColor &&
                  curColor !== 18
                ) {
                  stack.push([nextR, nextC]);
                }
              });
            }
          }
          // frontier calculation (right x2, down x2, left x2, up x2)
          for (let i = 0; i < 8; i += 1) {
            newArea.frontier[i] = [r, c];
          }
          newArea.cells.forEach(([curR, curC]) => {
            const conds = [
              ([fr, fc]) => curC > fc || (curC === fc && curR < fr),
              ([fr, fc]) => curC > fc || (curC === fc && curR > fr),
              ([fr, fc]) => curR > fr || (curR === fr && curC > fc),
              ([fr, fc]) => curR > fr || (curR === fr && curC < fc),
              ([fr, fc]) => curC < fc || (curC === fc && curR > fr),
              ([fr, fc]) => curC < fc || (curC === fc && curR < fr),
              ([fr, fc]) => curR < fr || (curR === fr && curC < fc),
              ([fr, fc]) => curR < fr || (curR === fr && curC > fc),
            ];
            conds.forEach((cond, i) => {
              const front = newArea.frontier[i];
              if (cond(front)) {
                newArea.frontier[i] = [curR, curC];
              }
            });
          });
          for (let i = 0; i < 8; i += 1) {
            const [fr, fc] = newArea.frontier[i];
            const outR = fr + PietRun.rOff[(i / 2) | 0];
            const outC = fc + PietRun.cOff[(i / 2) | 0];
            newArea.frontierOut[i] = [outR, outC];
            newArea.frontierBlocked[i] =
              outR < 0 ||
              outR >= rows ||
              outC < 0 ||
              outC >= cols ||
              code[outR][outC] === 19;
          }
        }
      }
    }
    const startArea = this.areas[0][0];
    [this.curR, this.curC] = startArea.frontier[this.dp * 2 + this.cc];
  }

  step() {
    const cycleDetected = this.tryHistory.some(
      ([r, c, dp, cc]) =>
        this.curR === r && this.curC === c && this.dp === dp && this.cc === cc,
    );
    if (cycleDetected) {
      this.finished = true;
      return;
    }
    const curArea = this.areas[this.curR][this.curC];
    const { color, frontierOut, frontierBlocked } = curArea;
    const [nextR, nextC] = frontierOut[this.dp * 2 + this.cc];
    const blocked = frontierBlocked[this.dp * 2 + this.cc];
    if (blocked) {
      this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);
      if (this.lastChange === 'cc') {
        this.dp = (this.dp + 1) & 3;
        this.lastChange = 'dp';
      } else {
        this.cc = 1 - this.cc;
        this.lastChange = 'cc';
      }
      [this.curR, this.curC] = curArea.frontier[this.dp * 2 + this.cc];
      this.lastCmd = 'blocked';
      // console.log('blocked');
    } else {
      this.lastChange = 'none';
      if (color === 18) {
        this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);
        const nextArea = this.areas[nextR][nextC];
        [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];
        this.lastCmd = 'noop';
        // console.log('noop');
      } else {
        this.tryHistory.length = 0;
        const nextArea = this.areas[nextR][nextC];
        [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];
        const nextColor = nextArea.color;
        if (nextColor === 18) {
          this.lastCmd = 'noop';
          // console.log('noop');
        } else {
          const lightDiff = (((nextColor / 6 + 3) | 0) - ((color / 6) | 0)) % 3;
          const hueDiff = ((nextColor % 6) + 6 - (color % 6)) % 6;
          this.lastCmd = _piet_js__WEBPACK_IMPORTED_MODULE_0__["default"].commandText[lightDiff][hueDiff];
          // console.log('cmd:', lightDiff, hueDiff, this.lastCmd);
          PietRun.cmds[this.lastCmd](this, curArea.cells.length);
          [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];
        }
      }
    }
  }

  dryStep() {
    const cycleDetected = this.tryHistory.some(
      ([r, c, dp, cc]) =>
        this.curR === r && this.curC === c && this.dp === dp && this.cc === cc,
    );
    if (cycleDetected) {
      this.finished = true;
      return { finished: true };
    }
    const [lastR, lastC] = [this.curR, this.curC];
    const curArea = this.areas[this.curR][this.curC];
    const { color, frontierOut, frontierBlocked } = curArea;
    const [nextR, nextC] = frontierOut[this.dp * 2 + this.cc];
    const blocked = frontierBlocked[this.dp * 2 + this.cc];
    if (blocked) {
      this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);
      if (this.lastChange === 'cc') {
        this.dp = (this.dp + 1) & 3;
        this.lastChange = 'dp';
      } else {
        this.cc = 1 - this.cc;
        this.lastChange = 'cc';
      }
      [this.curR, this.curC] = curArea.frontier[this.dp * 2 + this.cc];
      this.lastCmd = 'blocked';
      return { finished: false, blocked: true };
      // console.log('blocked');
    }
    this.lastChange = 'none';
    if (color === 18) {
      this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);
      const nextArea = this.areas[nextR][nextC];
      [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];
      this.lastCmd = 'noop';
      // console.log('noop');
    } else {
      this.tryHistory.length = 0;
      const nextArea = this.areas[nextR][nextC];
      [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];
      const nextColor = nextArea.color;
      if (nextColor === 18) {
        this.lastCmd = 'noop';
        // console.log('noop');
      } else {
        const lightDiff = (((nextColor / 6 + 3) | 0) - ((color / 6) | 0)) % 3;
        const hueDiff = ((nextColor % 6) + 6 - (color % 6)) % 6;
        this.lastCmd = _piet_js__WEBPACK_IMPORTED_MODULE_0__["default"].commandText[lightDiff][hueDiff];
        // console.log('cmd:', lightDiff, hueDiff, this.lastCmd);
        // PietRun.cmds[this.lastCmd](this, curArea.cells.length);
        [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];
      }
    }
    let abb = '';
    if (this.lastCmd === 'push') {
      abb = `${curArea.cells.length}`;
    } else if (this.lastCmd !== 'noop') {
      abb = PietRun.abbrev[this.lastCmd];
    }
    return {
      finished: false,
      blocked: false,
      data: [lastR, lastC, nextR, nextC, abb],
      stop: abb === 'D' || abb === 'C', // stop tracing at DP+ or CC+
    };
  }

  dryRun(row, col, dp, cc) {
    const startArea = this.areas[row][col];
    [this.curR, this.curC] = startArea.frontier[dp * 2 + cc];
    this.dp = dp;
    this.cc = cc;
    const history = {};
    this.finished = false;
    const path = [];
    let gFinished = false;
    let gStop = false;
    while (
      !gFinished &&
      !gStop &&
      !history[[this.curR, this.curC, this.dp, this.cc]]
    ) {
      history[[this.curR, this.curC, this.dp, this.cc]] = true;
      const { finished, blocked, data, stop } = this.dryStep();
      if (finished) {
        gFinished = true;
      } else if (!blocked) {
        path.push(data);
        gStop = stop;
      }
    }
    return path;
  }
}


/***/ }),

/***/ "./src/piet-ui.js":
/*!************************!*\
  !*** ./src/piet-ui.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PietUI)
/* harmony export */ });
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapsvg */ "./node_modules/snapsvg/dist/snap.svg.js");
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(snapsvg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var pako__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pako */ "./node_modules/pako/dist/pako.esm.mjs");
/* harmony import */ var js_base64__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js-base64 */ "./node_modules/js-base64/base64.mjs");
/* harmony import */ var _piet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./piet.js */ "./src/piet.js");
/* harmony import */ var _piet_run_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./piet-run.js */ "./src/piet-run.js");







function adjustHeight() {
  this.style.height = 'auto';
  this.style.height = `${this.scrollHeight}px`;
}

// cyrb53 from https://stackoverflow.com/a/52171480/4595904
function cyrb53(str, seed = 0) {
  let h1 = 0xdeadbeef ^ seed;
  let h2 = 0x41c6ce57 ^ seed;
  [...str].forEach(c => {
    const ch = c.charCodeAt();
    h1 = Math.imul(h1 ^ ch, 2654435761);
    h2 = Math.imul(h2 ^ ch, 1597334677);
  });
  h1 =
    Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^
    Math.imul(h2 ^ (h2 >>> 13), 3266489909);
  h2 =
    Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^
    Math.imul(h1 ^ (h1 >>> 13), 3266489909);
  return `${h1}${h2}`;
}

class PietUI {
  constructor(code) {
    jquery__WEBPACK_IMPORTED_MODULE_1___default()('textarea')
      .each(function setAttr() {
        this.setAttribute(
          'style',
          `height:${this.scrollHeight}px;overflow-y:hidden;`,
        );
      })
      .on('input', adjustHeight);

    this.paletteSvg = snapsvg__WEBPACK_IMPORTED_MODULE_0___default()('#svg-palette');
    this.paletteRects = [];
    this.paletteOverlays = [];
    for (let light = 0; light < 3; light += 1) {
      this.paletteOverlays.push([]);
      for (let hue = 0; hue < 6; hue += 1) {
        const color = light * 6 + hue;
        const curRect = this.paletteSvg.el('rect', {
          width: 60,
          height: 30,
          x: 60 * hue,
          y: 30 * light,
          fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colors[color].colorcode,
        });
        this.paletteRects.push(curRect);
        const curCmd = this.paletteSvg
          .text(60 * hue + 30, 30 * light + 15, '')
          .attr({
            'text-anchor': 'middle',
            'dominant-baseline': 'middle',
            'pointer-events': 'none',
          });
        if (hue === 4 && light >= 1) {
          curCmd.attr({ fill: 'white' });
        } else {
          curCmd.attr({ fill: 'black' });
        }
        this.paletteOverlays[light].push(curCmd);
        this.paletteSvg.g(curRect, curCmd).click(e => {
          e.stopPropagation();
          e.preventDefault();
          console.log(e);
          console.log(color);
          this.edit.updateColor(color);
        });
      }
    }
    for (let color = 18; color <= 19; color += 1) {
      const curRect = this.paletteSvg
        .el('rect', {
          width: 180,
          height: 30,
          x: 180 * (color - 18),
          y: 90,
          fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colors[color].colorcode,
        })
        .click(e => {
          e.stopPropagation();
          e.preventDefault();
          console.log(e);
          console.log(color);
          this.edit.updateColor(color);
        });
      this.paletteRects.push(curRect);
    }
    this.codeSvg = snapsvg__WEBPACK_IMPORTED_MODULE_0___default()('#svg-code');
    this.code = new _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"](code);
    const codeRect = this.codeSvg
      .el('rect', { width: 30, height: 30 })
      .toDefs();
    this.codeRects = [[]];
    this.codeRects.update = () => {
      let prevRows = this.codeRects.length;
      let prevCols = this.codeRects[0].length;
      while (prevCols < this.code.cols) {
        const c = prevCols;
        this.codeRects.forEach((row, r) => {
          const newRect = this.codeSvg.use(codeRect);
          newRect.attr({
            x: 30 * c,
            y: 30 * r,
            fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colors[this.code.code[r][c]].colorcode,
          });
          row.push(newRect);
        });
        prevCols += 1;
      }
      while (prevCols > this.code.cols) {
        this.codeRects.forEach(row => row.pop().remove());
        prevCols -= 1;
      }
      while (prevRows < this.code.rows) {
        const r = prevRows;
        const newRow = this.code.code[r].map((color, c) => {
          const curRect = this.codeSvg.use(codeRect);
          return curRect.attr({
            x: 30 * c,
            y: 30 * r,
            fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colors[color].colorcode,
          });
        });
        this.codeRects.push(newRow);
        prevRows += 1;
      }
      while (prevRows > this.code.rows) {
        this.codeRects.pop().forEach(rect => rect.remove());
        prevRows -= 1;
      }
      this.codeRects.forEach((row, r) => {
        row.forEach((rect, c) => {
          rect.attr({ fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colors[this.code.code[r][c]].colorcode });
        });
      });
      this.codeSvg.attr({
        width: 30 * this.code.cols + 8,
        height: 30 * this.code.rows + 8,
      });
    };
    this.codeRects.update();
    this.edit = {
      mode: 'write',
      color: 0,
      selectColor: clr => {
        this.paletteRects[clr].attr({
          stroke: 'gray',
          'stroke-width': 6,
          x: '+=3',
          y: '+=3',
          width: '-=6',
          height: '-=6',
        });
        if (clr < 18) {
          const curHue = clr % 6;
          const curLight = (clr / 6) | 0;
          for (let lightOff = 0; lightOff < 3; lightOff += 1) {
            for (let hueOff = 0; hueOff < 6; hueOff += 1) {
              const s = _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].commandText[lightOff][hueOff];
              const nextHue = (curHue + hueOff) % 6;
              const nextLight = (curLight + lightOff) % 3;
              this.paletteOverlays[nextLight][nextHue].node.textContent = s;
            }
          }
        } else {
          for (let light = 0; light < 3; light += 1) {
            for (let hue = 0; hue < 6; hue += 1) {
              this.paletteOverlays[light][hue].node.textContent = '';
            }
          }
        }
      },
      unselectColor: clr => {
        this.paletteRects[clr].attr({
          stroke: undefined,
          'stroke-width': undefined,
          x: '-=3',
          y: '-=3',
          width: '+=6',
          height: '+=6',
        });
      },
      updateColor: clr => {
        const prevColor = this.edit.color;
        this.edit.color = clr;
        this.edit.unselectColor(prevColor);
        this.edit.selectColor(clr);
      },
      updateCodeColor1: (r, c, clr) => {
        this.code.code[r][c] = clr;
        this.codeRects[r][c].attr({ fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colors[clr].colorcode });
      },
    };
    this.edit.selectColor(0);

    ['l', 'u', 'r', 'd'].forEach(direction => {
      ['plus', 'minus'].forEach(action => {
        const id = `#grid-${direction}${action}`;
        const button = jquery__WEBPACK_IMPORTED_MODULE_1___default()(id);
        button.on('click', e => {
          e.stopPropagation();
          e.preventDefault();
          if (action === 'plus') {
            this.code.extendCode(direction);
          } else {
            this.code.shrinkCode(direction);
          }
          this.codeRects.update();
        });
      });
    });

    const writeButton = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#grid-write');
    const pickButton = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#grid-pick');
    writeButton.on('click', () => {
      this.codeSvg.unclick();
      this.codeSvg.drag(
        (dx, dy, x, y, e) => {
          const curR = ((e.offsetY - 3) / 30) | 0;
          const curC = ((e.offsetX - 3) / 30) | 0;
          if (
            curR >= 0 &&
            curR < this.code.rows &&
            curC >= 0 &&
            curC < this.code.cols
          ) {
            this.edit.updateCodeColor1(curR, curC, this.edit.color);
          }
        },
        (x, y, e) => {
          const curR = ((e.offsetY - 3) / 30) | 0;
          const curC = ((e.offsetX - 3) / 30) | 0;
          if (
            curR >= 0 &&
            curR < this.code.rows &&
            curC >= 0 &&
            curC < this.code.cols
          ) {
            this.edit.updateCodeColor1(curR, curC, this.edit.color);
          }
        },
        () => {},
      );
    });
    pickButton.on('click', () => {
      this.codeSvg.undrag();
      this.codeSvg.click(e => {
        const curR = ((e.offsetY - 3) / 30) | 0;
        const curC = ((e.offsetX - 3) / 30) | 0;
        if (
          curR >= 0 &&
          curR < this.code.rows &&
          curC >= 0 &&
          curC < this.code.cols
        ) {
          this.edit.updateColor(this.code.code[curR][curC]);
        }
      });
    });
    writeButton.trigger('click');
    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-edit-tab').on('click', () => {
      writeButton.trigger('click');
      console.log('trig1');
    });

    this.export = {
      pngButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-png'),
      svgButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-svg'),
      asciiGrid: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-ascii-grid'),
      asciiMini: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-ascii-mini'),
      shareContent: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#share-content'),
      permButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-perm'),
      golfButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-golf'),
      updateExportLink: () => {
        const { rows, cols } = this.code;
        const matrix = this.code.code;
        const canvas = jquery__WEBPACK_IMPORTED_MODULE_1___default()('<canvas/>');
        canvas.prop({ width: cols, height: rows });
        const canvasEl = canvas.get(0);
        const ctx = canvasEl.getContext('2d');
        const imdata = ctx.getImageData(0, 0, cols, rows);
        for (let r = 0; r < rows; r += 1) {
          for (let c = 0; c < cols; c += 1) {
            const idx = (r * cols + c) * 4;
            const { colorvec } = _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colors[matrix[r][c]];
            for (let i = 0; i < 4; i += 1) {
              imdata.data[idx + i] = colorvec[i];
            }
          }
        }
        ctx.putImageData(imdata, 0, 0);
        canvasEl.toBlob(blob => {
          const pngUrl = URL.createObjectURL(blob);
          this.export.pngButton.prop({ href: pngUrl });
        });
        // const pngUrl = canvasEl.toDataURL('image/png');
        // this.export.pngButton.prop({ href: pngUrl });
        const svgStr = this.codeSvg
          .outerSVG()
          .replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"');
        const svgBlob = new Blob([svgStr]);
        const svgUrl = URL.createObjectURL(svgBlob);
        this.export.svgButton.prop({ href: svgUrl });
      },
    };
    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-share-tab').on('click', () => {
      this.export.updateExportLink();
    });
    this.export.asciiGrid.on('click', () => {
      const ap = this.code.toAsciiPiet(false);
      this.export.shareContent.val(ap);
      adjustHeight.call(this.export.shareContent.get(0));
    });
    this.export.asciiMini.on('click', () => {
      const ap = this.code.toAsciiPiet(true);
      this.export.shareContent.val(ap);
      adjustHeight.call(this.export.shareContent.get(0));
    });
    const getPermalink = () => {
      // code, sep, lim, input, esc
      const exportObj = {
        code: this.code.code,
        sep: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-sep').val(),
        lim: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-limit').val(),
        esc: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-escape').prop('checked'),
        input: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input').val(),
      };
      this.export.shareContent.val(JSON.stringify(exportObj));
      const compressed = pako__WEBPACK_IMPORTED_MODULE_2__["default"].deflate(JSON.stringify(exportObj));
      const b64 = js_base64__WEBPACK_IMPORTED_MODULE_3__.Base64.fromUint8Array(compressed, true);
      return `${document.URL.split('#')[0]}#${b64}`;
    };
    this.export.permButton.on('click', () => {
      const permalink = getPermalink();
      this.export.shareContent.val(permalink);
      adjustHeight.call(this.export.shareContent.get(0));
    });
    this.export.golfButton.on('click', () => {
      const asciiPiet = this.code.toAsciiPiet(true);
      const bytes = asciiPiet.length;
      const codels = this.code.rows * this.code.cols;
      const permalink = getPermalink();
      const hash = cyrb53(permalink);
      const postHeader = `# [Piet] + [ascii-piet], ${bytes} bytes (${this.code.rows}\xd7${this.code.cols}=${codels} codels)`;
      const postMain = ['```none', asciiPiet, '```'].join('\n');
      const postFooter = `[Try Piet online!][piet-${hash}]`;
      const links = [
        '[Piet]: https://www.dangermouse.net/esoteric/piet.html',
        '[ascii-piet]: https://github.com/dloscutoff/ascii-piet',
        `[piet-${hash}]: ${permalink}`,
      ].join('\n');
      const post = [postHeader, postMain, postFooter, links].join('\n\n');
      this.export.shareContent.val(post);
      adjustHeight.call(this.export.shareContent.get(0));
    });

    this.import = {
      fileButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#import-file'),
      fileInputButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#import-file-input'),
      asciiButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#import-ascii'),
      asciiText: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#share-content'),
    };
    this.import.asciiButton.on('click', () => {
      const ascii = this.import.asciiText.val();
      const codeGrid = _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].fromAsciiPiet(ascii);
      console.log(codeGrid);
      this.code.replaceCode(codeGrid);
      this.codeRects.update();
      this.export.updateExportLink();
    });
    this.import.fileButton.on('click', () =>
      this.import.fileInputButton.trigger('click'),
    );
    this.import.fileInputButton.on('change', e => {
      const file = e.target.files[0];
      const url = URL.createObjectURL(file);
      const img = new Image();
      img.onload = () => {
        URL.revokeObjectURL(url);
        let width = img.naturalWidth;
        let height = img.naturalHeight;
        const canvas = jquery__WEBPACK_IMPORTED_MODULE_1___default()('<canvas/>');
        canvas.prop({ width, height });
        const canvasEl = canvas.get(0);
        const ctx = canvasEl.getContext('2d');
        ctx.drawImage(img, 0, 0);
        const imdata = ctx.getImageData(0, 0, width, height);
        const codeGrid = [];
        if (width === 0 || height === 0) {
          codeGrid.push([19]); // fallback to single black cell
          width = 1;
          height = 1;
        } else {
          for (let r = 0; r < height; r += 1) {
            codeGrid.push([]);
            for (let c = 0; c < width; c += 1) {
              const idx = r * width * 4 + c * 4;
              const color =
                _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].colorvec2color[imdata.data.slice(idx, idx + 4)] ?? 19;
              codeGrid[r].push(color);
            }
          }
        }
        const codeGrid2 = _piet_js__WEBPACK_IMPORTED_MODULE_4__["default"].compress(codeGrid, width, height);
        this.code.replaceCode(codeGrid2);
        this.codeRects.update();
        this.export.updateExportLink();
      };
      img.src = url;
      e.target.value = '';
    });

    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-debug-tab').on('click', () => {
      const codeGrid = this.code.code;
      const startEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-start');
      const stepEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-step');
      const resetEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-reset');
      const inputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-input');
      const outputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-output');
      const stackEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-stack');
      const statusEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-status');
      const dpEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-dp');
      const ccEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-cc');
      const cmdEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-cmd');
      const speedEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-speed');
      const runEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-run');
      const pauseEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-pause');
      startEl.off('click');
      stepEl.off('click');
      resetEl.off('click');
      runEl.off('click');
      pauseEl.off('click');
      let animationId;
      let animationStartTime;
      let animationSpeed;
      let animationSteps;
      let origInput;
      let arrowEl;
      const updateUi = () => {
        const { dp, cc, input, output, stack, lastCmd } = this.runner;
        const dpDesc = _piet_run_js__WEBPACK_IMPORTED_MODULE_5__["default"].dpText[dp];
        const ccDesc = _piet_run_js__WEBPACK_IMPORTED_MODULE_5__["default"].ccText[dp * 2 + cc];
        dpEl.text(`${dp} (${dpDesc})`);
        ccEl.text(`${cc} (${ccDesc})`);
        inputEl.val(input);
        outputEl.val(output);
        const stackStr = stack.map(n => n.toString()).join(' ');
        stackEl.val(stackStr);
        adjustHeight.call(inputEl.get(0));
        adjustHeight.call(outputEl.get(0));
        adjustHeight.call(stackEl.get(0));
        cmdEl.text(lastCmd);
      };
      startEl.on('click', () => {
        outputEl.val('');
        adjustHeight.call(outputEl.get(0));
        if (codeGrid[0][0] === 19) {
          statusEl.text('Error: Starting black cell detected');
          dpEl.text('N/A');
          ccEl.text('N/A');
        } else {
          origInput = inputEl.val();
          this.runner = new _piet_run_js__WEBPACK_IMPORTED_MODULE_5__["default"](codeGrid, origInput);
          console.log(this.runner);
          startEl.prop('disabled', true);
          stepEl.prop('disabled', false);
          resetEl.prop('disabled', false);
          runEl.prop('disabled', false);
          inputEl.prop('readonly', true);
          statusEl.text('Running');
          updateUi();
          arrowEl = this.codeSvg.polygon(20, 5, 20, 25, 30, 15);
          arrowEl.attr({ fill: 'gray' });
          const mat = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().matrix().translate(
            this.runner.curC * 30,
            this.runner.curR * 30,
          );
          arrowEl.transform(mat);
        }
      });
      stepEl.on('click', () => {
        console.log('step');
        statusEl.text('Running');
        this.runner.step();
        updateUi();
        const mat = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().matrix()
          .translate(this.runner.curC * 30, this.runner.curR * 30)
          .rotate(this.runner.dp * 90, 15, 15);
        arrowEl.transform(mat);
        if (this.runner.finished) {
          stepEl.prop('disabled', true);
          statusEl.text('Finished');
          arrowEl.remove();
        }
      });
      runEl.on('click', () => {
        animationSpeed = Number(speedEl.val());
        if (
          Number.isSafeInteger(animationSpeed) &&
          animationSpeed > 0 &&
          animationSpeed <= 100
        ) {
          runEl.prop('disabled', true);
          pauseEl.prop('disabled', false);
          stepEl.prop('disabled', true);
          statusEl.text('Running');
          animationStartTime = performance.now();
          animationSteps = 0;
          const updateFrame = time => {
            animationId = requestAnimationFrame(updateFrame);
            const timeElapsed = time - animationStartTime;
            const nextSteps = Math.ceil((animationSpeed * timeElapsed) / 1000);
            for (; animationSteps < nextSteps; animationSteps += 1) {
              stepEl.trigger('click');
              if (this.runner.finished) {
                pauseEl.prop('disabled', true);
                cancelAnimationFrame(animationId);
                return;
              }
            }
          };
          animationId = requestAnimationFrame(updateFrame);
        } else {
          console.log('Invalid speed value');
          statusEl.text('Invalid speed value. Allowed values: 1 - 100');
        }
      });
      pauseEl.on('click', () => {
        runEl.prop('disabled', false);
        pauseEl.prop('disabled', true);
        stepEl.prop('disabled', false);
        cancelAnimationFrame(animationId);
      });
      resetEl.on('click', () => {
        console.log('reset');
        startEl.prop('disabled', false);
        stepEl.prop('disabled', true);
        resetEl.prop('disabled', true);
        inputEl.prop('readonly', false);
        inputEl.val(origInput);
        adjustHeight.call(inputEl.get(0));
        statusEl.text('N/A');
        dpEl.text('N/A');
        ccEl.text('N/A');
        cmdEl.text('N/A');
        if (arrowEl !== undefined) arrowEl.remove();
      });
    });
    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-edit-tab, #nav-test-tab, #nav-explain-tab, #nav-share-tab').on(
      'click',
      () => {
        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-reset').trigger('click');
        console.log('trig2');
      },
    );

    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-test-tab').on('click', () => {
      const sepEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-sep');
      const limitEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-limit');
      const runEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-run');
      const stopEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-stop');
      const escapeEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-escape');
      const statusEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-status');
      const inputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input');
      const outputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-output');

      runEl.on('click', () => {
        const sep = sepEl.val() === '' ? '---' : sepEl.val();
        sepEl.val(sep);
        const limitVal = Number(limitEl.val());
        const limit =
          Number.isSafeInteger(limitVal) && limitVal > 0 ? limitVal : 10000;
        limitEl.val(limit);
        runEl.prop('disabled', true);
        stopEl.prop('disabled', false);
        inputEl.prop('readonly', true);
        const doEscape = escapeEl.prop('checked');
        let inputs = inputEl.val().split(`\n${sep}\n`);
        if (doEscape) {
          inputs = inputs.map(s =>
            s.replace(
              /\\[0'"\\nrvtbf]|\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]+\}|\\x[0-9a-fA-F]{2}/g,
              match => {
                if (match.startsWith('\\u') || match.startsWith('\\x')) {
                  const hex = match.startsWith('\\u{')
                    ? match.slice(3, -1)
                    : match.slice(2);
                  return String.fromCodePoint(Number.parseInt(hex, 16));
                }
                return {
                  '\\0': '\0',
                  "\\'": "'",
                  '\\"': '"',
                  '\\\\': '\\',
                  '\\n': '\n',
                  '\\r': '\r',
                  '\\v': '\v',
                  '\\t': '\t',
                  '\\b': '\b',
                  '\\f': '\f',
                }[match];
              },
            ),
          );
        }
        const runners = inputs.map(input => new _piet_run_js__WEBPACK_IMPORTED_MODULE_5__["default"](this.code.code, input));
        const stepsPerRunner = runners.map(() => 0);
        let alive = runners.length;
        const steps = 10; // steps per ms
        const startTime = performance.now();
        let stepsRun = 0;
        let runId;
        statusEl.text('Running');
        const update = time => {
          if (alive === 0) {
            stopEl.trigger('click');
            return;
          }
          runId = requestAnimationFrame(update);
          const totalSteps = Math.ceil(steps * (time - startTime));
          const singleSteps = Math.round((totalSteps - stepsRun) / alive);
          runners.forEach((runner, i) => {
            if (runner.finished) return;
            for (let s = 0; s < singleSteps; s += 1) {
              runner.step();
              stepsRun += 1;
              stepsPerRunner[i] += 1;
              if (stepsPerRunner[i] >= limit) {
                runner.finished = true;
              }
              if (runner.finished) {
                alive -= 1;
                break;
              }
            }
          });
        };
        stopEl.one('click', () => {
          cancelAnimationFrame(runId);
          const outputs = runners.map(runner => runner.output);
          runners.forEach((runner, i) => {
            if (!runner.finished) {
              outputs[i] += '\n** Aborted';
            } else if (stepsPerRunner[i] >= limit) {
              outputs[i] += '\n** Exceeded Step Limit';
            }
          });
          outputEl.val(outputs.join('\n---\n'));
          adjustHeight.call(outputEl.get(0));
          statusEl.text('Finished');
          stopEl.prop('disabled', true);
          runEl.prop('disabled', false);
          inputEl.prop('readonly', false);
        });
        runId = requestAnimationFrame(update);
      });
    });

    // explained: push[num] pop[x] [+] [-] [*] [/] [%] [!] [>] [D]P+ [C]C+
    // [d]up [r]oll [I]nN [i]nC [O]utN [o]utC
    this.codeSvg
      .circle(0, 0, 5)
      .attr({ fill: 'gray', stroke: 'none' })
      .marker(-5, -5, 10, 10, 0, 0)
      .attr({ id: 'mark2' });
    this.codeSvg
      .polygon([0, -10, 0, 10, 10, 0])
      .attr({ fill: 'black', stroke: 'none' })
      .marker(0, -10, 10, 20, 10, 0)
      .attr({ id: 'mark1' });
    // path[r][c] = [...[fromr, fromc, tor, toc, cmd]]
    // pathG[r][c] = svg group that contains all line segments
    this.explain = {
      path: [[]],
      pathG: [[]],
      initPath: () => {
        this.explain.path = this.code.code.map(row => row.map(() => []));
        this.explain.pathG = this.code.code.map(row =>
          row.map(() => this.codeSvg.g()),
        );
        this.explain.runner = new _piet_run_js__WEBPACK_IMPORTED_MODULE_5__["default"](this.code.code, '');
      },
      destroyPath: () => {
        this.explain.pathG.forEach(row => row.forEach(g => g.remove()));
      },
      drawCmd: (groupEl, prevRow, prevCol, nextRow, nextCol, cmd, isFirst) => {
        const x1 = prevCol * 30 + 15;
        const y1 = prevRow * 30 + 15;
        const x2 = nextCol * 30 + 15;
        const y2 = nextRow * 30 + 15;
        const line = groupEl.line(x1, y1, x2, y2);
        // line.attr({ stroke: 'black', 'marker-end': 'url(#mark2)' });
        line.attr({ stroke: 'black' });
        line.node.style['marker-end'] = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().url('mark2');
        if (isFirst) {
          line.node.style['marker-start'] = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().url('mark1');
          // line.attr({ 'marker-start': 'url(#mark1)' });
        } else {
          line.node.style['marker-start'] = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().url('mark2');
          // line.attr({ 'marker-start': 'url(#mark2)' });
        }
        if (cmd !== '') {
          let [xt, yt] = [0, 0];
          if (nextCol === prevCol + 1) {
            [xt, yt] = [prevCol * 30 + 22, prevRow * 30 + 8];
          } else if (nextRow === prevRow + 1) {
            [xt, yt] = [prevCol * 30 + 22, prevRow * 30 + 22];
          } else if (nextCol === prevCol - 1) {
            [xt, yt] = [prevCol * 30 + 8, prevRow * 30 + 22];
          } else if (nextRow === prevRow - 1) {
            [xt, yt] = [prevCol * 30 + 8, prevRow * 30 + 8];
          }
          const cmdText = groupEl.text(xt, yt, cmd);
          const prevCode = this.code.code[prevRow][prevCol];
          cmdText.attr({
            'text-anchor': 'middle',
            'dominant-baseline': 'middle',
            'pointer-events': 'none',
            'font-size': '10px',
            fill: prevCode === 10 || prevCode === 16 ? 'white' : 'black',
          });
        }
      },
      drawDash: (groupEl, prevRow, prevCol, nextRow, nextCol) => {
        const x1 = prevCol * 30 + 15;
        const y1 = prevRow * 30 + 15;
        const x2 = nextCol * 30 + 15;
        const y2 = nextRow * 30 + 15;
        const line = groupEl.line(x1, y1, x2, y2);
        line.attr({ stroke: 'black', 'stroke-dasharray': '4' });
      },
      addPath: (row, col, dp, cc) => {
        const path = this.explain.runner.dryRun(row, col, dp, cc);
        this.explain.path[row][col] = path;
        let [curRow, curCol] = [row, col];
        const g = this.explain.pathG[row][col];
        path.forEach(([prevRow, prevCol, nextRow, nextCol, cmd], i) => {
          // draw commands, and dashed lines on big area jumps
          if (curRow !== prevRow || curCol !== prevCol) {
            this.explain.drawDash(g, curRow, curCol, prevRow, prevCol);
          }
          this.explain.drawCmd(
            g,
            prevRow,
            prevCol,
            nextRow,
            nextCol,
            cmd,
            i === 0,
          );
          [curRow, curCol] = [nextRow, nextCol];
        });
      },
      removePath: (row, col) => {
        this.explain.path[row][col].length = 0;
        this.explain.pathG[row][col]
          .children()
          .forEach(child => child.remove());
      },
      togglePath: (row, col, dp, cc) => {
        if (this.explain.path[row][col].length === 0) {
          this.explain.addPath(row, col, dp, cc);
        } else {
          this.explain.removePath(row, col);
        }
      },
      exportButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-explained'),
      exportUrl: undefined,
      updateExportLink: () => {
        if (this.explain.exportUrl !== undefined) {
          URL.revokeObjectURL(this.explain.exportUrl);
        }
        const svgStr = this.codeSvg
          .outerSVG()
          .replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"');
        const svgBlob = new Blob([svgStr]);
        const svgUrl = URL.createObjectURL(svgBlob);
        this.explain.exportButton.prop({ href: svgUrl });
        this.explain.exportUrl = svgUrl;
      },
    };

    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-explain-tab').on('click', () => {
      // on svg click: if there's already a path, remove it;
      // otherwise add a new path starting there
      this.codeSvg.undrag();
      this.codeSvg.unclick();
      this.explain.initPath();
      this.codeSvg.click(e => {
        const curR = ((e.offsetY - 3) / 30) | 0;
        const curC = ((e.offsetX - 3) / 30) | 0;
        if (
          curR >= 0 &&
          curR < this.code.rows &&
          curC >= 0 &&
          curC < this.code.cols &&
          this.code.code[curR][curC] !== 19
        ) {
          let dp = 0;
          if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-0').prop('checked')) {
            dp = 0;
          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-1').prop('checked')) {
            dp = 1;
          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-2').prop('checked')) {
            dp = 2;
          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-3').prop('checked')) {
            dp = 3;
          }
          let cc = 0;
          if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-cc-0').prop('checked')) {
            cc = 0;
          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-cc-1').prop('checked')) {
            cc = 1;
          }
          this.explain.togglePath(curR, curC, dp, cc);
          // console.log(this.explain);
          this.explain.updateExportLink();
        }
      });
    });
    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-debug, #nav-test, #nav-share').on('click', () => {
      this.codeSvg.undrag();
      this.codeSvg.unclick();
      this.explain.destroyPath();
    });

    const loadFromPermalink = () => {
      const hash = document.location.hash.slice(1);
      const compressed = js_base64__WEBPACK_IMPORTED_MODULE_3__.Base64.toUint8Array(hash);
      try {
        const exportJSON = pako__WEBPACK_IMPORTED_MODULE_2__["default"].inflate(compressed, { to: 'string' });
        const exportObj = JSON.parse(exportJSON);
        // ensure that the obj has all five fields
        if (
          exportObj.code === undefined ||
          exportObj.sep === undefined ||
          exportObj.lim === undefined ||
          exportObj.esc === undefined ||
          exportObj.input === undefined
        ) {
          console.log(exportObj);
          throw new TypeError('Decoded object does not have necessary fields');
        }
        this.code.replaceCode(exportObj.code);
        this.codeRects.update();
        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-sep').val(exportObj.sep);
        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-limit').val(exportObj.lim);
        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-escape').val(exportObj.esc);
        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input').val(exportObj.input);
        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-test-tab').trigger('click');
        setTimeout(() => adjustHeight.call(jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input').get(0)), 1000);
      } catch (err) {
        console.log(err);
      }
    };
    if (document.location.hash !== '') {
      loadFromPermalink();
    }
  }
}


/***/ }),

/***/ "./src/piet.js":
/*!*********************!*\
  !*** ./src/piet.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Piet)
/* harmony export */ });
class Piet {
  static commandText = [
    ['', '+', '/', '>', 'dup', 'inC'],
    ['push', '-', '%', 'DP+', 'roll', 'outN'],
    ['pop', '*', '!', 'CC+', 'inN', 'outC'],
  ];

  static {
    this.char2color = {};
    this.colorvec2color = {};
    this.colors = [];
    const hueMask = [4, 6, 2, 3, 1, 5];
    const lightStr = [
      ['C0', 'FF'],
      ['00', 'FF'],
      ['00', 'C0'],
    ];
    for (let darkness = 0; darkness < 3; darkness += 1) {
      const light = lightStr[darkness];
      for (let hue = 0; hue < 6; hue += 1) {
        const charcode = darkness * 32 + hue + 48;
        let colorcode = '#';
        const colorvec = [];
        for (let i = 0; i < 3; i += 1) {
          const nextVal = light[(hueMask[hue] >> (2 - i)) & 1];
          colorcode += nextVal;
          colorvec.push(Number.parseInt(nextVal, 16));
        }
        colorvec.push(255);
        const char = String.fromCharCode(charcode);
        this.colors.push({ charcode, char, colorcode, colorvec });
        this.char2color[char] = darkness * 6 + hue;
        this.colorvec2color[colorvec] = darkness * 6 + hue;
      }
    }
    this.colors.push({
      charcode: '@'.charCodeAt(),
      char: '@',
      colorcode: '#FFFFFF',
      colorvec: [255, 255, 255, 255],
    });
    this.char2color['@'] = 18;
    this.colorvec2color[this.colors[18].colorvec] = 18;
    this.colors.push({
      charcode: ' '.charCodeAt(),
      char: ' ',
      colorcode: '#000000',
      colorvec: [0, 0, 0, 255],
    });
    this.char2color[' '] = 19;
    this.colorvec2color[this.colors[19].colorvec] = 19;
  }

  static compress(codeGrid, width, height) {
    function gcd(a, b) {
      let [x, y] = [a, b];
      while (y !== 0) {
        [x, y] = [y, x % y];
      }
      return x;
    }
    const g = gcd(width, height);
    function check(s) {
      for (let r = 0; r < height / s; r += 1) {
        for (let c = 0; c < width / s; c += 1) {
          const rmin = r * s;
          const rmax = (r + 1) * s;
          const cmin = c * s;
          const cmax = (c + 1) * s;
          const expected = codeGrid[rmin][cmin];
          for (let rr = rmin; rr < rmax; rr += 1) {
            for (let cc = cmin; cc < cmax; cc += 1) {
              if (expected !== codeGrid[rr][cc]) {
                return false;
              }
            }
          }
        }
      }
      return true;
    }
    for (let gg = g; gg >= 1; gg -= 1) {
      if (g % gg === 0) {
        if (check(gg)) {
          return codeGrid
            .filter((r, i) => i % gg === 0)
            .map(row => row.filter((c, i) => i % gg === 0));
        }
      }
    }
    return codeGrid;
  }

  static fromAsciiPiet(apcode) {
    const apgrid = apcode.replace(/[@A-Z_]/g, s => {
      if (s === '@') {
        return ' \n';
      }
      if (s === '_') {
        return '?\n';
      }
      return `${s.toLowerCase()}\n`;
    });
    const ap = 'tvrsqulnjkimdfbcae? ';
    const codeGrid = apgrid
      .split('\n')
      .map(s => [...s].map(c => (ap.indexOf(c) + 20) % 20));
    const cols = Math.max(1, ...codeGrid.map(row => row.length));
    codeGrid.forEach(row => {
      while (row.length < cols) {
        row.push(19);
      }
    });
    return codeGrid;
  }

  toAsciiPiet(compact) {
    const ap = 'tvrsqulnjkimdfbcae? ';
    const codeStr = this.code.map(row => {
      const rowStr = row
        .map(cell => ap[cell])
        .join('')
        .trimEnd();
      return rowStr;
    });
    if (!compact) {
      return codeStr.join('\n');
    }
    return codeStr
      .map((row, i) => {
        if (i === codeStr.length - 1) {
          return row;
        }
        const [front, back] = [row.slice(0, -1), row.slice(-1)];
        if (back === '?') {
          return `${front}_`;
        }
        return front + back.toUpperCase();
      })
      .join('');
  }

  constructor(code) {
    const codeStr = code || '0';
    this.code = codeStr
      .split(/\r?\n/)
      .map(row => [...row].map(cell => Piet.char2color[cell]));
    this.rows = this.code.length;
    this.cols = this.code[0].length;
  }

  extendCode(direction) {
    if (direction === 'r') {
      this.code.forEach(row => {
        row.push(19);
      });
      this.cols += 1;
    } else if (direction === 'l') {
      this.code.forEach(row => {
        row.unshift(19);
      });
      this.cols += 1;
    } else if (direction === 'd') {
      this.code.push(this.code[0].map(() => 19));
      this.rows += 1;
    } else if (direction === 'u') {
      this.code.unshift(this.code[0].map(() => 19));
      this.rows += 1;
    }
  }

  shrinkCode(direction) {
    if (
      ((direction === 'r' || direction === 'l') && this.cols === 1) ||
      ((direction === 'u' || direction === 'd') && this.rows === 1)
    ) {
      console.log('Dimension cannot be reduced from 1');
    } else if (direction === 'r') {
      this.code.forEach(row => {
        row.pop();
      });
      this.cols -= 1;
    } else if (direction === 'l') {
      this.code.forEach(row => {
        row.shift();
      });
      this.cols -= 1;
    } else if (direction === 'd') {
      this.code.pop();
      this.rows -= 1;
    } else if (direction === 'u') {
      this.code.shift();
      this.rows -= 1;
    }
  }

  replaceCode(newCode) {
    this.code = newCode;
    this.rows = this.code.length;
    this.cols = this.code[0].length;
  }
}


/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e":
/*!*********************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e ***!
  \*********************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e":
/*!***********************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e ***!
  \***********************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e":
/*!************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e ***!
  \************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!*************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \*************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e":
/*!**************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e ***!
  \**************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":
/*!************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e ***!
  \************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e":
/*!***********************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e ***!
  \***********************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e";

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__("./src/index.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZmJiODUzMzM3ZGEyYTAzMmQ1N2UuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDMEc7QUFDakI7QUFDekYsOEJBQThCLG1GQUEyQixDQUFDLDRGQUFxQztBQUMvRjtBQUNBLCtDQUErQyxtQkFBbUIsbUJBQW1CLDZCQUE2QixHQUFHLGtCQUFrQixtQkFBbUIsb0JBQW9CLEdBQUcsY0FBYyxtQkFBbUIsNkJBQTZCLDRCQUE0Qix1QkFBdUIsR0FBRyxPQUFPLGdGQUFnRixVQUFVLFVBQVUsWUFBWSxPQUFPLEtBQUssVUFBVSxVQUFVLE9BQU8sS0FBSyxVQUFVLFlBQVksYUFBYSxhQUFhLCtCQUErQixtQkFBbUIsbUJBQW1CLDZCQUE2QixHQUFHLGtCQUFrQixtQkFBbUIsb0JBQW9CLEdBQUcsY0FBYyxtQkFBbUIsNkJBQTZCLDRCQUE0Qix1QkFBdUIsR0FBRyxtQkFBbUI7QUFDaHlCO0FBQ0EsaUVBQWUsdUJBQXVCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTnZDLE1BQStGO0FBQy9GLE1BQXFGO0FBQ3JGLE1BQTRGO0FBQzVGLE1BQStHO0FBQy9HLE1BQXdHO0FBQ3hHLE1BQXdHO0FBQ3hHLE1BQW1HO0FBQ25HO0FBQ0E7O0FBRUE7O0FBRUEsNEJBQTRCLHFHQUFtQjtBQUMvQyx3QkFBd0Isa0hBQWE7O0FBRXJDLHVCQUF1Qix1R0FBYTtBQUNwQztBQUNBLGlCQUFpQiwrRkFBTTtBQUN2Qiw2QkFBNkIsc0dBQWtCOztBQUUvQyxhQUFhLDBHQUFHLENBQUMsc0ZBQU87Ozs7QUFJNkM7QUFDckUsT0FBTyxpRUFBZSxzRkFBTyxJQUFJLDZGQUFjLEdBQUcsNkZBQWMsWUFBWSxFQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMxQnRDO0FBQ2hCO0FBQ0k7QUFDTztBQUNZO0FBQ0k7QUFDN0I7O0FBRXJCO0FBQ0EsaUJBQWlCLG1EQUFNO0FBQ3ZCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O0FDZjZCOztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLEtBQUs7QUFDcEMsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNO0FBQzFCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGlldC8uL3NyYy9pbmRleC5jc3MiLCJ3ZWJwYWNrOi8vcGlldC8uL3NyYy9pbmRleC5jc3M/Y2ZlNCIsIndlYnBhY2s6Ly9waWV0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3BpZXQvLi9zcmMvcGlldC1ydW4uanMiLCJ3ZWJwYWNrOi8vcGlldC8uL3NyYy9waWV0LXVpLmpzIiwid2VicGFjazovL3BpZXQvLi9zcmMvcGlldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcInN2ZyB7XFxuICAgIG1hcmdpbjogbm9uZTtcXG4gICAgcGFkZGluZzogMnB4O1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjY2NjO1xcbn1cXG5cXG4jc3ZnLXBhbGV0dGUge1xcbiAgICB3aWR0aDogMzY4cHg7XFxuICAgIGhlaWdodDogMTI4cHg7XFxufVxcblxcbnRleHRhcmVhIHtcXG4gICAgcmVzaXplOiBub25lO1xcbiAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xcbiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9pbmRleC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSxZQUFZO0lBQ1osWUFBWTtJQUNaLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLHNCQUFzQjtJQUN0QixxQkFBcUI7SUFDckIsZ0JBQWdCO0FBQ3BCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcInN2ZyB7XFxuICAgIG1hcmdpbjogbm9uZTtcXG4gICAgcGFkZGluZzogMnB4O1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjY2NjO1xcbn1cXG5cXG4jc3ZnLXBhbGV0dGUge1xcbiAgICB3aWR0aDogMzY4cHg7XFxuICAgIGhlaWdodDogMTI4cHg7XFxufVxcblxcbnRleHRhcmVhIHtcXG4gICAgcmVzaXplOiBub25lO1xcbiAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xcbiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XFxuICAgIG92ZXJmbG93OiBoaWRkZW47XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXguY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJpbXBvcnQgKiBhcyBib290c3RyYXAgZnJvbSAnYm9vdHN0cmFwJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgU25hcCBmcm9tICdzbmFwc3ZnJztcbmltcG9ydCBQaWV0VUkgZnJvbSAnLi9waWV0LXVpLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzJztcbmltcG9ydCAnYm9vdHN0cmFwLWljb25zL2ZvbnQvYm9vdHN0cmFwLWljb25zLmNzcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgY29uc3QgdWkgPSBuZXcgUGlldFVJKCk7XG59XG5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gIGluaXQoKTtcbiAgY29uc29sZS5sb2coJ2xvYWRlZCcpO1xufTtcbiIsImltcG9ydCBQaWV0IGZyb20gJy4vcGlldC5qcyc7XG5cbmZ1bmN0aW9uIGRpdm1vZCh4LCB5KSB7XG4gIGlmICgoeCA+PSAwbiAmJiB5ID4gMG4pIHx8ICh4IDwgMG4gJiYgeSA8IDBuKSkge1xuICAgIHJldHVybiBbeCAvIHksIHggJSB5XTtcbiAgfVxuICBjb25zdCB4YWJzID0geCA+PSAwbiA/IHggOiAteDtcbiAgY29uc3QgW3lhYnMsIHlzZ25dID0geSA+PSAwbiA/IFt5LCAxbl0gOiBbLXksIC0xbl07XG4gIGxldCBkaXYgPSB4YWJzIC8geWFicztcbiAgbGV0IG1vZCA9IHhhYnMgJSB5YWJzO1xuICBpZiAobW9kICE9PSAwbikge1xuICAgIGRpdiArPSAxbjtcbiAgICBtb2QgPSB5YWJzIC0gbW9kO1xuICB9XG4gIHJldHVybiBbLWRpdiwgbW9kICogeXNnbl07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBpZXRSdW4ge1xuICBzdGF0aWMge1xuICAgIHRoaXMuck9mZiA9IFswLCAxLCAwLCAtMV07XG4gICAgdGhpcy5jT2ZmID0gWzEsIDAsIC0xLCAwXTtcbiAgICB0aGlzLmRwVGV4dCA9IFsnUmlnaHQnLCAnRG93bicsICdMZWZ0JywgJ1VwJ107XG4gICAgdGhpcy5jY1RleHQgPSBbXG4gICAgICAnVG9wJyxcbiAgICAgICdCb3R0b20nLFxuICAgICAgJ1JpZ2h0JyxcbiAgICAgICdMZWZ0JyxcbiAgICAgICdCb3R0b20nLFxuICAgICAgJ1RvcCcsXG4gICAgICAnTGVmdCcsXG4gICAgICAnUmlnaHQnLFxuICAgIF07XG4gICAgdGhpcy5hYmJyZXYgPSB7XG4gICAgICBwdXNoOiAnJyxcbiAgICAgIHBvcDogJ3gnLFxuICAgICAgJysnOiAnKycsXG4gICAgICAnLSc6ICctJyxcbiAgICAgICcqJzogJyonLFxuICAgICAgJy8nOiAnLycsXG4gICAgICAnJSc6ICclJyxcbiAgICAgICchJzogJyEnLFxuICAgICAgJz4nOiAnPicsXG4gICAgICAnRFArJzogJ0QnLFxuICAgICAgJ0NDKyc6ICdDJyxcbiAgICAgIGR1cDogJ2QnLFxuICAgICAgcm9sbDogJ3InLFxuICAgICAgaW5OOiAnSScsXG4gICAgICBpbkM6ICdpJyxcbiAgICAgIG91dE46ICdPJyxcbiAgICAgIG91dEM6ICdvJyxcbiAgICB9O1xuICAgIHRoaXMuY21kcyA9IHtcbiAgICAgIHB1c2g6IChzZWxmLCBzaXplKSA9PiB7XG4gICAgICAgIHNlbGYuc3RhY2sucHVzaChCaWdJbnQoc2l6ZSkpO1xuICAgICAgICBzZWxmLmxhc3RDbWQgPSBgcHVzaCAke3NpemV9YDtcbiAgICAgIH0sXG4gICAgICBwb3A6IHNlbGYgPT4ge1xuICAgICAgICBzZWxmLnN0YWNrLnBvcCgpO1xuICAgICAgfSxcbiAgICAgICcrJzogc2VsZiA9PiB7XG4gICAgICAgIGlmIChzZWxmLnN0YWNrLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgY29uc3QgW3RvcDIsIHRvcF0gPSBzZWxmLnN0YWNrLnNwbGljZSgtMik7XG4gICAgICAgICAgc2VsZi5zdGFjay5wdXNoKHRvcDIgKyB0b3ApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJy0nOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBjb25zdCBbdG9wMiwgdG9wXSA9IHNlbGYuc3RhY2suc3BsaWNlKC0yKTtcbiAgICAgICAgICBzZWxmLnN0YWNrLnB1c2godG9wMiAtIHRvcCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnKic6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5zdGFjay5sZW5ndGggPj0gMikge1xuICAgICAgICAgIGNvbnN0IFt0b3AyLCB0b3BdID0gc2VsZi5zdGFjay5zcGxpY2UoLTIpO1xuICAgICAgICAgIHNlbGYuc3RhY2sucHVzaCh0b3AyICogdG9wKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICcvJzogc2VsZiA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzZWxmLnN0YWNrLmxlbmd0aCA+PSAyICYmXG4gICAgICAgICAgc2VsZi5zdGFja1tzZWxmLnN0YWNrLmxlbmd0aCAtIDFdICE9PSAwblxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBbdG9wMiwgdG9wXSA9IHNlbGYuc3RhY2suc3BsaWNlKC0yKTtcbiAgICAgICAgICBzZWxmLnN0YWNrLnB1c2goZGl2bW9kKHRvcDIsIHRvcClbMF0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJyUnOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNlbGYuc3RhY2subGVuZ3RoID49IDIgJiZcbiAgICAgICAgICBzZWxmLnN0YWNrW3NlbGYuc3RhY2subGVuZ3RoIC0gMV0gIT09IDBuXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IFt0b3AyLCB0b3BdID0gc2VsZi5zdGFjay5zcGxpY2UoLTIpO1xuICAgICAgICAgIHNlbGYuc3RhY2sucHVzaChkaXZtb2QodG9wMiwgdG9wKVsxXSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnISc6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5zdGFjay5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIGNvbnN0IHRvcCA9IHNlbGYuc3RhY2sucG9wKCk7XG4gICAgICAgICAgc2VsZi5zdGFjay5wdXNoKHRvcCA9PT0gMG4gPyAxbiA6IDBuKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICc+Jzogc2VsZiA9PiB7XG4gICAgICAgIGlmIChzZWxmLnN0YWNrLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgY29uc3QgW3RvcDIsIHRvcF0gPSBzZWxmLnN0YWNrLnNwbGljZSgtMik7XG4gICAgICAgICAgc2VsZi5zdGFjay5wdXNoKHRvcDIgPiB0b3AgPyAxbiA6IDBuKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdEUCsnOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDEpIHtcbiAgICAgICAgICBjb25zdCB0b3AgPSBzZWxmLnN0YWNrLnBvcCgpO1xuICAgICAgICAgIHNlbGYuZHAgPSAoc2VsZi5kcCArIE51bWJlcih0b3AgJSA0bikgKyA0KSAlIDQ7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnQ0MrJzogc2VsZiA9PiB7XG4gICAgICAgIGlmIChzZWxmLnN0YWNrLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgY29uc3QgdG9wID0gc2VsZi5zdGFjay5wb3AoKTtcbiAgICAgICAgICBzZWxmLmNjID0gKHNlbGYuY2MgKyBOdW1iZXIodG9wICUgMm4pICsgMikgJSAyO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZHVwOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDEpIHtcbiAgICAgICAgICBjb25zdCB0b3AgPSBzZWxmLnN0YWNrLnBvcCgpO1xuICAgICAgICAgIHNlbGYuc3RhY2sucHVzaCh0b3AsIHRvcCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByb2xsOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBjb25zdCBbdG9wMiwgdG9wXSA9IHNlbGYuc3RhY2suc3BsaWNlKC0yKTtcbiAgICAgICAgICBpZiAodG9wMiA+PSAwbiAmJiBzZWxmLnN0YWNrLmxlbmd0aCA+PSBOdW1iZXIodG9wMikpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdCA9IGRpdm1vZCgtdG9wLCB0b3AyKVsxXTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWQgPSBzZWxmLnN0YWNrLnNwbGljZSgtTnVtYmVyKHRvcDIpLCBOdW1iZXIocm90KSk7XG4gICAgICAgICAgICBzZWxmLnN0YWNrLnB1c2goLi4ucmVtb3ZlZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuc3RhY2sucHVzaCh0b3AyLCB0b3ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluTjogc2VsZiA9PiB7XG4gICAgICAgIC8vIHNraXAgd2hpdGVzcGFjZXMsIGFjY2VwdCBkaWdpdHMgYW5kIHN0b3AgYmVmb3JlIG5vbi1kaWdpdHNcbiAgICAgICAgLy8gaWYgbm8gZGlnaXRzIGZvdW5kLCBuby1vcFxuICAgICAgICBjb25zdCBzcGFjZXMgPSBzZWxmLmlucHV0Lm1hdGNoKC9eXFxzKi8pWzBdO1xuICAgICAgICBzZWxmLmlucHV0ID0gc2VsZi5pbnB1dC5zbGljZShzcGFjZXMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgbnVtYmVyID0gc2VsZi5pbnB1dC5tYXRjaCgvXlswLTldKi8pWzBdO1xuICAgICAgICBpZiAobnVtYmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZWxmLnN0YWNrLnB1c2goQmlnSW50KG51bWJlcikpO1xuICAgICAgICAgIHNlbGYuaW5wdXQgPSBzZWxmLmlucHV0LnNsaWNlKG51bWJlci5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5DOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuaW5wdXQgIT09ICcnKSB7XG4gICAgICAgICAgY29uc3QgY3AgPSBzZWxmLmlucHV0LmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgIGlmIChjcCA+PSA2NTUzNikge1xuICAgICAgICAgICAgc2VsZi5pbnB1dCA9IHNlbGYuaW5wdXQuc2xpY2UoMik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQgPSBzZWxmLmlucHV0LnNsaWNlKDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxmLnN0YWNrLnB1c2goQmlnSW50KGNwKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvdXROOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDEpIHtcbiAgICAgICAgICBjb25zdCB0b3AgPSBzZWxmLnN0YWNrLnBvcCgpO1xuICAgICAgICAgIHNlbGYub3V0cHV0ICs9IHRvcC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb3V0Qzogc2VsZiA9PiB7XG4gICAgICAgIGlmIChzZWxmLnN0YWNrLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgY29uc3QgdG9wID0gc2VsZi5zdGFjay5wb3AoKTtcbiAgICAgICAgICBpZiAodG9wID49IDBuICYmIHRvcCA8PSAxMTE0MTExbikge1xuICAgICAgICAgICAgc2VsZi5vdXRwdXQgKz0gU3RyaW5nLmZyb21Db2RlUG9pbnQoTnVtYmVyKHRvcCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3RydWN0b3IoY29kZSwgaW5wdXQpIHtcbiAgICB0aGlzLmRwID0gMDtcbiAgICB0aGlzLmNjID0gMDtcbiAgICB0aGlzLmN1clIgPSAwO1xuICAgIHRoaXMuY3VyQyA9IDA7XG4gICAgdGhpcy5sYXN0Q21kID0gJ04vQSc7XG4gICAgdGhpcy5sYXN0Q2hhbmdlID0gJ25vbmUnO1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLm91dHB1dCA9ICcnO1xuICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICB0aGlzLnRyeUhpc3RvcnkgPSBbXTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgY29uc3Qgcm93cyA9IGNvZGUubGVuZ3RoO1xuICAgIGNvbnN0IGNvbHMgPSBjb2RlWzBdLmxlbmd0aDtcbiAgICAvLyBmb3IgZWFjaCBjZWxsIChleGNlcHQgYmxhY2spOiByZWZlcmVuY2UgdG8gYXJlYSBvYmplY3RcbiAgICAvLyBmb3IgZWFjaCBhcmVhOiBsaXN0IG9mIGNlbGxzLCBmcm9udGllciBjZWxsIGZvciBlYWNoIGRwIGFuZCBjY1xuICAgIC8vIHdoaXRlIGlzIDEgYXJlYSBwZXIgY2VsbFxuICAgIHRoaXMuYXJlYXMgPSBbXTtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IHJvd3M7IHIgKz0gMSkge1xuICAgICAgY29uc3QgYXJlYXNSb3cgPSBbXTtcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY29sczsgYyArPSAxKSB7XG4gICAgICAgIGFyZWFzUm93LnB1c2godW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYXJlYXMucHVzaChhcmVhc1Jvdyk7XG4gICAgfVxuICAgIGZvciAobGV0IHIgPSAwOyByIDwgcm93czsgciArPSAxKSB7XG4gICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGNvbHM7IGMgKz0gMSkge1xuICAgICAgICBjb25zdCBjdXJDb2xvciA9IGNvZGVbcl1bY107XG4gICAgICAgIGlmICh0aGlzLmFyZWFzW3JdW2NdID09PSB1bmRlZmluZWQgJiYgY3VyQ29sb3IgIT09IDE5KSB7XG4gICAgICAgICAgY29uc3QgbmV3QXJlYSA9IHtcbiAgICAgICAgICAgIGNlbGxzOiBbXSxcbiAgICAgICAgICAgIGNvbG9yOiBjdXJDb2xvcixcbiAgICAgICAgICAgIGZyb250aWVyOiBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgICAgICBmcm9udGllck91dDogWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgICAgICAgICAgZnJvbnRpZXJCbG9ja2VkOiBBcnJheSg4KS5maWxsKGZhbHNlKSxcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IHN0YWNrID0gW1tyLCBjXV07XG4gICAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgW2N1clIsIGN1ckNdID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hcmVhc1tjdXJSXVtjdXJDXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuYXJlYXNbY3VyUl1bY3VyQ10gPSBuZXdBcmVhO1xuICAgICAgICAgICAgICBuZXdBcmVhLmNlbGxzLnB1c2goW2N1clIsIGN1ckNdKTtcbiAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIFtjdXJSIC0gMSwgY3VyQ10sXG4gICAgICAgICAgICAgICAgW2N1clIsIGN1ckMgLSAxXSxcbiAgICAgICAgICAgICAgICBbY3VyUiArIDEsIGN1ckNdLFxuICAgICAgICAgICAgICAgIFtjdXJSLCBjdXJDICsgMV0sXG4gICAgICAgICAgICAgIF0uZm9yRWFjaCgoW25leHRSLCBuZXh0Q10pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBuZXh0UiA+PSAwICYmXG4gICAgICAgICAgICAgICAgICBuZXh0UiA8IHJvd3MgJiZcbiAgICAgICAgICAgICAgICAgIG5leHRDID49IDAgJiZcbiAgICAgICAgICAgICAgICAgIG5leHRDIDwgY29scyAmJlxuICAgICAgICAgICAgICAgICAgY29kZVtuZXh0Ul1bbmV4dENdID09PSBjdXJDb2xvciAmJlxuICAgICAgICAgICAgICAgICAgY3VyQ29sb3IgIT09IDE4XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFtuZXh0UiwgbmV4dENdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBmcm9udGllciBjYWxjdWxhdGlvbiAocmlnaHQgeDIsIGRvd24geDIsIGxlZnQgeDIsIHVwIHgyKVxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAxKSB7XG4gICAgICAgICAgICBuZXdBcmVhLmZyb250aWVyW2ldID0gW3IsIGNdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXdBcmVhLmNlbGxzLmZvckVhY2goKFtjdXJSLCBjdXJDXSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29uZHMgPSBbXG4gICAgICAgICAgICAgIChbZnIsIGZjXSkgPT4gY3VyQyA+IGZjIHx8IChjdXJDID09PSBmYyAmJiBjdXJSIDwgZnIpLFxuICAgICAgICAgICAgICAoW2ZyLCBmY10pID0+IGN1ckMgPiBmYyB8fCAoY3VyQyA9PT0gZmMgJiYgY3VyUiA+IGZyKSxcbiAgICAgICAgICAgICAgKFtmciwgZmNdKSA9PiBjdXJSID4gZnIgfHwgKGN1clIgPT09IGZyICYmIGN1ckMgPiBmYyksXG4gICAgICAgICAgICAgIChbZnIsIGZjXSkgPT4gY3VyUiA+IGZyIHx8IChjdXJSID09PSBmciAmJiBjdXJDIDwgZmMpLFxuICAgICAgICAgICAgICAoW2ZyLCBmY10pID0+IGN1ckMgPCBmYyB8fCAoY3VyQyA9PT0gZmMgJiYgY3VyUiA+IGZyKSxcbiAgICAgICAgICAgICAgKFtmciwgZmNdKSA9PiBjdXJDIDwgZmMgfHwgKGN1ckMgPT09IGZjICYmIGN1clIgPCBmciksXG4gICAgICAgICAgICAgIChbZnIsIGZjXSkgPT4gY3VyUiA8IGZyIHx8IChjdXJSID09PSBmciAmJiBjdXJDIDwgZmMpLFxuICAgICAgICAgICAgICAoW2ZyLCBmY10pID0+IGN1clIgPCBmciB8fCAoY3VyUiA9PT0gZnIgJiYgY3VyQyA+IGZjKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjb25kcy5mb3JFYWNoKChjb25kLCBpKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZyb250ID0gbmV3QXJlYS5mcm9udGllcltpXTtcbiAgICAgICAgICAgICAgaWYgKGNvbmQoZnJvbnQpKSB7XG4gICAgICAgICAgICAgICAgbmV3QXJlYS5mcm9udGllcltpXSA9IFtjdXJSLCBjdXJDXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IFtmciwgZmNdID0gbmV3QXJlYS5mcm9udGllcltpXTtcbiAgICAgICAgICAgIGNvbnN0IG91dFIgPSBmciArIFBpZXRSdW4uck9mZlsoaSAvIDIpIHwgMF07XG4gICAgICAgICAgICBjb25zdCBvdXRDID0gZmMgKyBQaWV0UnVuLmNPZmZbKGkgLyAyKSB8IDBdO1xuICAgICAgICAgICAgbmV3QXJlYS5mcm9udGllck91dFtpXSA9IFtvdXRSLCBvdXRDXTtcbiAgICAgICAgICAgIG5ld0FyZWEuZnJvbnRpZXJCbG9ja2VkW2ldID1cbiAgICAgICAgICAgICAgb3V0UiA8IDAgfHxcbiAgICAgICAgICAgICAgb3V0UiA+PSByb3dzIHx8XG4gICAgICAgICAgICAgIG91dEMgPCAwIHx8XG4gICAgICAgICAgICAgIG91dEMgPj0gY29scyB8fFxuICAgICAgICAgICAgICBjb2RlW291dFJdW291dENdID09PSAxOTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc3RhcnRBcmVhID0gdGhpcy5hcmVhc1swXVswXTtcbiAgICBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdID0gc3RhcnRBcmVhLmZyb250aWVyW3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gIH1cblxuICBzdGVwKCkge1xuICAgIGNvbnN0IGN5Y2xlRGV0ZWN0ZWQgPSB0aGlzLnRyeUhpc3Rvcnkuc29tZShcbiAgICAgIChbciwgYywgZHAsIGNjXSkgPT5cbiAgICAgICAgdGhpcy5jdXJSID09PSByICYmIHRoaXMuY3VyQyA9PT0gYyAmJiB0aGlzLmRwID09PSBkcCAmJiB0aGlzLmNjID09PSBjYyxcbiAgICApO1xuICAgIGlmIChjeWNsZURldGVjdGVkKSB7XG4gICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY3VyQXJlYSA9IHRoaXMuYXJlYXNbdGhpcy5jdXJSXVt0aGlzLmN1ckNdO1xuICAgIGNvbnN0IHsgY29sb3IsIGZyb250aWVyT3V0LCBmcm9udGllckJsb2NrZWQgfSA9IGN1ckFyZWE7XG4gICAgY29uc3QgW25leHRSLCBuZXh0Q10gPSBmcm9udGllck91dFt0aGlzLmRwICogMiArIHRoaXMuY2NdO1xuICAgIGNvbnN0IGJsb2NrZWQgPSBmcm9udGllckJsb2NrZWRbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICBpZiAoYmxvY2tlZCkge1xuICAgICAgdGhpcy50cnlIaXN0b3J5LnB1c2goW3RoaXMuY3VyUiwgdGhpcy5jdXJDLCB0aGlzLmRwLCB0aGlzLmNjXSk7XG4gICAgICBpZiAodGhpcy5sYXN0Q2hhbmdlID09PSAnY2MnKSB7XG4gICAgICAgIHRoaXMuZHAgPSAodGhpcy5kcCArIDEpICYgMztcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlID0gJ2RwJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2MgPSAxIC0gdGhpcy5jYztcbiAgICAgICAgdGhpcy5sYXN0Q2hhbmdlID0gJ2NjJztcbiAgICAgIH1cbiAgICAgIFt0aGlzLmN1clIsIHRoaXMuY3VyQ10gPSBjdXJBcmVhLmZyb250aWVyW3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgICB0aGlzLmxhc3RDbWQgPSAnYmxvY2tlZCc7XG4gICAgICAvLyBjb25zb2xlLmxvZygnYmxvY2tlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhc3RDaGFuZ2UgPSAnbm9uZSc7XG4gICAgICBpZiAoY29sb3IgPT09IDE4KSB7XG4gICAgICAgIHRoaXMudHJ5SGlzdG9yeS5wdXNoKFt0aGlzLmN1clIsIHRoaXMuY3VyQywgdGhpcy5kcCwgdGhpcy5jY10pO1xuICAgICAgICBjb25zdCBuZXh0QXJlYSA9IHRoaXMuYXJlYXNbbmV4dFJdW25leHRDXTtcbiAgICAgICAgW3RoaXMuY3VyUiwgdGhpcy5jdXJDXSA9IG5leHRBcmVhLmZyb250aWVyW3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgICAgIHRoaXMubGFzdENtZCA9ICdub29wJztcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ25vb3AnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudHJ5SGlzdG9yeS5sZW5ndGggPSAwO1xuICAgICAgICBjb25zdCBuZXh0QXJlYSA9IHRoaXMuYXJlYXNbbmV4dFJdW25leHRDXTtcbiAgICAgICAgW3RoaXMuY3VyUiwgdGhpcy5jdXJDXSA9IG5leHRBcmVhLmZyb250aWVyW3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgICAgIGNvbnN0IG5leHRDb2xvciA9IG5leHRBcmVhLmNvbG9yO1xuICAgICAgICBpZiAobmV4dENvbG9yID09PSAxOCkge1xuICAgICAgICAgIHRoaXMubGFzdENtZCA9ICdub29wJztcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbm9vcCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGxpZ2h0RGlmZiA9ICgoKG5leHRDb2xvciAvIDYgKyAzKSB8IDApIC0gKChjb2xvciAvIDYpIHwgMCkpICUgMztcbiAgICAgICAgICBjb25zdCBodWVEaWZmID0gKChuZXh0Q29sb3IgJSA2KSArIDYgLSAoY29sb3IgJSA2KSkgJSA2O1xuICAgICAgICAgIHRoaXMubGFzdENtZCA9IFBpZXQuY29tbWFuZFRleHRbbGlnaHREaWZmXVtodWVEaWZmXTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY21kOicsIGxpZ2h0RGlmZiwgaHVlRGlmZiwgdGhpcy5sYXN0Q21kKTtcbiAgICAgICAgICBQaWV0UnVuLmNtZHNbdGhpcy5sYXN0Q21kXSh0aGlzLCBjdXJBcmVhLmNlbGxzLmxlbmd0aCk7XG4gICAgICAgICAgW3RoaXMuY3VyUiwgdGhpcy5jdXJDXSA9IG5leHRBcmVhLmZyb250aWVyW3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkcnlTdGVwKCkge1xuICAgIGNvbnN0IGN5Y2xlRGV0ZWN0ZWQgPSB0aGlzLnRyeUhpc3Rvcnkuc29tZShcbiAgICAgIChbciwgYywgZHAsIGNjXSkgPT5cbiAgICAgICAgdGhpcy5jdXJSID09PSByICYmIHRoaXMuY3VyQyA9PT0gYyAmJiB0aGlzLmRwID09PSBkcCAmJiB0aGlzLmNjID09PSBjYyxcbiAgICApO1xuICAgIGlmIChjeWNsZURldGVjdGVkKSB7XG4gICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB7IGZpbmlzaGVkOiB0cnVlIH07XG4gICAgfVxuICAgIGNvbnN0IFtsYXN0UiwgbGFzdENdID0gW3RoaXMuY3VyUiwgdGhpcy5jdXJDXTtcbiAgICBjb25zdCBjdXJBcmVhID0gdGhpcy5hcmVhc1t0aGlzLmN1clJdW3RoaXMuY3VyQ107XG4gICAgY29uc3QgeyBjb2xvciwgZnJvbnRpZXJPdXQsIGZyb250aWVyQmxvY2tlZCB9ID0gY3VyQXJlYTtcbiAgICBjb25zdCBbbmV4dFIsIG5leHRDXSA9IGZyb250aWVyT3V0W3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgY29uc3QgYmxvY2tlZCA9IGZyb250aWVyQmxvY2tlZFt0aGlzLmRwICogMiArIHRoaXMuY2NdO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICB0aGlzLnRyeUhpc3RvcnkucHVzaChbdGhpcy5jdXJSLCB0aGlzLmN1ckMsIHRoaXMuZHAsIHRoaXMuY2NdKTtcbiAgICAgIGlmICh0aGlzLmxhc3RDaGFuZ2UgPT09ICdjYycpIHtcbiAgICAgICAgdGhpcy5kcCA9ICh0aGlzLmRwICsgMSkgJiAzO1xuICAgICAgICB0aGlzLmxhc3RDaGFuZ2UgPSAnZHAnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYyA9IDEgLSB0aGlzLmNjO1xuICAgICAgICB0aGlzLmxhc3RDaGFuZ2UgPSAnY2MnO1xuICAgICAgfVxuICAgICAgW3RoaXMuY3VyUiwgdGhpcy5jdXJDXSA9IGN1ckFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICAgIHRoaXMubGFzdENtZCA9ICdibG9ja2VkJztcbiAgICAgIHJldHVybiB7IGZpbmlzaGVkOiBmYWxzZSwgYmxvY2tlZDogdHJ1ZSB9O1xuICAgICAgLy8gY29uc29sZS5sb2coJ2Jsb2NrZWQnKTtcbiAgICB9XG4gICAgdGhpcy5sYXN0Q2hhbmdlID0gJ25vbmUnO1xuICAgIGlmIChjb2xvciA9PT0gMTgpIHtcbiAgICAgIHRoaXMudHJ5SGlzdG9yeS5wdXNoKFt0aGlzLmN1clIsIHRoaXMuY3VyQywgdGhpcy5kcCwgdGhpcy5jY10pO1xuICAgICAgY29uc3QgbmV4dEFyZWEgPSB0aGlzLmFyZWFzW25leHRSXVtuZXh0Q107XG4gICAgICBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdID0gbmV4dEFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICAgIHRoaXMubGFzdENtZCA9ICdub29wJztcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdub29wJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudHJ5SGlzdG9yeS5sZW5ndGggPSAwO1xuICAgICAgY29uc3QgbmV4dEFyZWEgPSB0aGlzLmFyZWFzW25leHRSXVtuZXh0Q107XG4gICAgICBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdID0gbmV4dEFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICAgIGNvbnN0IG5leHRDb2xvciA9IG5leHRBcmVhLmNvbG9yO1xuICAgICAgaWYgKG5leHRDb2xvciA9PT0gMTgpIHtcbiAgICAgICAgdGhpcy5sYXN0Q21kID0gJ25vb3AnO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnbm9vcCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbGlnaHREaWZmID0gKCgobmV4dENvbG9yIC8gNiArIDMpIHwgMCkgLSAoKGNvbG9yIC8gNikgfCAwKSkgJSAzO1xuICAgICAgICBjb25zdCBodWVEaWZmID0gKChuZXh0Q29sb3IgJSA2KSArIDYgLSAoY29sb3IgJSA2KSkgJSA2O1xuICAgICAgICB0aGlzLmxhc3RDbWQgPSBQaWV0LmNvbW1hbmRUZXh0W2xpZ2h0RGlmZl1baHVlRGlmZl07XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjbWQ6JywgbGlnaHREaWZmLCBodWVEaWZmLCB0aGlzLmxhc3RDbWQpO1xuICAgICAgICAvLyBQaWV0UnVuLmNtZHNbdGhpcy5sYXN0Q21kXSh0aGlzLCBjdXJBcmVhLmNlbGxzLmxlbmd0aCk7XG4gICAgICAgIFt0aGlzLmN1clIsIHRoaXMuY3VyQ10gPSBuZXh0QXJlYS5mcm9udGllclt0aGlzLmRwICogMiArIHRoaXMuY2NdO1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgYWJiID0gJyc7XG4gICAgaWYgKHRoaXMubGFzdENtZCA9PT0gJ3B1c2gnKSB7XG4gICAgICBhYmIgPSBgJHtjdXJBcmVhLmNlbGxzLmxlbmd0aH1gO1xuICAgIH0gZWxzZSBpZiAodGhpcy5sYXN0Q21kICE9PSAnbm9vcCcpIHtcbiAgICAgIGFiYiA9IFBpZXRSdW4uYWJicmV2W3RoaXMubGFzdENtZF07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBmaW5pc2hlZDogZmFsc2UsXG4gICAgICBibG9ja2VkOiBmYWxzZSxcbiAgICAgIGRhdGE6IFtsYXN0UiwgbGFzdEMsIG5leHRSLCBuZXh0QywgYWJiXSxcbiAgICAgIHN0b3A6IGFiYiA9PT0gJ0QnIHx8IGFiYiA9PT0gJ0MnLCAvLyBzdG9wIHRyYWNpbmcgYXQgRFArIG9yIENDK1xuICAgIH07XG4gIH1cblxuICBkcnlSdW4ocm93LCBjb2wsIGRwLCBjYykge1xuICAgIGNvbnN0IHN0YXJ0QXJlYSA9IHRoaXMuYXJlYXNbcm93XVtjb2xdO1xuICAgIFt0aGlzLmN1clIsIHRoaXMuY3VyQ10gPSBzdGFydEFyZWEuZnJvbnRpZXJbZHAgKiAyICsgY2NdO1xuICAgIHRoaXMuZHAgPSBkcDtcbiAgICB0aGlzLmNjID0gY2M7XG4gICAgY29uc3QgaGlzdG9yeSA9IHt9O1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICBjb25zdCBwYXRoID0gW107XG4gICAgbGV0IGdGaW5pc2hlZCA9IGZhbHNlO1xuICAgIGxldCBnU3RvcCA9IGZhbHNlO1xuICAgIHdoaWxlIChcbiAgICAgICFnRmluaXNoZWQgJiZcbiAgICAgICFnU3RvcCAmJlxuICAgICAgIWhpc3RvcnlbW3RoaXMuY3VyUiwgdGhpcy5jdXJDLCB0aGlzLmRwLCB0aGlzLmNjXV1cbiAgICApIHtcbiAgICAgIGhpc3RvcnlbW3RoaXMuY3VyUiwgdGhpcy5jdXJDLCB0aGlzLmRwLCB0aGlzLmNjXV0gPSB0cnVlO1xuICAgICAgY29uc3QgeyBmaW5pc2hlZCwgYmxvY2tlZCwgZGF0YSwgc3RvcCB9ID0gdGhpcy5kcnlTdGVwKCk7XG4gICAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgICAgZ0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoIWJsb2NrZWQpIHtcbiAgICAgICAgcGF0aC5wdXNoKGRhdGEpO1xuICAgICAgICBnU3RvcCA9IHN0b3A7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG59XG4iLCJpbXBvcnQgU25hcCBmcm9tICdzbmFwc3ZnJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgcGFrbyBmcm9tICdwYWtvJztcbmltcG9ydCB7IEJhc2U2NCB9IGZyb20gJ2pzLWJhc2U2NCc7XG5pbXBvcnQgUGlldCBmcm9tICcuL3BpZXQuanMnO1xuaW1wb3J0IFBpZXRSdW4gZnJvbSAnLi9waWV0LXJ1bi5qcyc7XG5cbmZ1bmN0aW9uIGFkanVzdEhlaWdodCgpIHtcbiAgdGhpcy5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gIHRoaXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5zY3JvbGxIZWlnaHR9cHhgO1xufVxuXG4vLyBjeXJiNTMgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTIxNzE0ODAvNDU5NTkwNFxuZnVuY3Rpb24gY3lyYjUzKHN0ciwgc2VlZCA9IDApIHtcbiAgbGV0IGgxID0gMHhkZWFkYmVlZiBeIHNlZWQ7XG4gIGxldCBoMiA9IDB4NDFjNmNlNTcgXiBzZWVkO1xuICBbLi4uc3RyXS5mb3JFYWNoKGMgPT4ge1xuICAgIGNvbnN0IGNoID0gYy5jaGFyQ29kZUF0KCk7XG4gICAgaDEgPSBNYXRoLmltdWwoaDEgXiBjaCwgMjY1NDQzNTc2MSk7XG4gICAgaDIgPSBNYXRoLmltdWwoaDIgXiBjaCwgMTU5NzMzNDY3Nyk7XG4gIH0pO1xuICBoMSA9XG4gICAgTWF0aC5pbXVsKGgxIF4gKGgxID4+PiAxNiksIDIyNDY4MjI1MDcpIF5cbiAgICBNYXRoLmltdWwoaDIgXiAoaDIgPj4+IDEzKSwgMzI2NjQ4OTkwOSk7XG4gIGgyID1cbiAgICBNYXRoLmltdWwoaDIgXiAoaDIgPj4+IDE2KSwgMjI0NjgyMjUwNykgXlxuICAgIE1hdGguaW11bChoMSBeIChoMSA+Pj4gMTMpLCAzMjY2NDg5OTA5KTtcbiAgcmV0dXJuIGAke2gxfSR7aDJ9YDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGlldFVJIHtcbiAgY29uc3RydWN0b3IoY29kZSkge1xuICAgICQoJ3RleHRhcmVhJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uIHNldEF0dHIoKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICdzdHlsZScsXG4gICAgICAgICAgYGhlaWdodDoke3RoaXMuc2Nyb2xsSGVpZ2h0fXB4O292ZXJmbG93LXk6aGlkZGVuO2AsXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLm9uKCdpbnB1dCcsIGFkanVzdEhlaWdodCk7XG5cbiAgICB0aGlzLnBhbGV0dGVTdmcgPSBTbmFwKCcjc3ZnLXBhbGV0dGUnKTtcbiAgICB0aGlzLnBhbGV0dGVSZWN0cyA9IFtdO1xuICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzID0gW107XG4gICAgZm9yIChsZXQgbGlnaHQgPSAwOyBsaWdodCA8IDM7IGxpZ2h0ICs9IDEpIHtcbiAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzLnB1c2goW10pO1xuICAgICAgZm9yIChsZXQgaHVlID0gMDsgaHVlIDwgNjsgaHVlICs9IDEpIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSBsaWdodCAqIDYgKyBodWU7XG4gICAgICAgIGNvbnN0IGN1clJlY3QgPSB0aGlzLnBhbGV0dGVTdmcuZWwoJ3JlY3QnLCB7XG4gICAgICAgICAgd2lkdGg6IDYwLFxuICAgICAgICAgIGhlaWdodDogMzAsXG4gICAgICAgICAgeDogNjAgKiBodWUsXG4gICAgICAgICAgeTogMzAgKiBsaWdodCxcbiAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wYWxldHRlUmVjdHMucHVzaChjdXJSZWN0KTtcbiAgICAgICAgY29uc3QgY3VyQ21kID0gdGhpcy5wYWxldHRlU3ZnXG4gICAgICAgICAgLnRleHQoNjAgKiBodWUgKyAzMCwgMzAgKiBsaWdodCArIDE1LCAnJylcbiAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnbWlkZGxlJyxcbiAgICAgICAgICAgICdkb21pbmFudC1iYXNlbGluZSc6ICdtaWRkbGUnLFxuICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLFxuICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoaHVlID09PSA0ICYmIGxpZ2h0ID49IDEpIHtcbiAgICAgICAgICBjdXJDbWQuYXR0cih7IGZpbGw6ICd3aGl0ZScgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VyQ21kLmF0dHIoeyBmaWxsOiAnYmxhY2snIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzW2xpZ2h0XS5wdXNoKGN1ckNtZCk7XG4gICAgICAgIHRoaXMucGFsZXR0ZVN2Zy5nKGN1clJlY3QsIGN1ckNtZCkuY2xpY2soZSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coY29sb3IpO1xuICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2xvcihjb2xvcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBjb2xvciA9IDE4OyBjb2xvciA8PSAxOTsgY29sb3IgKz0gMSkge1xuICAgICAgY29uc3QgY3VyUmVjdCA9IHRoaXMucGFsZXR0ZVN2Z1xuICAgICAgICAuZWwoJ3JlY3QnLCB7XG4gICAgICAgICAgd2lkdGg6IDE4MCxcbiAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgIHg6IDE4MCAqIChjb2xvciAtIDE4KSxcbiAgICAgICAgICB5OiA5MCxcbiAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICB9KVxuICAgICAgICAuY2xpY2soZSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coY29sb3IpO1xuICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2xvcihjb2xvcik7XG4gICAgICAgIH0pO1xuICAgICAgdGhpcy5wYWxldHRlUmVjdHMucHVzaChjdXJSZWN0KTtcbiAgICB9XG4gICAgdGhpcy5jb2RlU3ZnID0gU25hcCgnI3N2Zy1jb2RlJyk7XG4gICAgdGhpcy5jb2RlID0gbmV3IFBpZXQoY29kZSk7XG4gICAgY29uc3QgY29kZVJlY3QgPSB0aGlzLmNvZGVTdmdcbiAgICAgIC5lbCgncmVjdCcsIHsgd2lkdGg6IDMwLCBoZWlnaHQ6IDMwIH0pXG4gICAgICAudG9EZWZzKCk7XG4gICAgdGhpcy5jb2RlUmVjdHMgPSBbW11dO1xuICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGxldCBwcmV2Um93cyA9IHRoaXMuY29kZVJlY3RzLmxlbmd0aDtcbiAgICAgIGxldCBwcmV2Q29scyA9IHRoaXMuY29kZVJlY3RzWzBdLmxlbmd0aDtcbiAgICAgIHdoaWxlIChwcmV2Q29scyA8IHRoaXMuY29kZS5jb2xzKSB7XG4gICAgICAgIGNvbnN0IGMgPSBwcmV2Q29scztcbiAgICAgICAgdGhpcy5jb2RlUmVjdHMuZm9yRWFjaCgocm93LCByKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3UmVjdCA9IHRoaXMuY29kZVN2Zy51c2UoY29kZVJlY3QpO1xuICAgICAgICAgIG5ld1JlY3QuYXR0cih7XG4gICAgICAgICAgICB4OiAzMCAqIGMsXG4gICAgICAgICAgICB5OiAzMCAqIHIsXG4gICAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1t0aGlzLmNvZGUuY29kZVtyXVtjXV0uY29sb3Jjb2RlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJvdy5wdXNoKG5ld1JlY3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJldkNvbHMgKz0gMTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChwcmV2Q29scyA+IHRoaXMuY29kZS5jb2xzKSB7XG4gICAgICAgIHRoaXMuY29kZVJlY3RzLmZvckVhY2gocm93ID0+IHJvdy5wb3AoKS5yZW1vdmUoKSk7XG4gICAgICAgIHByZXZDb2xzIC09IDE7XG4gICAgICB9XG4gICAgICB3aGlsZSAocHJldlJvd3MgPCB0aGlzLmNvZGUucm93cykge1xuICAgICAgICBjb25zdCByID0gcHJldlJvd3M7XG4gICAgICAgIGNvbnN0IG5ld1JvdyA9IHRoaXMuY29kZS5jb2RlW3JdLm1hcCgoY29sb3IsIGMpID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJSZWN0ID0gdGhpcy5jb2RlU3ZnLnVzZShjb2RlUmVjdCk7XG4gICAgICAgICAgcmV0dXJuIGN1clJlY3QuYXR0cih7XG4gICAgICAgICAgICB4OiAzMCAqIGMsXG4gICAgICAgICAgICB5OiAzMCAqIHIsXG4gICAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb2RlUmVjdHMucHVzaChuZXdSb3cpO1xuICAgICAgICBwcmV2Um93cyArPSAxO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHByZXZSb3dzID4gdGhpcy5jb2RlLnJvd3MpIHtcbiAgICAgICAgdGhpcy5jb2RlUmVjdHMucG9wKCkuZm9yRWFjaChyZWN0ID0+IHJlY3QucmVtb3ZlKCkpO1xuICAgICAgICBwcmV2Um93cyAtPSAxO1xuICAgICAgfVxuICAgICAgdGhpcy5jb2RlUmVjdHMuZm9yRWFjaCgocm93LCByKSA9PiB7XG4gICAgICAgIHJvdy5mb3JFYWNoKChyZWN0LCBjKSA9PiB7XG4gICAgICAgICAgcmVjdC5hdHRyKHsgZmlsbDogUGlldC5jb2xvcnNbdGhpcy5jb2RlLmNvZGVbcl1bY11dLmNvbG9yY29kZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29kZVN2Zy5hdHRyKHtcbiAgICAgICAgd2lkdGg6IDMwICogdGhpcy5jb2RlLmNvbHMgKyA4LFxuICAgICAgICBoZWlnaHQ6IDMwICogdGhpcy5jb2RlLnJvd3MgKyA4LFxuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLmNvZGVSZWN0cy51cGRhdGUoKTtcbiAgICB0aGlzLmVkaXQgPSB7XG4gICAgICBtb2RlOiAnd3JpdGUnLFxuICAgICAgY29sb3I6IDAsXG4gICAgICBzZWxlY3RDb2xvcjogY2xyID0+IHtcbiAgICAgICAgdGhpcy5wYWxldHRlUmVjdHNbY2xyXS5hdHRyKHtcbiAgICAgICAgICBzdHJva2U6ICdncmF5JyxcbiAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogNixcbiAgICAgICAgICB4OiAnKz0zJyxcbiAgICAgICAgICB5OiAnKz0zJyxcbiAgICAgICAgICB3aWR0aDogJy09NicsXG4gICAgICAgICAgaGVpZ2h0OiAnLT02JyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjbHIgPCAxOCkge1xuICAgICAgICAgIGNvbnN0IGN1ckh1ZSA9IGNsciAlIDY7XG4gICAgICAgICAgY29uc3QgY3VyTGlnaHQgPSAoY2xyIC8gNikgfCAwO1xuICAgICAgICAgIGZvciAobGV0IGxpZ2h0T2ZmID0gMDsgbGlnaHRPZmYgPCAzOyBsaWdodE9mZiArPSAxKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBodWVPZmYgPSAwOyBodWVPZmYgPCA2OyBodWVPZmYgKz0gMSkge1xuICAgICAgICAgICAgICBjb25zdCBzID0gUGlldC5jb21tYW5kVGV4dFtsaWdodE9mZl1baHVlT2ZmXTtcbiAgICAgICAgICAgICAgY29uc3QgbmV4dEh1ZSA9IChjdXJIdWUgKyBodWVPZmYpICUgNjtcbiAgICAgICAgICAgICAgY29uc3QgbmV4dExpZ2h0ID0gKGN1ckxpZ2h0ICsgbGlnaHRPZmYpICUgMztcbiAgICAgICAgICAgICAgdGhpcy5wYWxldHRlT3ZlcmxheXNbbmV4dExpZ2h0XVtuZXh0SHVlXS5ub2RlLnRleHRDb250ZW50ID0gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgbGlnaHQgPSAwOyBsaWdodCA8IDM7IGxpZ2h0ICs9IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGh1ZSA9IDA7IGh1ZSA8IDY7IGh1ZSArPSAxKSB7XG4gICAgICAgICAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzW2xpZ2h0XVtodWVdLm5vZGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1bnNlbGVjdENvbG9yOiBjbHIgPT4ge1xuICAgICAgICB0aGlzLnBhbGV0dGVSZWN0c1tjbHJdLmF0dHIoe1xuICAgICAgICAgIHN0cm9rZTogdW5kZWZpbmVkLFxuICAgICAgICAgICdzdHJva2Utd2lkdGgnOiB1bmRlZmluZWQsXG4gICAgICAgICAgeDogJy09MycsXG4gICAgICAgICAgeTogJy09MycsXG4gICAgICAgICAgd2lkdGg6ICcrPTYnLFxuICAgICAgICAgIGhlaWdodDogJys9NicsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZUNvbG9yOiBjbHIgPT4ge1xuICAgICAgICBjb25zdCBwcmV2Q29sb3IgPSB0aGlzLmVkaXQuY29sb3I7XG4gICAgICAgIHRoaXMuZWRpdC5jb2xvciA9IGNscjtcbiAgICAgICAgdGhpcy5lZGl0LnVuc2VsZWN0Q29sb3IocHJldkNvbG9yKTtcbiAgICAgICAgdGhpcy5lZGl0LnNlbGVjdENvbG9yKGNscik7XG4gICAgICB9LFxuICAgICAgdXBkYXRlQ29kZUNvbG9yMTogKHIsIGMsIGNscikgPT4ge1xuICAgICAgICB0aGlzLmNvZGUuY29kZVtyXVtjXSA9IGNscjtcbiAgICAgICAgdGhpcy5jb2RlUmVjdHNbcl1bY10uYXR0cih7IGZpbGw6IFBpZXQuY29sb3JzW2Nscl0uY29sb3Jjb2RlIH0pO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHRoaXMuZWRpdC5zZWxlY3RDb2xvcigwKTtcblxuICAgIFsnbCcsICd1JywgJ3InLCAnZCddLmZvckVhY2goZGlyZWN0aW9uID0+IHtcbiAgICAgIFsncGx1cycsICdtaW51cyddLmZvckVhY2goYWN0aW9uID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBgI2dyaWQtJHtkaXJlY3Rpb259JHthY3Rpb259YDtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gJChpZCk7XG4gICAgICAgIGJ1dHRvbi5vbignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoYWN0aW9uID09PSAncGx1cycpIHtcbiAgICAgICAgICAgIHRoaXMuY29kZS5leHRlbmRDb2RlKGRpcmVjdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29kZS5zaHJpbmtDb2RlKGRpcmVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgd3JpdGVCdXR0b24gPSAkKCcjZ3JpZC13cml0ZScpO1xuICAgIGNvbnN0IHBpY2tCdXR0b24gPSAkKCcjZ3JpZC1waWNrJyk7XG4gICAgd3JpdGVCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb2RlU3ZnLnVuY2xpY2soKTtcbiAgICAgIHRoaXMuY29kZVN2Zy5kcmFnKFxuICAgICAgICAoZHgsIGR5LCB4LCB5LCBlKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VyUiA9ICgoZS5vZmZzZXRZIC0gMykgLyAzMCkgfCAwO1xuICAgICAgICAgIGNvbnN0IGN1ckMgPSAoKGUub2Zmc2V0WCAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJSID49IDAgJiZcbiAgICAgICAgICAgIGN1clIgPCB0aGlzLmNvZGUucm93cyAmJlxuICAgICAgICAgICAgY3VyQyA+PSAwICYmXG4gICAgICAgICAgICBjdXJDIDwgdGhpcy5jb2RlLmNvbHNcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2RlQ29sb3IxKGN1clIsIGN1ckMsIHRoaXMuZWRpdC5jb2xvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoeCwgeSwgZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGN1clIgPSAoKGUub2Zmc2V0WSAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgICBjb25zdCBjdXJDID0gKChlLm9mZnNldFggLSAzKSAvIDMwKSB8IDA7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VyUiA+PSAwICYmXG4gICAgICAgICAgICBjdXJSIDwgdGhpcy5jb2RlLnJvd3MgJiZcbiAgICAgICAgICAgIGN1ckMgPj0gMCAmJlxuICAgICAgICAgICAgY3VyQyA8IHRoaXMuY29kZS5jb2xzXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXQudXBkYXRlQ29kZUNvbG9yMShjdXJSLCBjdXJDLCB0aGlzLmVkaXQuY29sb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge30sXG4gICAgICApO1xuICAgIH0pO1xuICAgIHBpY2tCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb2RlU3ZnLnVuZHJhZygpO1xuICAgICAgdGhpcy5jb2RlU3ZnLmNsaWNrKGUgPT4ge1xuICAgICAgICBjb25zdCBjdXJSID0gKChlLm9mZnNldFkgLSAzKSAvIDMwKSB8IDA7XG4gICAgICAgIGNvbnN0IGN1ckMgPSAoKGUub2Zmc2V0WCAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGN1clIgPj0gMCAmJlxuICAgICAgICAgIGN1clIgPCB0aGlzLmNvZGUucm93cyAmJlxuICAgICAgICAgIGN1ckMgPj0gMCAmJlxuICAgICAgICAgIGN1ckMgPCB0aGlzLmNvZGUuY29sc1xuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmVkaXQudXBkYXRlQ29sb3IodGhpcy5jb2RlLmNvZGVbY3VyUl1bY3VyQ10pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB3cml0ZUJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuICAgICQoJyNuYXYtZWRpdC10YWInKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB3cml0ZUJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgY29uc29sZS5sb2coJ3RyaWcxJyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmV4cG9ydCA9IHtcbiAgICAgIHBuZ0J1dHRvbjogJCgnI2V4cG9ydC1wbmcnKSxcbiAgICAgIHN2Z0J1dHRvbjogJCgnI2V4cG9ydC1zdmcnKSxcbiAgICAgIGFzY2lpR3JpZDogJCgnI2V4cG9ydC1hc2NpaS1ncmlkJyksXG4gICAgICBhc2NpaU1pbmk6ICQoJyNleHBvcnQtYXNjaWktbWluaScpLFxuICAgICAgc2hhcmVDb250ZW50OiAkKCcjc2hhcmUtY29udGVudCcpLFxuICAgICAgcGVybUJ1dHRvbjogJCgnI2V4cG9ydC1wZXJtJyksXG4gICAgICBnb2xmQnV0dG9uOiAkKCcjZXhwb3J0LWdvbGYnKSxcbiAgICAgIHVwZGF0ZUV4cG9ydExpbms6ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSB0aGlzLmNvZGU7XG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuY29kZS5jb2RlO1xuICAgICAgICBjb25zdCBjYW52YXMgPSAkKCc8Y2FudmFzLz4nKTtcbiAgICAgICAgY2FudmFzLnByb3AoeyB3aWR0aDogY29scywgaGVpZ2h0OiByb3dzIH0pO1xuICAgICAgICBjb25zdCBjYW52YXNFbCA9IGNhbnZhcy5nZXQoMCk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhc0VsLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGNvbnN0IGltZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY29scywgcm93cyk7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgcm93czsgciArPSAxKSB7XG4gICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb2xzOyBjICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IChyICogY29scyArIGMpICogNDtcbiAgICAgICAgICAgIGNvbnN0IHsgY29sb3J2ZWMgfSA9IFBpZXQuY29sb3JzW21hdHJpeFtyXVtjXV07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgICBpbWRhdGEuZGF0YVtpZHggKyBpXSA9IGNvbG9ydmVjW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKGltZGF0YSwgMCwgMCk7XG4gICAgICAgIGNhbnZhc0VsLnRvQmxvYihibG9iID0+IHtcbiAgICAgICAgICBjb25zdCBwbmdVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgIHRoaXMuZXhwb3J0LnBuZ0J1dHRvbi5wcm9wKHsgaHJlZjogcG5nVXJsIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gY29uc3QgcG5nVXJsID0gY2FudmFzRWwudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcbiAgICAgICAgLy8gdGhpcy5leHBvcnQucG5nQnV0dG9uLnByb3AoeyBocmVmOiBwbmdVcmwgfSk7XG4gICAgICAgIGNvbnN0IHN2Z1N0ciA9IHRoaXMuY29kZVN2Z1xuICAgICAgICAgIC5vdXRlclNWRygpXG4gICAgICAgICAgLnJlcGxhY2UoJzxzdmcnLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCInKTtcbiAgICAgICAgY29uc3Qgc3ZnQmxvYiA9IG5ldyBCbG9iKFtzdmdTdHJdKTtcbiAgICAgICAgY29uc3Qgc3ZnVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdmdCbG9iKTtcbiAgICAgICAgdGhpcy5leHBvcnQuc3ZnQnV0dG9uLnByb3AoeyBocmVmOiBzdmdVcmwgfSk7XG4gICAgICB9LFxuICAgIH07XG4gICAgJCgnI25hdi1zaGFyZS10YWInKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmV4cG9ydC51cGRhdGVFeHBvcnRMaW5rKCk7XG4gICAgfSk7XG4gICAgdGhpcy5leHBvcnQuYXNjaWlHcmlkLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFwID0gdGhpcy5jb2RlLnRvQXNjaWlQaWV0KGZhbHNlKTtcbiAgICAgIHRoaXMuZXhwb3J0LnNoYXJlQ29udGVudC52YWwoYXApO1xuICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwodGhpcy5leHBvcnQuc2hhcmVDb250ZW50LmdldCgwKSk7XG4gICAgfSk7XG4gICAgdGhpcy5leHBvcnQuYXNjaWlNaW5pLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGFwID0gdGhpcy5jb2RlLnRvQXNjaWlQaWV0KHRydWUpO1xuICAgICAgdGhpcy5leHBvcnQuc2hhcmVDb250ZW50LnZhbChhcCk7XG4gICAgICBhZGp1c3RIZWlnaHQuY2FsbCh0aGlzLmV4cG9ydC5zaGFyZUNvbnRlbnQuZ2V0KDApKTtcbiAgICB9KTtcbiAgICBjb25zdCBnZXRQZXJtYWxpbmsgPSAoKSA9PiB7XG4gICAgICAvLyBjb2RlLCBzZXAsIGxpbSwgaW5wdXQsIGVzY1xuICAgICAgY29uc3QgZXhwb3J0T2JqID0ge1xuICAgICAgICBjb2RlOiB0aGlzLmNvZGUuY29kZSxcbiAgICAgICAgc2VwOiAkKCcjdGVzdC1zZXAnKS52YWwoKSxcbiAgICAgICAgbGltOiAkKCcjdGVzdC1saW1pdCcpLnZhbCgpLFxuICAgICAgICBlc2M6ICQoJyN0ZXN0LWVzY2FwZScpLnByb3AoJ2NoZWNrZWQnKSxcbiAgICAgICAgaW5wdXQ6ICQoJyN0ZXN0LWlucHV0JykudmFsKCksXG4gICAgICB9O1xuICAgICAgdGhpcy5leHBvcnQuc2hhcmVDb250ZW50LnZhbChKU09OLnN0cmluZ2lmeShleHBvcnRPYmopKTtcbiAgICAgIGNvbnN0IGNvbXByZXNzZWQgPSBwYWtvLmRlZmxhdGUoSlNPTi5zdHJpbmdpZnkoZXhwb3J0T2JqKSk7XG4gICAgICBjb25zdCBiNjQgPSBCYXNlNjQuZnJvbVVpbnQ4QXJyYXkoY29tcHJlc3NlZCwgdHJ1ZSk7XG4gICAgICByZXR1cm4gYCR7ZG9jdW1lbnQuVVJMLnNwbGl0KCcjJylbMF19IyR7YjY0fWA7XG4gICAgfTtcbiAgICB0aGlzLmV4cG9ydC5wZXJtQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHBlcm1hbGluayA9IGdldFBlcm1hbGluaygpO1xuICAgICAgdGhpcy5leHBvcnQuc2hhcmVDb250ZW50LnZhbChwZXJtYWxpbmspO1xuICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwodGhpcy5leHBvcnQuc2hhcmVDb250ZW50LmdldCgwKSk7XG4gICAgfSk7XG4gICAgdGhpcy5leHBvcnQuZ29sZkJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBhc2NpaVBpZXQgPSB0aGlzLmNvZGUudG9Bc2NpaVBpZXQodHJ1ZSk7XG4gICAgICBjb25zdCBieXRlcyA9IGFzY2lpUGlldC5sZW5ndGg7XG4gICAgICBjb25zdCBjb2RlbHMgPSB0aGlzLmNvZGUucm93cyAqIHRoaXMuY29kZS5jb2xzO1xuICAgICAgY29uc3QgcGVybWFsaW5rID0gZ2V0UGVybWFsaW5rKCk7XG4gICAgICBjb25zdCBoYXNoID0gY3lyYjUzKHBlcm1hbGluayk7XG4gICAgICBjb25zdCBwb3N0SGVhZGVyID0gYCMgW1BpZXRdICsgW2FzY2lpLXBpZXRdLCAke2J5dGVzfSBieXRlcyAoJHt0aGlzLmNvZGUucm93c31cXHhkNyR7dGhpcy5jb2RlLmNvbHN9PSR7Y29kZWxzfSBjb2RlbHMpYDtcbiAgICAgIGNvbnN0IHBvc3RNYWluID0gWydgYGBub25lJywgYXNjaWlQaWV0LCAnYGBgJ10uam9pbignXFxuJyk7XG4gICAgICBjb25zdCBwb3N0Rm9vdGVyID0gYFtUcnkgUGlldCBvbmxpbmUhXVtwaWV0LSR7aGFzaH1dYDtcbiAgICAgIGNvbnN0IGxpbmtzID0gW1xuICAgICAgICAnW1BpZXRdOiBodHRwczovL3d3dy5kYW5nZXJtb3VzZS5uZXQvZXNvdGVyaWMvcGlldC5odG1sJyxcbiAgICAgICAgJ1thc2NpaS1waWV0XTogaHR0cHM6Ly9naXRodWIuY29tL2Rsb3NjdXRvZmYvYXNjaWktcGlldCcsXG4gICAgICAgIGBbcGlldC0ke2hhc2h9XTogJHtwZXJtYWxpbmt9YCxcbiAgICAgIF0uam9pbignXFxuJyk7XG4gICAgICBjb25zdCBwb3N0ID0gW3Bvc3RIZWFkZXIsIHBvc3RNYWluLCBwb3N0Rm9vdGVyLCBsaW5rc10uam9pbignXFxuXFxuJyk7XG4gICAgICB0aGlzLmV4cG9ydC5zaGFyZUNvbnRlbnQudmFsKHBvc3QpO1xuICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwodGhpcy5leHBvcnQuc2hhcmVDb250ZW50LmdldCgwKSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmltcG9ydCA9IHtcbiAgICAgIGZpbGVCdXR0b246ICQoJyNpbXBvcnQtZmlsZScpLFxuICAgICAgZmlsZUlucHV0QnV0dG9uOiAkKCcjaW1wb3J0LWZpbGUtaW5wdXQnKSxcbiAgICAgIGFzY2lpQnV0dG9uOiAkKCcjaW1wb3J0LWFzY2lpJyksXG4gICAgICBhc2NpaVRleHQ6ICQoJyNzaGFyZS1jb250ZW50JyksXG4gICAgfTtcbiAgICB0aGlzLmltcG9ydC5hc2NpaUJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBhc2NpaSA9IHRoaXMuaW1wb3J0LmFzY2lpVGV4dC52YWwoKTtcbiAgICAgIGNvbnN0IGNvZGVHcmlkID0gUGlldC5mcm9tQXNjaWlQaWV0KGFzY2lpKTtcbiAgICAgIGNvbnNvbGUubG9nKGNvZGVHcmlkKTtcbiAgICAgIHRoaXMuY29kZS5yZXBsYWNlQ29kZShjb2RlR3JpZCk7XG4gICAgICB0aGlzLmNvZGVSZWN0cy51cGRhdGUoKTtcbiAgICAgIHRoaXMuZXhwb3J0LnVwZGF0ZUV4cG9ydExpbmsoKTtcbiAgICB9KTtcbiAgICB0aGlzLmltcG9ydC5maWxlQnV0dG9uLm9uKCdjbGljaycsICgpID0+XG4gICAgICB0aGlzLmltcG9ydC5maWxlSW5wdXRCdXR0b24udHJpZ2dlcignY2xpY2snKSxcbiAgICApO1xuICAgIHRoaXMuaW1wb3J0LmZpbGVJbnB1dEJ1dHRvbi5vbignY2hhbmdlJywgZSA9PiB7XG4gICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07XG4gICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIGxldCB3aWR0aCA9IGltZy5uYXR1cmFsV2lkdGg7XG4gICAgICAgIGxldCBoZWlnaHQgPSBpbWcubmF0dXJhbEhlaWdodDtcbiAgICAgICAgY29uc3QgY2FudmFzID0gJCgnPGNhbnZhcy8+Jyk7XG4gICAgICAgIGNhbnZhcy5wcm9wKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgICAgY29uc3QgY2FudmFzRWwgPSBjYW52YXMuZ2V0KDApO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXNFbC5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgICAgIGNvbnN0IGltZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGNvbnN0IGNvZGVHcmlkID0gW107XG4gICAgICAgIGlmICh3aWR0aCA9PT0gMCB8fCBoZWlnaHQgPT09IDApIHtcbiAgICAgICAgICBjb2RlR3JpZC5wdXNoKFsxOV0pOyAvLyBmYWxsYmFjayB0byBzaW5nbGUgYmxhY2sgY2VsbFxuICAgICAgICAgIHdpZHRoID0gMTtcbiAgICAgICAgICBoZWlnaHQgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgaGVpZ2h0OyByICs9IDEpIHtcbiAgICAgICAgICAgIGNvZGVHcmlkLnB1c2goW10pO1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB3aWR0aDsgYyArPSAxKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHIgKiB3aWR0aCAqIDQgKyBjICogNDtcbiAgICAgICAgICAgICAgY29uc3QgY29sb3IgPVxuICAgICAgICAgICAgICAgIFBpZXQuY29sb3J2ZWMyY29sb3JbaW1kYXRhLmRhdGEuc2xpY2UoaWR4LCBpZHggKyA0KV0gPz8gMTk7XG4gICAgICAgICAgICAgIGNvZGVHcmlkW3JdLnB1c2goY29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb2RlR3JpZDIgPSBQaWV0LmNvbXByZXNzKGNvZGVHcmlkLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5jb2RlLnJlcGxhY2VDb2RlKGNvZGVHcmlkMik7XG4gICAgICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmV4cG9ydC51cGRhdGVFeHBvcnRMaW5rKCk7XG4gICAgICB9O1xuICAgICAgaW1nLnNyYyA9IHVybDtcbiAgICAgIGUudGFyZ2V0LnZhbHVlID0gJyc7XG4gICAgfSk7XG5cbiAgICAkKCcjbmF2LWRlYnVnLXRhYicpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGVHcmlkID0gdGhpcy5jb2RlLmNvZGU7XG4gICAgICBjb25zdCBzdGFydEVsID0gJCgnI2RlYnVnLXN0YXJ0Jyk7XG4gICAgICBjb25zdCBzdGVwRWwgPSAkKCcjZGVidWctc3RlcCcpO1xuICAgICAgY29uc3QgcmVzZXRFbCA9ICQoJyNkZWJ1Zy1yZXNldCcpO1xuICAgICAgY29uc3QgaW5wdXRFbCA9ICQoJyNkZWJ1Zy1pbnB1dCcpO1xuICAgICAgY29uc3Qgb3V0cHV0RWwgPSAkKCcjZGVidWctb3V0cHV0Jyk7XG4gICAgICBjb25zdCBzdGFja0VsID0gJCgnI2RlYnVnLXN0YWNrJyk7XG4gICAgICBjb25zdCBzdGF0dXNFbCA9ICQoJyNkZWJ1Zy1zdGF0dXMnKTtcbiAgICAgIGNvbnN0IGRwRWwgPSAkKCcjZGVidWctZHAnKTtcbiAgICAgIGNvbnN0IGNjRWwgPSAkKCcjZGVidWctY2MnKTtcbiAgICAgIGNvbnN0IGNtZEVsID0gJCgnI2RlYnVnLWNtZCcpO1xuICAgICAgY29uc3Qgc3BlZWRFbCA9ICQoJyNkZWJ1Zy1zcGVlZCcpO1xuICAgICAgY29uc3QgcnVuRWwgPSAkKCcjZGVidWctcnVuJyk7XG4gICAgICBjb25zdCBwYXVzZUVsID0gJCgnI2RlYnVnLXBhdXNlJyk7XG4gICAgICBzdGFydEVsLm9mZignY2xpY2snKTtcbiAgICAgIHN0ZXBFbC5vZmYoJ2NsaWNrJyk7XG4gICAgICByZXNldEVsLm9mZignY2xpY2snKTtcbiAgICAgIHJ1bkVsLm9mZignY2xpY2snKTtcbiAgICAgIHBhdXNlRWwub2ZmKCdjbGljaycpO1xuICAgICAgbGV0IGFuaW1hdGlvbklkO1xuICAgICAgbGV0IGFuaW1hdGlvblN0YXJ0VGltZTtcbiAgICAgIGxldCBhbmltYXRpb25TcGVlZDtcbiAgICAgIGxldCBhbmltYXRpb25TdGVwcztcbiAgICAgIGxldCBvcmlnSW5wdXQ7XG4gICAgICBsZXQgYXJyb3dFbDtcbiAgICAgIGNvbnN0IHVwZGF0ZVVpID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGRwLCBjYywgaW5wdXQsIG91dHB1dCwgc3RhY2ssIGxhc3RDbWQgfSA9IHRoaXMucnVubmVyO1xuICAgICAgICBjb25zdCBkcERlc2MgPSBQaWV0UnVuLmRwVGV4dFtkcF07XG4gICAgICAgIGNvbnN0IGNjRGVzYyA9IFBpZXRSdW4uY2NUZXh0W2RwICogMiArIGNjXTtcbiAgICAgICAgZHBFbC50ZXh0KGAke2RwfSAoJHtkcERlc2N9KWApO1xuICAgICAgICBjY0VsLnRleHQoYCR7Y2N9ICgke2NjRGVzY30pYCk7XG4gICAgICAgIGlucHV0RWwudmFsKGlucHV0KTtcbiAgICAgICAgb3V0cHV0RWwudmFsKG91dHB1dCk7XG4gICAgICAgIGNvbnN0IHN0YWNrU3RyID0gc3RhY2subWFwKG4gPT4gbi50b1N0cmluZygpKS5qb2luKCcgJyk7XG4gICAgICAgIHN0YWNrRWwudmFsKHN0YWNrU3RyKTtcbiAgICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwoaW5wdXRFbC5nZXQoMCkpO1xuICAgICAgICBhZGp1c3RIZWlnaHQuY2FsbChvdXRwdXRFbC5nZXQoMCkpO1xuICAgICAgICBhZGp1c3RIZWlnaHQuY2FsbChzdGFja0VsLmdldCgwKSk7XG4gICAgICAgIGNtZEVsLnRleHQobGFzdENtZCk7XG4gICAgICB9O1xuICAgICAgc3RhcnRFbC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIG91dHB1dEVsLnZhbCgnJyk7XG4gICAgICAgIGFkanVzdEhlaWdodC5jYWxsKG91dHB1dEVsLmdldCgwKSk7XG4gICAgICAgIGlmIChjb2RlR3JpZFswXVswXSA9PT0gMTkpIHtcbiAgICAgICAgICBzdGF0dXNFbC50ZXh0KCdFcnJvcjogU3RhcnRpbmcgYmxhY2sgY2VsbCBkZXRlY3RlZCcpO1xuICAgICAgICAgIGRwRWwudGV4dCgnTi9BJyk7XG4gICAgICAgICAgY2NFbC50ZXh0KCdOL0EnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcmlnSW5wdXQgPSBpbnB1dEVsLnZhbCgpO1xuICAgICAgICAgIHRoaXMucnVubmVyID0gbmV3IFBpZXRSdW4oY29kZUdyaWQsIG9yaWdJbnB1dCk7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5ydW5uZXIpO1xuICAgICAgICAgIHN0YXJ0RWwucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICBzdGVwRWwucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgcmVzZXRFbC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgICBydW5FbC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgICBpbnB1dEVsLnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSk7XG4gICAgICAgICAgc3RhdHVzRWwudGV4dCgnUnVubmluZycpO1xuICAgICAgICAgIHVwZGF0ZVVpKCk7XG4gICAgICAgICAgYXJyb3dFbCA9IHRoaXMuY29kZVN2Zy5wb2x5Z29uKDIwLCA1LCAyMCwgMjUsIDMwLCAxNSk7XG4gICAgICAgICAgYXJyb3dFbC5hdHRyKHsgZmlsbDogJ2dyYXknIH0pO1xuICAgICAgICAgIGNvbnN0IG1hdCA9IFNuYXAubWF0cml4KCkudHJhbnNsYXRlKFxuICAgICAgICAgICAgdGhpcy5ydW5uZXIuY3VyQyAqIDMwLFxuICAgICAgICAgICAgdGhpcy5ydW5uZXIuY3VyUiAqIDMwLFxuICAgICAgICAgICk7XG4gICAgICAgICAgYXJyb3dFbC50cmFuc2Zvcm0obWF0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBzdGVwRWwub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnc3RlcCcpO1xuICAgICAgICBzdGF0dXNFbC50ZXh0KCdSdW5uaW5nJyk7XG4gICAgICAgIHRoaXMucnVubmVyLnN0ZXAoKTtcbiAgICAgICAgdXBkYXRlVWkoKTtcbiAgICAgICAgY29uc3QgbWF0ID0gU25hcC5tYXRyaXgoKVxuICAgICAgICAgIC50cmFuc2xhdGUodGhpcy5ydW5uZXIuY3VyQyAqIDMwLCB0aGlzLnJ1bm5lci5jdXJSICogMzApXG4gICAgICAgICAgLnJvdGF0ZSh0aGlzLnJ1bm5lci5kcCAqIDkwLCAxNSwgMTUpO1xuICAgICAgICBhcnJvd0VsLnRyYW5zZm9ybShtYXQpO1xuICAgICAgICBpZiAodGhpcy5ydW5uZXIuZmluaXNoZWQpIHtcbiAgICAgICAgICBzdGVwRWwucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICBzdGF0dXNFbC50ZXh0KCdGaW5pc2hlZCcpO1xuICAgICAgICAgIGFycm93RWwucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcnVuRWwub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBhbmltYXRpb25TcGVlZCA9IE51bWJlcihzcGVlZEVsLnZhbCgpKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIE51bWJlci5pc1NhZmVJbnRlZ2VyKGFuaW1hdGlvblNwZWVkKSAmJlxuICAgICAgICAgIGFuaW1hdGlvblNwZWVkID4gMCAmJlxuICAgICAgICAgIGFuaW1hdGlvblNwZWVkIDw9IDEwMFxuICAgICAgICApIHtcbiAgICAgICAgICBydW5FbC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgIHBhdXNlRWwucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgc3RlcEVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgc3RhdHVzRWwudGV4dCgnUnVubmluZycpO1xuICAgICAgICAgIGFuaW1hdGlvblN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgIGFuaW1hdGlvblN0ZXBzID0gMDtcbiAgICAgICAgICBjb25zdCB1cGRhdGVGcmFtZSA9IHRpbWUgPT4ge1xuICAgICAgICAgICAgYW5pbWF0aW9uSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlRnJhbWUpO1xuICAgICAgICAgICAgY29uc3QgdGltZUVsYXBzZWQgPSB0aW1lIC0gYW5pbWF0aW9uU3RhcnRUaW1lO1xuICAgICAgICAgICAgY29uc3QgbmV4dFN0ZXBzID0gTWF0aC5jZWlsKChhbmltYXRpb25TcGVlZCAqIHRpbWVFbGFwc2VkKSAvIDEwMDApO1xuICAgICAgICAgICAgZm9yICg7IGFuaW1hdGlvblN0ZXBzIDwgbmV4dFN0ZXBzOyBhbmltYXRpb25TdGVwcyArPSAxKSB7XG4gICAgICAgICAgICAgIHN0ZXBFbC50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICBpZiAodGhpcy5ydW5uZXIuZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICBwYXVzZUVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uSWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgYW5pbWF0aW9uSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlRnJhbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkIHNwZWVkIHZhbHVlJyk7XG4gICAgICAgICAgc3RhdHVzRWwudGV4dCgnSW52YWxpZCBzcGVlZCB2YWx1ZS4gQWxsb3dlZCB2YWx1ZXM6IDEgLSAxMDAnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBwYXVzZUVsLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcnVuRWwucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIHBhdXNlRWwucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgc3RlcEVsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25JZCk7XG4gICAgICB9KTtcbiAgICAgIHJlc2V0RWwub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygncmVzZXQnKTtcbiAgICAgICAgc3RhcnRFbC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgc3RlcEVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIHJlc2V0RWwucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgaW5wdXRFbC5wcm9wKCdyZWFkb25seScsIGZhbHNlKTtcbiAgICAgICAgaW5wdXRFbC52YWwob3JpZ0lucHV0KTtcbiAgICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwoaW5wdXRFbC5nZXQoMCkpO1xuICAgICAgICBzdGF0dXNFbC50ZXh0KCdOL0EnKTtcbiAgICAgICAgZHBFbC50ZXh0KCdOL0EnKTtcbiAgICAgICAgY2NFbC50ZXh0KCdOL0EnKTtcbiAgICAgICAgY21kRWwudGV4dCgnTi9BJyk7XG4gICAgICAgIGlmIChhcnJvd0VsICE9PSB1bmRlZmluZWQpIGFycm93RWwucmVtb3ZlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAkKCcjbmF2LWVkaXQtdGFiLCAjbmF2LXRlc3QtdGFiLCAjbmF2LWV4cGxhaW4tdGFiLCAjbmF2LXNoYXJlLXRhYicpLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgJCgnI2RlYnVnLXJlc2V0JykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3RyaWcyJyk7XG4gICAgICB9LFxuICAgICk7XG5cbiAgICAkKCcjbmF2LXRlc3QtdGFiJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VwRWwgPSAkKCcjdGVzdC1zZXAnKTtcbiAgICAgIGNvbnN0IGxpbWl0RWwgPSAkKCcjdGVzdC1saW1pdCcpO1xuICAgICAgY29uc3QgcnVuRWwgPSAkKCcjdGVzdC1ydW4nKTtcbiAgICAgIGNvbnN0IHN0b3BFbCA9ICQoJyN0ZXN0LXN0b3AnKTtcbiAgICAgIGNvbnN0IGVzY2FwZUVsID0gJCgnI3Rlc3QtZXNjYXBlJyk7XG4gICAgICBjb25zdCBzdGF0dXNFbCA9ICQoJyN0ZXN0LXN0YXR1cycpO1xuICAgICAgY29uc3QgaW5wdXRFbCA9ICQoJyN0ZXN0LWlucHV0Jyk7XG4gICAgICBjb25zdCBvdXRwdXRFbCA9ICQoJyN0ZXN0LW91dHB1dCcpO1xuXG4gICAgICBydW5FbC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlcCA9IHNlcEVsLnZhbCgpID09PSAnJyA/ICctLS0nIDogc2VwRWwudmFsKCk7XG4gICAgICAgIHNlcEVsLnZhbChzZXApO1xuICAgICAgICBjb25zdCBsaW1pdFZhbCA9IE51bWJlcihsaW1pdEVsLnZhbCgpKTtcbiAgICAgICAgY29uc3QgbGltaXQgPVxuICAgICAgICAgIE51bWJlci5pc1NhZmVJbnRlZ2VyKGxpbWl0VmFsKSAmJiBsaW1pdFZhbCA+IDAgPyBsaW1pdFZhbCA6IDEwMDAwO1xuICAgICAgICBsaW1pdEVsLnZhbChsaW1pdCk7XG4gICAgICAgIHJ1bkVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIHN0b3BFbC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgaW5wdXRFbC5wcm9wKCdyZWFkb25seScsIHRydWUpO1xuICAgICAgICBjb25zdCBkb0VzY2FwZSA9IGVzY2FwZUVsLnByb3AoJ2NoZWNrZWQnKTtcbiAgICAgICAgbGV0IGlucHV0cyA9IGlucHV0RWwudmFsKCkuc3BsaXQoYFxcbiR7c2VwfVxcbmApO1xuICAgICAgICBpZiAoZG9Fc2NhcGUpIHtcbiAgICAgICAgICBpbnB1dHMgPSBpbnB1dHMubWFwKHMgPT5cbiAgICAgICAgICAgIHMucmVwbGFjZShcbiAgICAgICAgICAgICAgL1xcXFxbMCdcIlxcXFxucnZ0YmZdfFxcXFx1WzAtOWEtZkEtRl17NH18XFxcXHVcXHtbMC05YS1mQS1GXStcXH18XFxcXHhbMC05YS1mQS1GXXsyfS9nLFxuICAgICAgICAgICAgICBtYXRjaCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoLnN0YXJ0c1dpdGgoJ1xcXFx1JykgfHwgbWF0Y2guc3RhcnRzV2l0aCgnXFxcXHgnKSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgaGV4ID0gbWF0Y2guc3RhcnRzV2l0aCgnXFxcXHV7JylcbiAgICAgICAgICAgICAgICAgICAgPyBtYXRjaC5zbGljZSgzLCAtMSlcbiAgICAgICAgICAgICAgICAgICAgOiBtYXRjaC5zbGljZSgyKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChOdW1iZXIucGFyc2VJbnQoaGV4LCAxNikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgJ1xcXFwwJzogJ1xcMCcsXG4gICAgICAgICAgICAgICAgICBcIlxcXFwnXCI6IFwiJ1wiLFxuICAgICAgICAgICAgICAgICAgJ1xcXFxcIic6ICdcIicsXG4gICAgICAgICAgICAgICAgICAnXFxcXFxcXFwnOiAnXFxcXCcsXG4gICAgICAgICAgICAgICAgICAnXFxcXG4nOiAnXFxuJyxcbiAgICAgICAgICAgICAgICAgICdcXFxccic6ICdcXHInLFxuICAgICAgICAgICAgICAgICAgJ1xcXFx2JzogJ1xcdicsXG4gICAgICAgICAgICAgICAgICAnXFxcXHQnOiAnXFx0JyxcbiAgICAgICAgICAgICAgICAgICdcXFxcYic6ICdcXGInLFxuICAgICAgICAgICAgICAgICAgJ1xcXFxmJzogJ1xcZicsXG4gICAgICAgICAgICAgICAgfVttYXRjaF07XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmVycyA9IGlucHV0cy5tYXAoaW5wdXQgPT4gbmV3IFBpZXRSdW4odGhpcy5jb2RlLmNvZGUsIGlucHV0KSk7XG4gICAgICAgIGNvbnN0IHN0ZXBzUGVyUnVubmVyID0gcnVubmVycy5tYXAoKCkgPT4gMCk7XG4gICAgICAgIGxldCBhbGl2ZSA9IHJ1bm5lcnMubGVuZ3RoO1xuICAgICAgICBjb25zdCBzdGVwcyA9IDEwOyAvLyBzdGVwcyBwZXIgbXNcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIGxldCBzdGVwc1J1biA9IDA7XG4gICAgICAgIGxldCBydW5JZDtcbiAgICAgICAgc3RhdHVzRWwudGV4dCgnUnVubmluZycpO1xuICAgICAgICBjb25zdCB1cGRhdGUgPSB0aW1lID0+IHtcbiAgICAgICAgICBpZiAoYWxpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHN0b3BFbC50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBydW5JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xuICAgICAgICAgIGNvbnN0IHRvdGFsU3RlcHMgPSBNYXRoLmNlaWwoc3RlcHMgKiAodGltZSAtIHN0YXJ0VGltZSkpO1xuICAgICAgICAgIGNvbnN0IHNpbmdsZVN0ZXBzID0gTWF0aC5yb3VuZCgodG90YWxTdGVwcyAtIHN0ZXBzUnVuKSAvIGFsaXZlKTtcbiAgICAgICAgICBydW5uZXJzLmZvckVhY2goKHJ1bm5lciwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5lci5maW5pc2hlZCkgcmV0dXJuO1xuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzaW5nbGVTdGVwczsgcyArPSAxKSB7XG4gICAgICAgICAgICAgIHJ1bm5lci5zdGVwKCk7XG4gICAgICAgICAgICAgIHN0ZXBzUnVuICs9IDE7XG4gICAgICAgICAgICAgIHN0ZXBzUGVyUnVubmVyW2ldICs9IDE7XG4gICAgICAgICAgICAgIGlmIChzdGVwc1BlclJ1bm5lcltpXSA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgIHJ1bm5lci5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHJ1bm5lci5maW5pc2hlZCkge1xuICAgICAgICAgICAgICAgIGFsaXZlIC09IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgc3RvcEVsLm9uZSgnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocnVuSWQpO1xuICAgICAgICAgIGNvbnN0IG91dHB1dHMgPSBydW5uZXJzLm1hcChydW5uZXIgPT4gcnVubmVyLm91dHB1dCk7XG4gICAgICAgICAgcnVubmVycy5mb3JFYWNoKChydW5uZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGlmICghcnVubmVyLmZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgIG91dHB1dHNbaV0gKz0gJ1xcbioqIEFib3J0ZWQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGVwc1BlclJ1bm5lcltpXSA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICBvdXRwdXRzW2ldICs9ICdcXG4qKiBFeGNlZWRlZCBTdGVwIExpbWl0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBvdXRwdXRFbC52YWwob3V0cHV0cy5qb2luKCdcXG4tLS1cXG4nKSk7XG4gICAgICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwob3V0cHV0RWwuZ2V0KDApKTtcbiAgICAgICAgICBzdGF0dXNFbC50ZXh0KCdGaW5pc2hlZCcpO1xuICAgICAgICAgIHN0b3BFbC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgIHJ1bkVsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgIGlucHV0RWwucHJvcCgncmVhZG9ubHknLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBydW5JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBleHBsYWluZWQ6IHB1c2hbbnVtXSBwb3BbeF0gWytdIFstXSBbKl0gWy9dIFslXSBbIV0gWz5dIFtEXVArIFtDXUMrXG4gICAgLy8gW2RddXAgW3Jdb2xsIFtJXW5OIFtpXW5DIFtPXXV0TiBbb111dENcbiAgICB0aGlzLmNvZGVTdmdcbiAgICAgIC5jaXJjbGUoMCwgMCwgNSlcbiAgICAgIC5hdHRyKHsgZmlsbDogJ2dyYXknLCBzdHJva2U6ICdub25lJyB9KVxuICAgICAgLm1hcmtlcigtNSwgLTUsIDEwLCAxMCwgMCwgMClcbiAgICAgIC5hdHRyKHsgaWQ6ICdtYXJrMicgfSk7XG4gICAgdGhpcy5jb2RlU3ZnXG4gICAgICAucG9seWdvbihbMCwgLTEwLCAwLCAxMCwgMTAsIDBdKVxuICAgICAgLmF0dHIoeyBmaWxsOiAnYmxhY2snLCBzdHJva2U6ICdub25lJyB9KVxuICAgICAgLm1hcmtlcigwLCAtMTAsIDEwLCAyMCwgMTAsIDApXG4gICAgICAuYXR0cih7IGlkOiAnbWFyazEnIH0pO1xuICAgIC8vIHBhdGhbcl1bY10gPSBbLi4uW2Zyb21yLCBmcm9tYywgdG9yLCB0b2MsIGNtZF1dXG4gICAgLy8gcGF0aEdbcl1bY10gPSBzdmcgZ3JvdXAgdGhhdCBjb250YWlucyBhbGwgbGluZSBzZWdtZW50c1xuICAgIHRoaXMuZXhwbGFpbiA9IHtcbiAgICAgIHBhdGg6IFtbXV0sXG4gICAgICBwYXRoRzogW1tdXSxcbiAgICAgIGluaXRQYXRoOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoID0gdGhpcy5jb2RlLmNvZGUubWFwKHJvdyA9PiByb3cubWFwKCgpID0+IFtdKSk7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoRyA9IHRoaXMuY29kZS5jb2RlLm1hcChyb3cgPT5cbiAgICAgICAgICByb3cubWFwKCgpID0+IHRoaXMuY29kZVN2Zy5nKCkpLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmV4cGxhaW4ucnVubmVyID0gbmV3IFBpZXRSdW4odGhpcy5jb2RlLmNvZGUsICcnKTtcbiAgICAgIH0sXG4gICAgICBkZXN0cm95UGF0aDogKCkgPT4ge1xuICAgICAgICB0aGlzLmV4cGxhaW4ucGF0aEcuZm9yRWFjaChyb3cgPT4gcm93LmZvckVhY2goZyA9PiBnLnJlbW92ZSgpKSk7XG4gICAgICB9LFxuICAgICAgZHJhd0NtZDogKGdyb3VwRWwsIHByZXZSb3csIHByZXZDb2wsIG5leHRSb3csIG5leHRDb2wsIGNtZCwgaXNGaXJzdCkgPT4ge1xuICAgICAgICBjb25zdCB4MSA9IHByZXZDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MSA9IHByZXZSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB4MiA9IG5leHRDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MiA9IG5leHRSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCBsaW5lID0gZ3JvdXBFbC5saW5lKHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgLy8gbGluZS5hdHRyKHsgc3Ryb2tlOiAnYmxhY2snLCAnbWFya2VyLWVuZCc6ICd1cmwoI21hcmsyKScgfSk7XG4gICAgICAgIGxpbmUuYXR0cih7IHN0cm9rZTogJ2JsYWNrJyB9KTtcbiAgICAgICAgbGluZS5ub2RlLnN0eWxlWydtYXJrZXItZW5kJ10gPSBTbmFwLnVybCgnbWFyazInKTtcbiAgICAgICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgICBsaW5lLm5vZGUuc3R5bGVbJ21hcmtlci1zdGFydCddID0gU25hcC51cmwoJ21hcmsxJyk7XG4gICAgICAgICAgLy8gbGluZS5hdHRyKHsgJ21hcmtlci1zdGFydCc6ICd1cmwoI21hcmsxKScgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZS5ub2RlLnN0eWxlWydtYXJrZXItc3RhcnQnXSA9IFNuYXAudXJsKCdtYXJrMicpO1xuICAgICAgICAgIC8vIGxpbmUuYXR0cih7ICdtYXJrZXItc3RhcnQnOiAndXJsKCNtYXJrMiknIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbWQgIT09ICcnKSB7XG4gICAgICAgICAgbGV0IFt4dCwgeXRdID0gWzAsIDBdO1xuICAgICAgICAgIGlmIChuZXh0Q29sID09PSBwcmV2Q29sICsgMSkge1xuICAgICAgICAgICAgW3h0LCB5dF0gPSBbcHJldkNvbCAqIDMwICsgMjIsIHByZXZSb3cgKiAzMCArIDhdO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV4dFJvdyA9PT0gcHJldlJvdyArIDEpIHtcbiAgICAgICAgICAgIFt4dCwgeXRdID0gW3ByZXZDb2wgKiAzMCArIDIyLCBwcmV2Um93ICogMzAgKyAyMl07XG4gICAgICAgICAgfSBlbHNlIGlmIChuZXh0Q29sID09PSBwcmV2Q29sIC0gMSkge1xuICAgICAgICAgICAgW3h0LCB5dF0gPSBbcHJldkNvbCAqIDMwICsgOCwgcHJldlJvdyAqIDMwICsgMjJdO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV4dFJvdyA9PT0gcHJldlJvdyAtIDEpIHtcbiAgICAgICAgICAgIFt4dCwgeXRdID0gW3ByZXZDb2wgKiAzMCArIDgsIHByZXZSb3cgKiAzMCArIDhdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjbWRUZXh0ID0gZ3JvdXBFbC50ZXh0KHh0LCB5dCwgY21kKTtcbiAgICAgICAgICBjb25zdCBwcmV2Q29kZSA9IHRoaXMuY29kZS5jb2RlW3ByZXZSb3ddW3ByZXZDb2xdO1xuICAgICAgICAgIGNtZFRleHQuYXR0cih7XG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnbWlkZGxlJyxcbiAgICAgICAgICAgICdkb21pbmFudC1iYXNlbGluZSc6ICdtaWRkbGUnLFxuICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLFxuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMHB4JyxcbiAgICAgICAgICAgIGZpbGw6IHByZXZDb2RlID09PSAxMCB8fCBwcmV2Q29kZSA9PT0gMTYgPyAnd2hpdGUnIDogJ2JsYWNrJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRyYXdEYXNoOiAoZ3JvdXBFbCwgcHJldlJvdywgcHJldkNvbCwgbmV4dFJvdywgbmV4dENvbCkgPT4ge1xuICAgICAgICBjb25zdCB4MSA9IHByZXZDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MSA9IHByZXZSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB4MiA9IG5leHRDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MiA9IG5leHRSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCBsaW5lID0gZ3JvdXBFbC5saW5lKHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgbGluZS5hdHRyKHsgc3Ryb2tlOiAnYmxhY2snLCAnc3Ryb2tlLWRhc2hhcnJheSc6ICc0JyB9KTtcbiAgICAgIH0sXG4gICAgICBhZGRQYXRoOiAocm93LCBjb2wsIGRwLCBjYykgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5leHBsYWluLnJ1bm5lci5kcnlSdW4ocm93LCBjb2wsIGRwLCBjYyk7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoW3Jvd11bY29sXSA9IHBhdGg7XG4gICAgICAgIGxldCBbY3VyUm93LCBjdXJDb2xdID0gW3JvdywgY29sXTtcbiAgICAgICAgY29uc3QgZyA9IHRoaXMuZXhwbGFpbi5wYXRoR1tyb3ddW2NvbF07XG4gICAgICAgIHBhdGguZm9yRWFjaCgoW3ByZXZSb3csIHByZXZDb2wsIG5leHRSb3csIG5leHRDb2wsIGNtZF0sIGkpID0+IHtcbiAgICAgICAgICAvLyBkcmF3IGNvbW1hbmRzLCBhbmQgZGFzaGVkIGxpbmVzIG9uIGJpZyBhcmVhIGp1bXBzXG4gICAgICAgICAgaWYgKGN1clJvdyAhPT0gcHJldlJvdyB8fCBjdXJDb2wgIT09IHByZXZDb2wpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwbGFpbi5kcmF3RGFzaChnLCBjdXJSb3csIGN1ckNvbCwgcHJldlJvdywgcHJldkNvbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZXhwbGFpbi5kcmF3Q21kKFxuICAgICAgICAgICAgZyxcbiAgICAgICAgICAgIHByZXZSb3csXG4gICAgICAgICAgICBwcmV2Q29sLFxuICAgICAgICAgICAgbmV4dFJvdyxcbiAgICAgICAgICAgIG5leHRDb2wsXG4gICAgICAgICAgICBjbWQsXG4gICAgICAgICAgICBpID09PSAwLFxuICAgICAgICAgICk7XG4gICAgICAgICAgW2N1clJvdywgY3VyQ29sXSA9IFtuZXh0Um93LCBuZXh0Q29sXTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlUGF0aDogKHJvdywgY29sKSA9PiB7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoW3Jvd11bY29sXS5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmV4cGxhaW4ucGF0aEdbcm93XVtjb2xdXG4gICAgICAgICAgLmNoaWxkcmVuKClcbiAgICAgICAgICAuZm9yRWFjaChjaGlsZCA9PiBjaGlsZC5yZW1vdmUoKSk7XG4gICAgICB9LFxuICAgICAgdG9nZ2xlUGF0aDogKHJvdywgY29sLCBkcCwgY2MpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZXhwbGFpbi5wYXRoW3Jvd11bY29sXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmV4cGxhaW4uYWRkUGF0aChyb3csIGNvbCwgZHAsIGNjKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmV4cGxhaW4ucmVtb3ZlUGF0aChyb3csIGNvbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBleHBvcnRCdXR0b246ICQoJyNleHBvcnQtZXhwbGFpbmVkJyksXG4gICAgICBleHBvcnRVcmw6IHVuZGVmaW5lZCxcbiAgICAgIHVwZGF0ZUV4cG9ydExpbms6ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZXhwbGFpbi5leHBvcnRVcmwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5leHBsYWluLmV4cG9ydFVybCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3ZnU3RyID0gdGhpcy5jb2RlU3ZnXG4gICAgICAgICAgLm91dGVyU1ZHKClcbiAgICAgICAgICAucmVwbGFjZSgnPHN2ZycsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIicpO1xuICAgICAgICBjb25zdCBzdmdCbG9iID0gbmV3IEJsb2IoW3N2Z1N0cl0pO1xuICAgICAgICBjb25zdCBzdmdVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN2Z0Jsb2IpO1xuICAgICAgICB0aGlzLmV4cGxhaW4uZXhwb3J0QnV0dG9uLnByb3AoeyBocmVmOiBzdmdVcmwgfSk7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5leHBvcnRVcmwgPSBzdmdVcmw7XG4gICAgICB9LFxuICAgIH07XG5cbiAgICAkKCcjbmF2LWV4cGxhaW4tdGFiJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgLy8gb24gc3ZnIGNsaWNrOiBpZiB0aGVyZSdzIGFscmVhZHkgYSBwYXRoLCByZW1vdmUgaXQ7XG4gICAgICAvLyBvdGhlcndpc2UgYWRkIGEgbmV3IHBhdGggc3RhcnRpbmcgdGhlcmVcbiAgICAgIHRoaXMuY29kZVN2Zy51bmRyYWcoKTtcbiAgICAgIHRoaXMuY29kZVN2Zy51bmNsaWNrKCk7XG4gICAgICB0aGlzLmV4cGxhaW4uaW5pdFBhdGgoKTtcbiAgICAgIHRoaXMuY29kZVN2Zy5jbGljayhlID0+IHtcbiAgICAgICAgY29uc3QgY3VyUiA9ICgoZS5vZmZzZXRZIC0gMykgLyAzMCkgfCAwO1xuICAgICAgICBjb25zdCBjdXJDID0gKChlLm9mZnNldFggLSAzKSAvIDMwKSB8IDA7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjdXJSID49IDAgJiZcbiAgICAgICAgICBjdXJSIDwgdGhpcy5jb2RlLnJvd3MgJiZcbiAgICAgICAgICBjdXJDID49IDAgJiZcbiAgICAgICAgICBjdXJDIDwgdGhpcy5jb2RlLmNvbHMgJiZcbiAgICAgICAgICB0aGlzLmNvZGUuY29kZVtjdXJSXVtjdXJDXSAhPT0gMTlcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGV0IGRwID0gMDtcbiAgICAgICAgICBpZiAoJCgnI2V4cGxhaW4tZHAtMCcpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAwO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJCgnI2V4cGxhaW4tZHAtMScpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAxO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJCgnI2V4cGxhaW4tZHAtMicpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAyO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJCgnI2V4cGxhaW4tZHAtMycpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY2MgPSAwO1xuICAgICAgICAgIGlmICgkKCcjZXhwbGFpbi1jYy0wJykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgICBjYyA9IDA7XG4gICAgICAgICAgfSBlbHNlIGlmICgkKCcjZXhwbGFpbi1jYy0xJykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgICBjYyA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZXhwbGFpbi50b2dnbGVQYXRoKGN1clIsIGN1ckMsIGRwLCBjYyk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5leHBsYWluKTtcbiAgICAgICAgICB0aGlzLmV4cGxhaW4udXBkYXRlRXhwb3J0TGluaygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAkKCcjbmF2LWRlYnVnLCAjbmF2LXRlc3QsICNuYXYtc2hhcmUnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvZGVTdmcudW5kcmFnKCk7XG4gICAgICB0aGlzLmNvZGVTdmcudW5jbGljaygpO1xuICAgICAgdGhpcy5leHBsYWluLmRlc3Ryb3lQYXRoKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBsb2FkRnJvbVBlcm1hbGluayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGhhc2ggPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpO1xuICAgICAgY29uc3QgY29tcHJlc3NlZCA9IEJhc2U2NC50b1VpbnQ4QXJyYXkoaGFzaCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleHBvcnRKU09OID0gcGFrby5pbmZsYXRlKGNvbXByZXNzZWQsIHsgdG86ICdzdHJpbmcnIH0pO1xuICAgICAgICBjb25zdCBleHBvcnRPYmogPSBKU09OLnBhcnNlKGV4cG9ydEpTT04pO1xuICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgb2JqIGhhcyBhbGwgZml2ZSBmaWVsZHNcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGV4cG9ydE9iai5jb2RlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICBleHBvcnRPYmouc2VwID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICBleHBvcnRPYmoubGltID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICBleHBvcnRPYmouZXNjID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICBleHBvcnRPYmouaW5wdXQgPT09IHVuZGVmaW5lZFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhleHBvcnRPYmopO1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0RlY29kZWQgb2JqZWN0IGRvZXMgbm90IGhhdmUgbmVjZXNzYXJ5IGZpZWxkcycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29kZS5yZXBsYWNlQ29kZShleHBvcnRPYmouY29kZSk7XG4gICAgICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSgpO1xuICAgICAgICAkKCcjdGVzdC1zZXAnKS52YWwoZXhwb3J0T2JqLnNlcCk7XG4gICAgICAgICQoJyN0ZXN0LWxpbWl0JykudmFsKGV4cG9ydE9iai5saW0pO1xuICAgICAgICAkKCcjdGVzdC1lc2NhcGUnKS52YWwoZXhwb3J0T2JqLmVzYyk7XG4gICAgICAgICQoJyN0ZXN0LWlucHV0JykudmFsKGV4cG9ydE9iai5pbnB1dCk7XG4gICAgICAgICQoJyNuYXYtdGVzdC10YWInKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGFkanVzdEhlaWdodC5jYWxsKCQoJyN0ZXN0LWlucHV0JykuZ2V0KDApKSwgMTAwMCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5oYXNoICE9PSAnJykge1xuICAgICAgbG9hZEZyb21QZXJtYWxpbmsoKTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBpZXQge1xuICBzdGF0aWMgY29tbWFuZFRleHQgPSBbXG4gICAgWycnLCAnKycsICcvJywgJz4nLCAnZHVwJywgJ2luQyddLFxuICAgIFsncHVzaCcsICctJywgJyUnLCAnRFArJywgJ3JvbGwnLCAnb3V0TiddLFxuICAgIFsncG9wJywgJyonLCAnIScsICdDQysnLCAnaW5OJywgJ291dEMnXSxcbiAgXTtcblxuICBzdGF0aWMge1xuICAgIHRoaXMuY2hhcjJjb2xvciA9IHt9O1xuICAgIHRoaXMuY29sb3J2ZWMyY29sb3IgPSB7fTtcbiAgICB0aGlzLmNvbG9ycyA9IFtdO1xuICAgIGNvbnN0IGh1ZU1hc2sgPSBbNCwgNiwgMiwgMywgMSwgNV07XG4gICAgY29uc3QgbGlnaHRTdHIgPSBbXG4gICAgICBbJ0MwJywgJ0ZGJ10sXG4gICAgICBbJzAwJywgJ0ZGJ10sXG4gICAgICBbJzAwJywgJ0MwJ10sXG4gICAgXTtcbiAgICBmb3IgKGxldCBkYXJrbmVzcyA9IDA7IGRhcmtuZXNzIDwgMzsgZGFya25lc3MgKz0gMSkge1xuICAgICAgY29uc3QgbGlnaHQgPSBsaWdodFN0cltkYXJrbmVzc107XG4gICAgICBmb3IgKGxldCBodWUgPSAwOyBodWUgPCA2OyBodWUgKz0gMSkge1xuICAgICAgICBjb25zdCBjaGFyY29kZSA9IGRhcmtuZXNzICogMzIgKyBodWUgKyA0ODtcbiAgICAgICAgbGV0IGNvbG9yY29kZSA9ICcjJztcbiAgICAgICAgY29uc3QgY29sb3J2ZWMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBuZXh0VmFsID0gbGlnaHRbKGh1ZU1hc2tbaHVlXSA+PiAoMiAtIGkpKSAmIDFdO1xuICAgICAgICAgIGNvbG9yY29kZSArPSBuZXh0VmFsO1xuICAgICAgICAgIGNvbG9ydmVjLnB1c2goTnVtYmVyLnBhcnNlSW50KG5leHRWYWwsIDE2KSk7XG4gICAgICAgIH1cbiAgICAgICAgY29sb3J2ZWMucHVzaCgyNTUpO1xuICAgICAgICBjb25zdCBjaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyY29kZSk7XG4gICAgICAgIHRoaXMuY29sb3JzLnB1c2goeyBjaGFyY29kZSwgY2hhciwgY29sb3Jjb2RlLCBjb2xvcnZlYyB9KTtcbiAgICAgICAgdGhpcy5jaGFyMmNvbG9yW2NoYXJdID0gZGFya25lc3MgKiA2ICsgaHVlO1xuICAgICAgICB0aGlzLmNvbG9ydmVjMmNvbG9yW2NvbG9ydmVjXSA9IGRhcmtuZXNzICogNiArIGh1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb2xvcnMucHVzaCh7XG4gICAgICBjaGFyY29kZTogJ0AnLmNoYXJDb2RlQXQoKSxcbiAgICAgIGNoYXI6ICdAJyxcbiAgICAgIGNvbG9yY29kZTogJyNGRkZGRkYnLFxuICAgICAgY29sb3J2ZWM6IFsyNTUsIDI1NSwgMjU1LCAyNTVdLFxuICAgIH0pO1xuICAgIHRoaXMuY2hhcjJjb2xvclsnQCddID0gMTg7XG4gICAgdGhpcy5jb2xvcnZlYzJjb2xvclt0aGlzLmNvbG9yc1sxOF0uY29sb3J2ZWNdID0gMTg7XG4gICAgdGhpcy5jb2xvcnMucHVzaCh7XG4gICAgICBjaGFyY29kZTogJyAnLmNoYXJDb2RlQXQoKSxcbiAgICAgIGNoYXI6ICcgJyxcbiAgICAgIGNvbG9yY29kZTogJyMwMDAwMDAnLFxuICAgICAgY29sb3J2ZWM6IFswLCAwLCAwLCAyNTVdLFxuICAgIH0pO1xuICAgIHRoaXMuY2hhcjJjb2xvclsnICddID0gMTk7XG4gICAgdGhpcy5jb2xvcnZlYzJjb2xvclt0aGlzLmNvbG9yc1sxOV0uY29sb3J2ZWNdID0gMTk7XG4gIH1cblxuICBzdGF0aWMgY29tcHJlc3MoY29kZUdyaWQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBmdW5jdGlvbiBnY2QoYSwgYikge1xuICAgICAgbGV0IFt4LCB5XSA9IFthLCBiXTtcbiAgICAgIHdoaWxlICh5ICE9PSAwKSB7XG4gICAgICAgIFt4LCB5XSA9IFt5LCB4ICUgeV07XG4gICAgICB9XG4gICAgICByZXR1cm4geDtcbiAgICB9XG4gICAgY29uc3QgZyA9IGdjZCh3aWR0aCwgaGVpZ2h0KTtcbiAgICBmdW5jdGlvbiBjaGVjayhzKSB7XG4gICAgICBmb3IgKGxldCByID0gMDsgciA8IGhlaWdodCAvIHM7IHIgKz0gMSkge1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHdpZHRoIC8gczsgYyArPSAxKSB7XG4gICAgICAgICAgY29uc3Qgcm1pbiA9IHIgKiBzO1xuICAgICAgICAgIGNvbnN0IHJtYXggPSAociArIDEpICogcztcbiAgICAgICAgICBjb25zdCBjbWluID0gYyAqIHM7XG4gICAgICAgICAgY29uc3QgY21heCA9IChjICsgMSkgKiBzO1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkID0gY29kZUdyaWRbcm1pbl1bY21pbl07XG4gICAgICAgICAgZm9yIChsZXQgcnIgPSBybWluOyByciA8IHJtYXg7IHJyICs9IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNjID0gY21pbjsgY2MgPCBjbWF4OyBjYyArPSAxKSB7XG4gICAgICAgICAgICAgIGlmIChleHBlY3RlZCAhPT0gY29kZUdyaWRbcnJdW2NjXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAobGV0IGdnID0gZzsgZ2cgPj0gMTsgZ2cgLT0gMSkge1xuICAgICAgaWYgKGcgJSBnZyA9PT0gMCkge1xuICAgICAgICBpZiAoY2hlY2soZ2cpKSB7XG4gICAgICAgICAgcmV0dXJuIGNvZGVHcmlkXG4gICAgICAgICAgICAuZmlsdGVyKChyLCBpKSA9PiBpICUgZ2cgPT09IDApXG4gICAgICAgICAgICAubWFwKHJvdyA9PiByb3cuZmlsdGVyKChjLCBpKSA9PiBpICUgZ2cgPT09IDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29kZUdyaWQ7XG4gIH1cblxuICBzdGF0aWMgZnJvbUFzY2lpUGlldChhcGNvZGUpIHtcbiAgICBjb25zdCBhcGdyaWQgPSBhcGNvZGUucmVwbGFjZSgvW0BBLVpfXS9nLCBzID0+IHtcbiAgICAgIGlmIChzID09PSAnQCcpIHtcbiAgICAgICAgcmV0dXJuICcgXFxuJztcbiAgICAgIH1cbiAgICAgIGlmIChzID09PSAnXycpIHtcbiAgICAgICAgcmV0dXJuICc/XFxuJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtzLnRvTG93ZXJDYXNlKCl9XFxuYDtcbiAgICB9KTtcbiAgICBjb25zdCBhcCA9ICd0dnJzcXVsbmpraW1kZmJjYWU/ICc7XG4gICAgY29uc3QgY29kZUdyaWQgPSBhcGdyaWRcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5tYXAocyA9PiBbLi4uc10ubWFwKGMgPT4gKGFwLmluZGV4T2YoYykgKyAyMCkgJSAyMCkpO1xuICAgIGNvbnN0IGNvbHMgPSBNYXRoLm1heCgxLCAuLi5jb2RlR3JpZC5tYXAocm93ID0+IHJvdy5sZW5ndGgpKTtcbiAgICBjb2RlR3JpZC5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICB3aGlsZSAocm93Lmxlbmd0aCA8IGNvbHMpIHtcbiAgICAgICAgcm93LnB1c2goMTkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb2RlR3JpZDtcbiAgfVxuXG4gIHRvQXNjaWlQaWV0KGNvbXBhY3QpIHtcbiAgICBjb25zdCBhcCA9ICd0dnJzcXVsbmpraW1kZmJjYWU/ICc7XG4gICAgY29uc3QgY29kZVN0ciA9IHRoaXMuY29kZS5tYXAocm93ID0+IHtcbiAgICAgIGNvbnN0IHJvd1N0ciA9IHJvd1xuICAgICAgICAubWFwKGNlbGwgPT4gYXBbY2VsbF0pXG4gICAgICAgIC5qb2luKCcnKVxuICAgICAgICAudHJpbUVuZCgpO1xuICAgICAgcmV0dXJuIHJvd1N0cjtcbiAgICB9KTtcbiAgICBpZiAoIWNvbXBhY3QpIHtcbiAgICAgIHJldHVybiBjb2RlU3RyLmpvaW4oJ1xcbicpO1xuICAgIH1cbiAgICByZXR1cm4gY29kZVN0clxuICAgICAgLm1hcCgocm93LCBpKSA9PiB7XG4gICAgICAgIGlmIChpID09PSBjb2RlU3RyLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICByZXR1cm4gcm93O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtmcm9udCwgYmFja10gPSBbcm93LnNsaWNlKDAsIC0xKSwgcm93LnNsaWNlKC0xKV07XG4gICAgICAgIGlmIChiYWNrID09PSAnPycpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZnJvbnR9X2A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyb250ICsgYmFjay50b1VwcGVyQ2FzZSgpO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcnKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNvZGUpIHtcbiAgICBjb25zdCBjb2RlU3RyID0gY29kZSB8fCAnMCc7XG4gICAgdGhpcy5jb2RlID0gY29kZVN0clxuICAgICAgLnNwbGl0KC9cXHI/XFxuLylcbiAgICAgIC5tYXAocm93ID0+IFsuLi5yb3ddLm1hcChjZWxsID0+IFBpZXQuY2hhcjJjb2xvcltjZWxsXSkpO1xuICAgIHRoaXMucm93cyA9IHRoaXMuY29kZS5sZW5ndGg7XG4gICAgdGhpcy5jb2xzID0gdGhpcy5jb2RlWzBdLmxlbmd0aDtcbiAgfVxuXG4gIGV4dGVuZENvZGUoZGlyZWN0aW9uKSB7XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3InKSB7XG4gICAgICB0aGlzLmNvZGUuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICByb3cucHVzaCgxOSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29scyArPSAxO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbCcpIHtcbiAgICAgIHRoaXMuY29kZS5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgIHJvdy51bnNoaWZ0KDE5KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb2xzICs9IDE7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdkJykge1xuICAgICAgdGhpcy5jb2RlLnB1c2godGhpcy5jb2RlWzBdLm1hcCgoKSA9PiAxOSkpO1xuICAgICAgdGhpcy5yb3dzICs9IDE7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICd1Jykge1xuICAgICAgdGhpcy5jb2RlLnVuc2hpZnQodGhpcy5jb2RlWzBdLm1hcCgoKSA9PiAxOSkpO1xuICAgICAgdGhpcy5yb3dzICs9IDE7XG4gICAgfVxuICB9XG5cbiAgc2hyaW5rQ29kZShkaXJlY3Rpb24pIHtcbiAgICBpZiAoXG4gICAgICAoKGRpcmVjdGlvbiA9PT0gJ3InIHx8IGRpcmVjdGlvbiA9PT0gJ2wnKSAmJiB0aGlzLmNvbHMgPT09IDEpIHx8XG4gICAgICAoKGRpcmVjdGlvbiA9PT0gJ3UnIHx8IGRpcmVjdGlvbiA9PT0gJ2QnKSAmJiB0aGlzLnJvd3MgPT09IDEpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGltZW5zaW9uIGNhbm5vdCBiZSByZWR1Y2VkIGZyb20gMScpO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAncicpIHtcbiAgICAgIHRoaXMuY29kZS5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgIHJvdy5wb3AoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb2xzIC09IDE7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdsJykge1xuICAgICAgdGhpcy5jb2RlLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgcm93LnNoaWZ0KCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29scyAtPSAxO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZCcpIHtcbiAgICAgIHRoaXMuY29kZS5wb3AoKTtcbiAgICAgIHRoaXMucm93cyAtPSAxO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAndScpIHtcbiAgICAgIHRoaXMuY29kZS5zaGlmdCgpO1xuICAgICAgdGhpcy5yb3dzIC09IDE7XG4gICAgfVxuICB9XG5cbiAgcmVwbGFjZUNvZGUobmV3Q29kZSkge1xuICAgIHRoaXMuY29kZSA9IG5ld0NvZGU7XG4gICAgdGhpcy5yb3dzID0gdGhpcy5jb2RlLmxlbmd0aDtcbiAgICB0aGlzLmNvbHMgPSB0aGlzLmNvZGVbMF0ubGVuZ3RoO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=