"use strict";(self.webpackChunkpiet=self.webpackChunkpiet||[]).push([[826],{424:(t,e,o)=>{o.d(e,{Z:()=>r});var s=o(81),c=o.n(s),i=o(645),l=o.n(i)()(c());l.push([t.id,"svg {\n    margin: none;\n    padding: 2px;\n    border: 2px solid #ccc;\n}\n\n#svg-palette {\n    width: 368px;\n    height: 128px;\n}",""]);const r=l},939:(t,e,o)=>{o(169);var s=o(755),c=o.n(s),i=o(10),l=o.n(i);class r{static commandText=[["","+","/","<","dup","inC"],["push","-","%","DP+","roll","outN"],["pop","*","!","CC+","inN","outC"]];static initialize(){this.char2color={},this.colors=[];const t=[4,6,2,3,1,5],e=[["C0","FF"],["00","FF"],["00","C0"]];for(let o=0;o<3;o+=1){const s=e[o];for(let e=0;e<6;e+=1){const c=32*o+e+48;let i="#";const l=[];for(let o=0;o<3;o+=1){const c=s[t[e]>>2-o&1];i+=c,l.push(Number.parseInt(c,16))}l.push(255);const r=String.fromCharCode(c);this.colors.push({charcode:c,char:r,colorcode:i,colorvec:l}),this.char2color[r]=6*o+e}}this.colors.push({charcode:"@".charCodeAt(),char:"@",colorcode:"#FFFFFF"}),this.char2color["@"]=18,this.colors.push({charcode:" ".charCodeAt(),char:" ",colorcode:"#000000"}),this.char2color[" "]=19}constructor(t){const e=t||"0";this.code=e.split(/\r?\n/).map((t=>[...t].map((t=>r.char2color[t])))),this.rows=this.code.length,this.cols=this.code[0].length}extendCode(t){"r"===t?(this.code.forEach((t=>{t.push(19)})),this.cols+=1):"l"===t?(this.code.forEach((t=>{t.unshift(19)})),this.cols+=1):"d"===t?(this.code.push(this.code[0].map((()=>19))),this.rows+=1):"u"===t&&(this.code.unshift(this.code[0].map((()=>19))),this.rows+=1)}shrinkCode(t){("r"===t||"l"===t)&&1===this.cols||("u"===t||"d"===t)&&1===this.rows?console.log("Dimension cannot be reduced from 1"):"r"===t?(this.code.forEach((t=>{t.pop()})),this.cols-=1):"l"===t?(this.code.forEach((t=>{t.shift()})),this.cols-=1):"d"===t?(this.code.pop(),this.rows-=1):"u"===t&&(this.code.shift(),this.rows-=1)}}class h{constructor(t){r.initialize(),this.paletteSvg=l()("#svg-palette"),this.paletteRects=[],this.paletteOverlays=[];for(let t=0;t<3;t+=1){this.paletteOverlays.push([]);for(let e=0;e<6;e+=1){const o=6*t+e,s=this.paletteSvg.el("rect",{width:60,height:30,x:60*e,y:30*t,fill:r.colors[o].colorcode});this.paletteRects.push(s);const c=this.paletteSvg.text(60*e+30,30*t+15,"").attr({"text-anchor":"middle","dominant-baseline":"middle","pointer-events":"none"});4===e&&t>=1?c.attr({fill:"white"}):c.attr({fill:"black"}),this.paletteOverlays[t].push(c),this.paletteSvg.g(s,c).click((t=>{t.stopPropagation(),t.preventDefault(),console.log(t),console.log(o),this.edit.updateColor(o)}))}}for(let t=18;t<=19;t+=1){const e=this.paletteSvg.el("rect",{width:180,height:30,x:180*(t-18),y:90,fill:r.colors[t].colorcode}).click((e=>{e.stopPropagation(),e.preventDefault(),console.log(e),console.log(t),this.edit.updateColor(t)}));this.paletteRects.push(e)}this.codeSvg=l()("#svg-code"),this.code=new r(t);const e=this.codeSvg.el("rect",{width:30,height:30}).toDefs();this.codeRects=[[]],this.codeRects.update=()=>{const t=this.codeRects.length,o=this.codeRects[0].length;if(t<this.code.rows){const t=this.code.code[this.code.rows-1].map(((t,o)=>this.codeSvg.use(e).attr({x:30*o,y:30*(this.code.rows-1),fill:r.colors[t].colorcode})));this.codeRects.push(t)}else t>this.code.rows&&this.codeRects.pop().forEach((t=>t.remove()));o<this.code.cols?this.codeRects.forEach(((t,o)=>{const s=this.codeSvg.use(e);s.attr({x:30*(this.code.cols-1),y:30*o,fill:r.colors[this.code.code[o][this.code.cols-1]].colorcode}),t.push(s)})):o>this.code.cols&&this.codeRects.forEach((t=>t.pop().remove())),this.codeRects.forEach(((t,e)=>{t.forEach(((t,o)=>{t.attr({fill:r.colors[this.code.code[e][o]].colorcode})}))})),this.codeSvg.attr({width:30*this.code.cols+8,height:30*this.code.rows+8})},this.codeRects.update(),this.edit={mode:"write",color:0,selectColor:t=>{if(this.paletteRects[t].attr({stroke:"gray","stroke-width":6,x:"+=3",y:"+=3",width:"-=6",height:"-=6"}),t<18){const e=t%6,o=t/6|0;for(let t=0;t<3;t+=1)for(let s=0;s<6;s+=1){const c=r.commandText[t][s],i=(e+s)%6,l=(o+t)%3;this.paletteOverlays[l][i].node.textContent=c}}else for(let t=0;t<3;t+=1)for(let e=0;e<6;e+=1)this.paletteOverlays[t][e].node.textContent=""},unselectColor:t=>{this.paletteRects[t].attr({stroke:void 0,"stroke-width":void 0,x:"-=3",y:"-=3",width:"+=6",height:"+=6"})},updateColor:t=>{const e=this.edit.color;this.edit.color=t,this.edit.unselectColor(e),this.edit.selectColor(t)},updateCodeColor1:(t,e,o)=>{this.code.code[t][e]=o,this.codeRects[t][e].attr({fill:r.colors[o].colorcode})}},this.edit.selectColor(0),["l","u","r","d"].forEach((t=>{["plus","minus"].forEach((e=>{const o=`#grid-${t}${e}`;c()(o).on("click",(o=>{o.stopPropagation(),o.preventDefault(),"plus"===e?this.code.extendCode(t):this.code.shrinkCode(t),this.codeRects.update()}))}))}));const o=c()("#grid-write"),s=c()("#grid-pick");o.on("click",(()=>{this.codeSvg.unclick(),this.codeSvg.drag(((t,e,o,s,c)=>{const i=(c.offsetY-3)/30|0,l=(c.offsetX-3)/30|0;i>=0&&i<this.code.rows&&l>=0&&l<this.code.cols&&this.edit.updateCodeColor1(i,l,this.edit.color)}),((t,e,o)=>{const s=(o.offsetY-3)/30|0,c=(o.offsetX-3)/30|0;s>=0&&s<this.code.rows&&c>=0&&c<this.code.cols&&this.edit.updateCodeColor1(s,c,this.edit.color)}),(()=>{}))})),s.on("click",(()=>{this.codeSvg.undrag(),this.codeSvg.click((t=>{const e=(t.offsetY-3)/30|0,o=(t.offsetX-3)/30|0;e>=0&&e<this.code.rows&&o>=0&&o<this.code.cols&&this.edit.updateColor(this.code.code[e][o])}))})),o.trigger("click"),this.export={pngButton:c()("#export-png"),svgButton:c()("#export-svg"),updateExportLink:()=>{const{rows:t,cols:e}=this.code,o=this.code.code,s=c()("<canvas/>");s.prop({width:e,height:t});const i=s.get(0),l=i.getContext("2d"),h=l.getImageData(0,0,e,t);for(let s=0;s<t;s+=1)for(let t=0;t<e;t+=1){const c=4*(s*e+t),{colorvec:i}=r.colors[o[s][t]];for(let t=0;t<4;t+=1)h.data[c+t]=i[t]}l.putImageData(h,0,0),i.toBlob((t=>{const e=URL.createObjectURL(t);this.export.pngButton.prop({href:e})}));const a=this.codeSvg.outerSVG().replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"'),d=new Blob([a]),n=URL.createObjectURL(d);this.export.svgButton.prop({href:n})}},c()("#nav-share-tab").on("click",(()=>{this.export.updateExportLink()}))}}o(39),o(247);var a=o(379),d=o.n(a),n=o(795),g=o.n(n),p=o(569),v=o.n(p),w=o(565),f=o.n(w),x=o(216),m=o.n(x),u=o(589),k=o.n(u),C=o(424),B={};B.styleTagTransform=k(),B.setAttributes=f(),B.insert=v().bind(null,"head"),B.domAPI=g(),B.insertStyleElement=m(),d()(C.Z,B),C.Z&&C.Z.locals&&C.Z.locals,window.onload=()=>{new h,console.log("loaded")}},204:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e"},609:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e"},469:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e"},486:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e"},144:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e"},175:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e"},740:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},460:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},647:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e"},692:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},214:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e"},931:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e"},349:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e"},217:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},956:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},819:t=>{t.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e"}},t=>{t.O(0,[216],(()=>(939,t(t.s=939)))),t.O()}]);