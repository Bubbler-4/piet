"use strict";
(self["webpackChunkpiet"] = self["webpackChunkpiet"] || []).push([["index"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./src/index.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/index.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, "svg {\n    margin: none;\n    padding: 2px;\n    border: 2px solid #ccc;\n}\n\n#svg-palette {\n    width: 368px;\n    height: 128px;\n}", "",{"version":3,"sources":["webpack://./src/index.css"],"names":[],"mappings":"AAAA;IACI,YAAY;IACZ,YAAY;IACZ,sBAAsB;AAC1B;;AAEA;IACI,YAAY;IACZ,aAAa;AACjB","sourcesContent":["svg {\n    margin: none;\n    padding: 2px;\n    border: 2px solid #ccc;\n}\n\n#svg-palette {\n    width: 368px;\n    height: 128px;\n}"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/index.css":
/*!***********************!*\
  !*** ./src/index.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./index.css */ "./node_modules/css-loader/dist/cjs.js!./src/index.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bootstrap */ "./node_modules/bootstrap/dist/js/bootstrap.esm.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapsvg */ "./node_modules/snapsvg/dist/snap.svg.js");
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(snapsvg__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _piet_ui_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./piet-ui.js */ "./src/piet-ui.js");
/* harmony import */ var bootstrap_dist_css_bootstrap_min_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bootstrap/dist/css/bootstrap.min.css */ "./node_modules/bootstrap/dist/css/bootstrap.min.css");
/* harmony import */ var bootstrap_icons_font_bootstrap_icons_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bootstrap-icons/font/bootstrap-icons.css */ "./node_modules/bootstrap-icons/font/bootstrap-icons.css");
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index.css */ "./src/index.css");








function init() {
  const ui = new _piet_ui_js__WEBPACK_IMPORTED_MODULE_3__["default"]();
}

window.onload = () => {
  init();
  console.log('loaded');
};


/***/ }),

/***/ "./src/piet-ui.js":
/*!************************!*\
  !*** ./src/piet-ui.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PietUI)
/* harmony export */ });
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapsvg */ "./node_modules/snapsvg/dist/snap.svg.js");
/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(snapsvg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _piet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./piet.js */ "./src/piet.js");




class PietUI {
  constructor(code) {
    _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].initialize();
    this.paletteSvg = snapsvg__WEBPACK_IMPORTED_MODULE_0___default()('#svg-palette');
    this.paletteRects = [];
    this.paletteOverlays = [];
    for (let light = 0; light < 3; light += 1) {
      this.paletteOverlays.push([]);
      for (let hue = 0; hue < 6; hue += 1) {
        const color = light * 6 + hue;
        const curRect = this.paletteSvg.el('rect', {
          width: 60,
          height: 30,
          x: 60 * hue,
          y: 30 * light,
          fill: _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[color].colorcode,
        });
        this.paletteRects.push(curRect);
        const curCmd = this.paletteSvg
          .text(60 * hue + 30, 30 * light + 15, '')
          .attr({
            'text-anchor': 'middle',
            'dominant-baseline': 'middle',
            'pointer-events': 'none',
          });
        if (hue === 4 && light >= 1) {
          curCmd.attr({ fill: 'white' });
        } else {
          curCmd.attr({ fill: 'black' });
        }
        this.paletteOverlays[light].push(curCmd);
        this.paletteSvg.g(curRect, curCmd).click(e => {
          e.stopPropagation();
          e.preventDefault();
          console.log(e);
          console.log(color);
          this.edit.updateColor(color);
        });
      }
    }
    for (let color = 18; color <= 19; color += 1) {
      const curRect = this.paletteSvg
        .el('rect', {
          width: 180,
          height: 30,
          x: 180 * (color - 18),
          y: 90,
          fill: _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[color].colorcode,
        })
        .click(e => {
          e.stopPropagation();
          e.preventDefault();
          console.log(e);
          console.log(color);
          this.edit.updateColor(color);
        });
      this.paletteRects.push(curRect);
    }
    this.codeSvg = snapsvg__WEBPACK_IMPORTED_MODULE_0___default()('#svg-code');
    this.code = new _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"](code);
    const codeRect = this.codeSvg
      .el('rect', { width: 30, height: 30 })
      .toDefs();
    this.codeRects = [[]];
    this.codeRects.update = () => {
      const prevRows = this.codeRects.length;
      const prevCols = this.codeRects[0].length;
      if (prevRows < this.code.rows) {
        const newRow = this.code.code[this.code.rows - 1].map((color, c) => {
          const curRect = this.codeSvg.use(codeRect);
          return curRect.attr({
            x: 30 * c,
            y: 30 * (this.code.rows - 1),
            fill: _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[color].colorcode,
          });
        });
        this.codeRects.push(newRow);
      } else if (prevRows > this.code.rows) {
        this.codeRects.pop().forEach(rect => rect.remove());
      }
      if (prevCols < this.code.cols) {
        this.codeRects.forEach((row, r) => {
          const newRect = this.codeSvg.use(codeRect);
          newRect.attr({
            x: 30 * (this.code.cols - 1),
            y: 30 * r,
            fill: _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[this.code.code[r][this.code.cols - 1]].colorcode,
          });
          row.push(newRect);
        });
      } else if (prevCols > this.code.cols) {
        this.codeRects.forEach(row => row.pop().remove());
      }
      this.codeRects.forEach((row, r) => {
        row.forEach((rect, c) => {
          rect.attr({ fill: _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[this.code.code[r][c]].colorcode });
        });
      });
      this.codeSvg.attr({
        width: 30 * this.code.cols + 8,
        height: 30 * this.code.rows + 8,
      });
    };
    this.codeRects.update();
    this.edit = {
      mode: 'write',
      color: 0,
      selectColor: clr => {
        this.paletteRects[clr].attr({
          stroke: 'gray',
          'stroke-width': 6,
          x: '+=3',
          y: '+=3',
          width: '-=6',
          height: '-=6',
        });
        if (clr < 18) {
          const curHue = clr % 6;
          const curLight = (clr / 6) | 0;
          for (let lightOff = 0; lightOff < 3; lightOff += 1) {
            for (let hueOff = 0; hueOff < 6; hueOff += 1) {
              const s = _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].commandText[lightOff][hueOff];
              const nextHue = (curHue + hueOff) % 6;
              const nextLight = (curLight + lightOff) % 3;
              this.paletteOverlays[nextLight][nextHue].node.textContent = s;
            }
          }
        } else {
          for (let light = 0; light < 3; light += 1) {
            for (let hue = 0; hue < 6; hue += 1) {
              this.paletteOverlays[light][hue].node.textContent = '';
            }
          }
        }
      },
      unselectColor: clr => {
        this.paletteRects[clr].attr({
          stroke: undefined,
          'stroke-width': undefined,
          x: '-=3',
          y: '-=3',
          width: '+=6',
          height: '+=6',
        });
      },
      updateColor: clr => {
        const prevColor = this.edit.color;
        this.edit.color = clr;
        this.edit.unselectColor(prevColor);
        this.edit.selectColor(clr);
      },
      updateCodeColor1: (r, c, clr) => {
        this.code.code[r][c] = clr;
        this.codeRects[r][c].attr({ fill: _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[clr].colorcode });
      },
    };
    this.edit.selectColor(0);

    ['l', 'u', 'r', 'd'].forEach(direction => {
      ['plus', 'minus'].forEach(action => {
        const id = `#grid-${direction}${action}`;
        const button = jquery__WEBPACK_IMPORTED_MODULE_1___default()(id);
        button.on('click', e => {
          e.stopPropagation();
          e.preventDefault();
          if (action === 'plus') {
            this.code.extendCode(direction);
          } else {
            this.code.shrinkCode(direction);
          }
          this.codeRects.update();
        });
      });
    });

    const writeButton = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#grid-write');
    const pickButton = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#grid-pick');
    writeButton.on('click', () => {
      this.codeSvg.unclick();
      this.codeSvg.drag(
        (dx, dy, x, y, e) => {
          const curR = ((e.offsetY - 3) / 30) | 0;
          const curC = ((e.offsetX - 3) / 30) | 0;
          if (
            curR >= 0 &&
            curR < this.code.rows &&
            curC >= 0 &&
            curC < this.code.cols
          ) {
            this.edit.updateCodeColor1(curR, curC, this.edit.color);
          }
        },
        (x, y, e) => {
          const curR = ((e.offsetY - 3) / 30) | 0;
          const curC = ((e.offsetX - 3) / 30) | 0;
          if (
            curR >= 0 &&
            curR < this.code.rows &&
            curC >= 0 &&
            curC < this.code.cols
          ) {
            this.edit.updateCodeColor1(curR, curC, this.edit.color);
          }
        },
        () => {},
      );
    });
    pickButton.on('click', () => {
      this.codeSvg.undrag();
      this.codeSvg.click(e => {
        const curR = ((e.offsetY - 3) / 30) | 0;
        const curC = ((e.offsetX - 3) / 30) | 0;
        if (
          curR >= 0 &&
          curR < this.code.rows &&
          curC >= 0 &&
          curC < this.code.cols
        ) {
          this.edit.updateColor(this.code.code[curR][curC]);
        }
      });
    });
    writeButton.trigger('click');

    this.export = {
      pngButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-png'),
      svgButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-svg'),
      updateExportLink: () => {
        const { rows, cols } = this.code;
        const matrix = this.code.code;
        const canvas = jquery__WEBPACK_IMPORTED_MODULE_1___default()('<canvas/>');
        canvas.prop({ width: cols, height: rows });
        const canvasEl = canvas.get(0);
        const ctx = canvasEl.getContext('2d');
        const imdata = ctx.getImageData(0, 0, cols, rows);
        for (let r = 0; r < rows; r += 1) {
          for (let c = 0; c < cols; c += 1) {
            const idx = (r * cols + c) * 4;
            const { colorvec } = _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[matrix[r][c]];
            console.log(_piet_js__WEBPACK_IMPORTED_MODULE_2__["default"], _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors, _piet_js__WEBPACK_IMPORTED_MODULE_2__["default"].colors[matrix[r][c]], colorvec);
            for (let i = 0; i < 4; i += 1) {
              imdata.data[idx + i] = colorvec[i];
            }
          }
        }
        ctx.putImageData(imdata, 0, 0);
        canvasEl.toBlob(blob => {
          const pngUrl = URL.createObjectURL(blob);
          this.export.pngButton.prop({ href: pngUrl });
        });
        // const pngUrl = canvasEl.toDataURL('image/png');
        // this.export.pngButton.prop({ href: pngUrl });
        const svgStr = this.codeSvg
          .outerSVG()
          .replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"');
        const svgBlob = new Blob([svgStr]);
        const svgUrl = URL.createObjectURL(svgBlob);
        this.export.svgButton.prop({ href: svgUrl });
      },
    };
    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-share-tab').on('click', () => {
      this.export.updateExportLink();
    });
  }
}


/***/ }),

/***/ "./src/piet.js":
/*!*********************!*\
  !*** ./src/piet.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Piet)
/* harmony export */ });
class Piet {
  static commandText = [
    ['', '+', '/', '<', 'dup', 'inC'],
    ['push', '-', '%', 'DP+', 'roll', 'outN'],
    ['pop', '*', '!', 'CC+', 'inN', 'outC'],
  ];

  static initialize() {
    this.char2color = {};
    this.colors = [];
    const hueMask = [4, 6, 2, 3, 1, 5];
    const lightStr = [
      ['C0', 'FF'],
      ['00', 'FF'],
      ['00', 'C0'],
    ];
    for (let darkness = 0; darkness < 3; darkness += 1) {
      const light = lightStr[darkness];
      for (let hue = 0; hue < 6; hue += 1) {
        const charcode = darkness * 32 + hue + 48;
        let colorcode = '#';
        const colorvec = [];
        for (let i = 0; i < 3; i += 1) {
          const nextVal = light[(hueMask[hue] >> (2 - i)) & 1];
          colorcode += nextVal;
          colorvec.push(Number.parseInt(nextVal, 16));
        }
        colorvec.push(255);
        const char = String.fromCharCode(charcode);
        this.colors.push({ charcode, char, colorcode, colorvec });
        this.char2color[char] = darkness * 6 + hue;
      }
    }
    this.colors.push({
      charcode: '@'.charCodeAt(),
      char: '@',
      colorcode: '#FFFFFF',
    });
    this.char2color['@'] = 18;
    this.colors.push({
      charcode: ' '.charCodeAt(),
      char: ' ',
      colorcode: '#000000',
    });
    this.char2color[' '] = 19;
  }

  constructor(code) {
    const codeStr = code || '0';
    this.code = codeStr
      .split(/\r?\n/)
      .map(row => [...row].map(cell => Piet.char2color[cell]));
    this.rows = this.code.length;
    this.cols = this.code[0].length;
  }

  extendCode(direction) {
    if (direction === 'r') {
      this.code.forEach(row => {
        row.push(19);
      });
      this.cols += 1;
    } else if (direction === 'l') {
      this.code.forEach(row => {
        row.unshift(19);
      });
      this.cols += 1;
    } else if (direction === 'd') {
      this.code.push(this.code[0].map(() => 19));
      this.rows += 1;
    } else if (direction === 'u') {
      this.code.unshift(this.code[0].map(() => 19));
      this.rows += 1;
    }
  }

  shrinkCode(direction) {
    if (
      ((direction === 'r' || direction === 'l') && this.cols === 1) ||
      ((direction === 'u' || direction === 'd') && this.rows === 1)
    ) {
      console.log('Dimension cannot be reduced from 1');
    } else if (direction === 'r') {
      this.code.forEach(row => {
        row.pop();
      });
      this.cols -= 1;
    } else if (direction === 'l') {
      this.code.forEach(row => {
        row.shift();
      });
      this.cols -= 1;
    } else if (direction === 'd') {
      this.code.pop();
      this.rows -= 1;
    } else if (direction === 'u') {
      this.code.shift();
      this.rows -= 1;
    }
  }
}


/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e":
/*!*********************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e ***!
  \*********************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e":
/*!***********************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e ***!
  \***********************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e":
/*!************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e ***!
  \************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!*************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \*************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e":
/*!**************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e ***!
  \**************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":
/*!************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e ***!
  \************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e":
/*!***********************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e ***!
  \***********************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e";

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__("./src/index.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguYWFmZjY2MjE4YjkyZTc1MTQ5Y2IuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDMEc7QUFDakI7QUFDekYsOEJBQThCLG1GQUEyQixDQUFDLDRGQUFxQztBQUMvRjtBQUNBLCtDQUErQyxtQkFBbUIsbUJBQW1CLDZCQUE2QixHQUFHLGtCQUFrQixtQkFBbUIsb0JBQW9CLEdBQUcsT0FBTyxnRkFBZ0YsVUFBVSxVQUFVLFlBQVksT0FBTyxLQUFLLFVBQVUsVUFBVSwrQkFBK0IsbUJBQW1CLG1CQUFtQiw2QkFBNkIsR0FBRyxrQkFBa0IsbUJBQW1CLG9CQUFvQixHQUFHLG1CQUFtQjtBQUM1ZjtBQUNBLGlFQUFlLHVCQUF1QixFQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ052QyxNQUErRjtBQUMvRixNQUFxRjtBQUNyRixNQUE0RjtBQUM1RixNQUErRztBQUMvRyxNQUF3RztBQUN4RyxNQUF3RztBQUN4RyxNQUFtRztBQUNuRztBQUNBOztBQUVBOztBQUVBLDRCQUE0QixxR0FBbUI7QUFDL0Msd0JBQXdCLGtIQUFhOztBQUVyQyx1QkFBdUIsdUdBQWE7QUFDcEM7QUFDQSxpQkFBaUIsK0ZBQU07QUFDdkIsNkJBQTZCLHNHQUFrQjs7QUFFL0MsYUFBYSwwR0FBRyxDQUFDLHNGQUFPOzs7O0FBSTZDO0FBQ3JFLE9BQU8saUVBQWUsc0ZBQU8sSUFBSSw2RkFBYyxHQUFHLDZGQUFjLFlBQVksRUFBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUJ0QztBQUNoQjtBQUNJO0FBQ087QUFDWTtBQUNJO0FBQzdCOztBQUVyQjtBQUNBLGlCQUFpQixtREFBTTtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNmMkI7QUFDSjtBQUNNOztBQUVkO0FBQ2Y7QUFDQSxJQUFJLDJEQUFlO0FBQ25CLHNCQUFzQiw4Q0FBSTtBQUMxQjtBQUNBO0FBQ0Esd0JBQXdCLFdBQVc7QUFDbkM7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdURBQVc7QUFDM0IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkMsVUFBVTtBQUNWLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlCQUF5QixhQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1REFBVztBQUMzQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxtQkFBbUIsOENBQUk7QUFDdkIsb0JBQW9CLGdEQUFJO0FBQ3hCO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFXO0FBQzdCLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1REFBVztBQUM3QixXQUFXO0FBQ1g7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE1BQU0sdURBQVcsa0NBQWtDO0FBQ3pFLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxjQUFjO0FBQy9DLGlDQUFpQyxZQUFZO0FBQzdDLHdCQUF3Qiw0REFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw4QkFBOEIsV0FBVztBQUN6Qyw4QkFBOEIsU0FBUztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxvQ0FBb0MsTUFBTSx1REFBVyxpQkFBaUI7QUFDdEUsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUE0QixVQUFVLEVBQUUsT0FBTztBQUMvQyx1QkFBdUIsNkNBQUM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7O0FBRUwsd0JBQXdCLDZDQUFDO0FBQ3pCLHVCQUF1Qiw2Q0FBQztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0JBQWdCO0FBQ2hCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBLGlCQUFpQiw2Q0FBQztBQUNsQixpQkFBaUIsNkNBQUM7QUFDbEI7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBLHVCQUF1Qiw2Q0FBQztBQUN4QixzQkFBc0IsMkJBQTJCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixVQUFVO0FBQ2xDLDBCQUEwQixVQUFVO0FBQ3BDO0FBQ0Esb0JBQW9CLFdBQVcsRUFBRSx1REFBVztBQUM1Qyx3QkFBd0IsZ0RBQUksRUFBRSx1REFBVyxFQUFFLHVEQUFXO0FBQ3RELDRCQUE0QixPQUFPO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLGNBQWM7QUFDckQsU0FBUztBQUNUO0FBQ0Esd0NBQXdDLGNBQWM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxjQUFjO0FBQ25ELE9BQU87QUFDUDtBQUNBLElBQUksNkNBQUM7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUM1UWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixjQUFjO0FBQ3pDO0FBQ0Esd0JBQXdCLFNBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFDQUFxQztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waWV0Ly4vc3JjL2luZGV4LmNzcyIsIndlYnBhY2s6Ly9waWV0Ly4vc3JjL2luZGV4LmNzcz9jZmU0Iiwid2VicGFjazovL3BpZXQvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcGlldC8uL3NyYy9waWV0LXVpLmpzIiwid2VicGFjazovL3BpZXQvLi9zcmMvcGlldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL3NvdXJjZU1hcHMuanNcIjtcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcInN2ZyB7XFxuICAgIG1hcmdpbjogbm9uZTtcXG4gICAgcGFkZGluZzogMnB4O1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjY2NjO1xcbn1cXG5cXG4jc3ZnLXBhbGV0dGUge1xcbiAgICB3aWR0aDogMzY4cHg7XFxuICAgIGhlaWdodDogMTI4cHg7XFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9pbmRleC5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7SUFDSSxZQUFZO0lBQ1osWUFBWTtJQUNaLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixhQUFhO0FBQ2pCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcInN2ZyB7XFxuICAgIG1hcmdpbjogbm9uZTtcXG4gICAgcGFkZGluZzogMnB4O1xcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjY2NjO1xcbn1cXG5cXG4jc3ZnLXBhbGV0dGUge1xcbiAgICB3aWR0aDogMzY4cHg7XFxuICAgIGhlaWdodDogMTI4cHg7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXguY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJpbXBvcnQgKiBhcyBib290c3RyYXAgZnJvbSAnYm9vdHN0cmFwJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgU25hcCBmcm9tICdzbmFwc3ZnJztcbmltcG9ydCBQaWV0VUkgZnJvbSAnLi9waWV0LXVpLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzJztcbmltcG9ydCAnYm9vdHN0cmFwLWljb25zL2ZvbnQvYm9vdHN0cmFwLWljb25zLmNzcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgY29uc3QgdWkgPSBuZXcgUGlldFVJKCk7XG59XG5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gIGluaXQoKTtcbiAgY29uc29sZS5sb2coJ2xvYWRlZCcpO1xufTtcbiIsImltcG9ydCBTbmFwIGZyb20gJ3NuYXBzdmcnO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBQaWV0IGZyb20gJy4vcGlldC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBpZXRVSSB7XG4gIGNvbnN0cnVjdG9yKGNvZGUpIHtcbiAgICBQaWV0LmluaXRpYWxpemUoKTtcbiAgICB0aGlzLnBhbGV0dGVTdmcgPSBTbmFwKCcjc3ZnLXBhbGV0dGUnKTtcbiAgICB0aGlzLnBhbGV0dGVSZWN0cyA9IFtdO1xuICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzID0gW107XG4gICAgZm9yIChsZXQgbGlnaHQgPSAwOyBsaWdodCA8IDM7IGxpZ2h0ICs9IDEpIHtcbiAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzLnB1c2goW10pO1xuICAgICAgZm9yIChsZXQgaHVlID0gMDsgaHVlIDwgNjsgaHVlICs9IDEpIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSBsaWdodCAqIDYgKyBodWU7XG4gICAgICAgIGNvbnN0IGN1clJlY3QgPSB0aGlzLnBhbGV0dGVTdmcuZWwoJ3JlY3QnLCB7XG4gICAgICAgICAgd2lkdGg6IDYwLFxuICAgICAgICAgIGhlaWdodDogMzAsXG4gICAgICAgICAgeDogNjAgKiBodWUsXG4gICAgICAgICAgeTogMzAgKiBsaWdodCxcbiAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wYWxldHRlUmVjdHMucHVzaChjdXJSZWN0KTtcbiAgICAgICAgY29uc3QgY3VyQ21kID0gdGhpcy5wYWxldHRlU3ZnXG4gICAgICAgICAgLnRleHQoNjAgKiBodWUgKyAzMCwgMzAgKiBsaWdodCArIDE1LCAnJylcbiAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnbWlkZGxlJyxcbiAgICAgICAgICAgICdkb21pbmFudC1iYXNlbGluZSc6ICdtaWRkbGUnLFxuICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLFxuICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoaHVlID09PSA0ICYmIGxpZ2h0ID49IDEpIHtcbiAgICAgICAgICBjdXJDbWQuYXR0cih7IGZpbGw6ICd3aGl0ZScgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VyQ21kLmF0dHIoeyBmaWxsOiAnYmxhY2snIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzW2xpZ2h0XS5wdXNoKGN1ckNtZCk7XG4gICAgICAgIHRoaXMucGFsZXR0ZVN2Zy5nKGN1clJlY3QsIGN1ckNtZCkuY2xpY2soZSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coY29sb3IpO1xuICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2xvcihjb2xvcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBjb2xvciA9IDE4OyBjb2xvciA8PSAxOTsgY29sb3IgKz0gMSkge1xuICAgICAgY29uc3QgY3VyUmVjdCA9IHRoaXMucGFsZXR0ZVN2Z1xuICAgICAgICAuZWwoJ3JlY3QnLCB7XG4gICAgICAgICAgd2lkdGg6IDE4MCxcbiAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgIHg6IDE4MCAqIChjb2xvciAtIDE4KSxcbiAgICAgICAgICB5OiA5MCxcbiAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICB9KVxuICAgICAgICAuY2xpY2soZSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coY29sb3IpO1xuICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2xvcihjb2xvcik7XG4gICAgICAgIH0pO1xuICAgICAgdGhpcy5wYWxldHRlUmVjdHMucHVzaChjdXJSZWN0KTtcbiAgICB9XG4gICAgdGhpcy5jb2RlU3ZnID0gU25hcCgnI3N2Zy1jb2RlJyk7XG4gICAgdGhpcy5jb2RlID0gbmV3IFBpZXQoY29kZSk7XG4gICAgY29uc3QgY29kZVJlY3QgPSB0aGlzLmNvZGVTdmdcbiAgICAgIC5lbCgncmVjdCcsIHsgd2lkdGg6IDMwLCBoZWlnaHQ6IDMwIH0pXG4gICAgICAudG9EZWZzKCk7XG4gICAgdGhpcy5jb2RlUmVjdHMgPSBbW11dO1xuICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHByZXZSb3dzID0gdGhpcy5jb2RlUmVjdHMubGVuZ3RoO1xuICAgICAgY29uc3QgcHJldkNvbHMgPSB0aGlzLmNvZGVSZWN0c1swXS5sZW5ndGg7XG4gICAgICBpZiAocHJldlJvd3MgPCB0aGlzLmNvZGUucm93cykge1xuICAgICAgICBjb25zdCBuZXdSb3cgPSB0aGlzLmNvZGUuY29kZVt0aGlzLmNvZGUucm93cyAtIDFdLm1hcCgoY29sb3IsIGMpID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJSZWN0ID0gdGhpcy5jb2RlU3ZnLnVzZShjb2RlUmVjdCk7XG4gICAgICAgICAgcmV0dXJuIGN1clJlY3QuYXR0cih7XG4gICAgICAgICAgICB4OiAzMCAqIGMsXG4gICAgICAgICAgICB5OiAzMCAqICh0aGlzLmNvZGUucm93cyAtIDEpLFxuICAgICAgICAgICAgZmlsbDogUGlldC5jb2xvcnNbY29sb3JdLmNvbG9yY29kZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29kZVJlY3RzLnB1c2gobmV3Um93KTtcbiAgICAgIH0gZWxzZSBpZiAocHJldlJvd3MgPiB0aGlzLmNvZGUucm93cykge1xuICAgICAgICB0aGlzLmNvZGVSZWN0cy5wb3AoKS5mb3JFYWNoKHJlY3QgPT4gcmVjdC5yZW1vdmUoKSk7XG4gICAgICB9XG4gICAgICBpZiAocHJldkNvbHMgPCB0aGlzLmNvZGUuY29scykge1xuICAgICAgICB0aGlzLmNvZGVSZWN0cy5mb3JFYWNoKChyb3csIHIpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdSZWN0ID0gdGhpcy5jb2RlU3ZnLnVzZShjb2RlUmVjdCk7XG4gICAgICAgICAgbmV3UmVjdC5hdHRyKHtcbiAgICAgICAgICAgIHg6IDMwICogKHRoaXMuY29kZS5jb2xzIC0gMSksXG4gICAgICAgICAgICB5OiAzMCAqIHIsXG4gICAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1t0aGlzLmNvZGUuY29kZVtyXVt0aGlzLmNvZGUuY29scyAtIDFdXS5jb2xvcmNvZGUsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcm93LnB1c2gobmV3UmVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcmV2Q29scyA+IHRoaXMuY29kZS5jb2xzKSB7XG4gICAgICAgIHRoaXMuY29kZVJlY3RzLmZvckVhY2gocm93ID0+IHJvdy5wb3AoKS5yZW1vdmUoKSk7XG4gICAgICB9XG4gICAgICB0aGlzLmNvZGVSZWN0cy5mb3JFYWNoKChyb3csIHIpID0+IHtcbiAgICAgICAgcm93LmZvckVhY2goKHJlY3QsIGMpID0+IHtcbiAgICAgICAgICByZWN0LmF0dHIoeyBmaWxsOiBQaWV0LmNvbG9yc1t0aGlzLmNvZGUuY29kZVtyXVtjXV0uY29sb3Jjb2RlIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb2RlU3ZnLmF0dHIoe1xuICAgICAgICB3aWR0aDogMzAgKiB0aGlzLmNvZGUuY29scyArIDgsXG4gICAgICAgIGhlaWdodDogMzAgKiB0aGlzLmNvZGUucm93cyArIDgsXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSgpO1xuICAgIHRoaXMuZWRpdCA9IHtcbiAgICAgIG1vZGU6ICd3cml0ZScsXG4gICAgICBjb2xvcjogMCxcbiAgICAgIHNlbGVjdENvbG9yOiBjbHIgPT4ge1xuICAgICAgICB0aGlzLnBhbGV0dGVSZWN0c1tjbHJdLmF0dHIoe1xuICAgICAgICAgIHN0cm9rZTogJ2dyYXknLFxuICAgICAgICAgICdzdHJva2Utd2lkdGgnOiA2LFxuICAgICAgICAgIHg6ICcrPTMnLFxuICAgICAgICAgIHk6ICcrPTMnLFxuICAgICAgICAgIHdpZHRoOiAnLT02JyxcbiAgICAgICAgICBoZWlnaHQ6ICctPTYnLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNsciA8IDE4KSB7XG4gICAgICAgICAgY29uc3QgY3VySHVlID0gY2xyICUgNjtcbiAgICAgICAgICBjb25zdCBjdXJMaWdodCA9IChjbHIgLyA2KSB8IDA7XG4gICAgICAgICAgZm9yIChsZXQgbGlnaHRPZmYgPSAwOyBsaWdodE9mZiA8IDM7IGxpZ2h0T2ZmICs9IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGh1ZU9mZiA9IDA7IGh1ZU9mZiA8IDY7IGh1ZU9mZiArPSAxKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHMgPSBQaWV0LmNvbW1hbmRUZXh0W2xpZ2h0T2ZmXVtodWVPZmZdO1xuICAgICAgICAgICAgICBjb25zdCBuZXh0SHVlID0gKGN1ckh1ZSArIGh1ZU9mZikgJSA2O1xuICAgICAgICAgICAgICBjb25zdCBuZXh0TGlnaHQgPSAoY3VyTGlnaHQgKyBsaWdodE9mZikgJSAzO1xuICAgICAgICAgICAgICB0aGlzLnBhbGV0dGVPdmVybGF5c1tuZXh0TGlnaHRdW25leHRIdWVdLm5vZGUudGV4dENvbnRlbnQgPSBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGxldCBsaWdodCA9IDA7IGxpZ2h0IDwgMzsgbGlnaHQgKz0gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaHVlID0gMDsgaHVlIDwgNjsgaHVlICs9IDEpIHtcbiAgICAgICAgICAgICAgdGhpcy5wYWxldHRlT3ZlcmxheXNbbGlnaHRdW2h1ZV0ubm9kZS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVuc2VsZWN0Q29sb3I6IGNsciA9PiB7XG4gICAgICAgIHRoaXMucGFsZXR0ZVJlY3RzW2Nscl0uYXR0cih7XG4gICAgICAgICAgc3Ryb2tlOiB1bmRlZmluZWQsXG4gICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IHVuZGVmaW5lZCxcbiAgICAgICAgICB4OiAnLT0zJyxcbiAgICAgICAgICB5OiAnLT0zJyxcbiAgICAgICAgICB3aWR0aDogJys9NicsXG4gICAgICAgICAgaGVpZ2h0OiAnKz02JyxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdXBkYXRlQ29sb3I6IGNsciA9PiB7XG4gICAgICAgIGNvbnN0IHByZXZDb2xvciA9IHRoaXMuZWRpdC5jb2xvcjtcbiAgICAgICAgdGhpcy5lZGl0LmNvbG9yID0gY2xyO1xuICAgICAgICB0aGlzLmVkaXQudW5zZWxlY3RDb2xvcihwcmV2Q29sb3IpO1xuICAgICAgICB0aGlzLmVkaXQuc2VsZWN0Q29sb3IoY2xyKTtcbiAgICAgIH0sXG4gICAgICB1cGRhdGVDb2RlQ29sb3IxOiAociwgYywgY2xyKSA9PiB7XG4gICAgICAgIHRoaXMuY29kZS5jb2RlW3JdW2NdID0gY2xyO1xuICAgICAgICB0aGlzLmNvZGVSZWN0c1tyXVtjXS5hdHRyKHsgZmlsbDogUGlldC5jb2xvcnNbY2xyXS5jb2xvcmNvZGUgfSk7XG4gICAgICB9LFxuICAgIH07XG4gICAgdGhpcy5lZGl0LnNlbGVjdENvbG9yKDApO1xuXG4gICAgWydsJywgJ3UnLCAncicsICdkJ10uZm9yRWFjaChkaXJlY3Rpb24gPT4ge1xuICAgICAgWydwbHVzJywgJ21pbnVzJ10uZm9yRWFjaChhY3Rpb24gPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGAjZ3JpZC0ke2RpcmVjdGlvbn0ke2FjdGlvbn1gO1xuICAgICAgICBjb25zdCBidXR0b24gPSAkKGlkKTtcbiAgICAgICAgYnV0dG9uLm9uKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdwbHVzJykge1xuICAgICAgICAgICAgdGhpcy5jb2RlLmV4dGVuZENvZGUoZGlyZWN0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb2RlLnNocmlua0NvZGUoZGlyZWN0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jb2RlUmVjdHMudXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCB3cml0ZUJ1dHRvbiA9ICQoJyNncmlkLXdyaXRlJyk7XG4gICAgY29uc3QgcGlja0J1dHRvbiA9ICQoJyNncmlkLXBpY2snKTtcbiAgICB3cml0ZUJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvZGVTdmcudW5jbGljaygpO1xuICAgICAgdGhpcy5jb2RlU3ZnLmRyYWcoXG4gICAgICAgIChkeCwgZHksIHgsIHksIGUpID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJSID0gKChlLm9mZnNldFkgLSAzKSAvIDMwKSB8IDA7XG4gICAgICAgICAgY29uc3QgY3VyQyA9ICgoZS5vZmZzZXRYIC0gMykgLyAzMCkgfCAwO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGN1clIgPj0gMCAmJlxuICAgICAgICAgICAgY3VyUiA8IHRoaXMuY29kZS5yb3dzICYmXG4gICAgICAgICAgICBjdXJDID49IDAgJiZcbiAgICAgICAgICAgIGN1ckMgPCB0aGlzLmNvZGUuY29sc1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5lZGl0LnVwZGF0ZUNvZGVDb2xvcjEoY3VyUiwgY3VyQywgdGhpcy5lZGl0LmNvbG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICh4LCB5LCBlKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VyUiA9ICgoZS5vZmZzZXRZIC0gMykgLyAzMCkgfCAwO1xuICAgICAgICAgIGNvbnN0IGN1ckMgPSAoKGUub2Zmc2V0WCAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJSID49IDAgJiZcbiAgICAgICAgICAgIGN1clIgPCB0aGlzLmNvZGUucm93cyAmJlxuICAgICAgICAgICAgY3VyQyA+PSAwICYmXG4gICAgICAgICAgICBjdXJDIDwgdGhpcy5jb2RlLmNvbHNcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2RlQ29sb3IxKGN1clIsIGN1ckMsIHRoaXMuZWRpdC5jb2xvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7fSxcbiAgICAgICk7XG4gICAgfSk7XG4gICAgcGlja0J1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvZGVTdmcudW5kcmFnKCk7XG4gICAgICB0aGlzLmNvZGVTdmcuY2xpY2soZSA9PiB7XG4gICAgICAgIGNvbnN0IGN1clIgPSAoKGUub2Zmc2V0WSAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgY29uc3QgY3VyQyA9ICgoZS5vZmZzZXRYIC0gMykgLyAzMCkgfCAwO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY3VyUiA+PSAwICYmXG4gICAgICAgICAgY3VyUiA8IHRoaXMuY29kZS5yb3dzICYmXG4gICAgICAgICAgY3VyQyA+PSAwICYmXG4gICAgICAgICAgY3VyQyA8IHRoaXMuY29kZS5jb2xzXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2xvcih0aGlzLmNvZGUuY29kZVtjdXJSXVtjdXJDXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHdyaXRlQnV0dG9uLnRyaWdnZXIoJ2NsaWNrJyk7XG5cbiAgICB0aGlzLmV4cG9ydCA9IHtcbiAgICAgIHBuZ0J1dHRvbjogJCgnI2V4cG9ydC1wbmcnKSxcbiAgICAgIHN2Z0J1dHRvbjogJCgnI2V4cG9ydC1zdmcnKSxcbiAgICAgIHVwZGF0ZUV4cG9ydExpbms6ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyByb3dzLCBjb2xzIH0gPSB0aGlzLmNvZGU7XG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuY29kZS5jb2RlO1xuICAgICAgICBjb25zdCBjYW52YXMgPSAkKCc8Y2FudmFzLz4nKTtcbiAgICAgICAgY2FudmFzLnByb3AoeyB3aWR0aDogY29scywgaGVpZ2h0OiByb3dzIH0pO1xuICAgICAgICBjb25zdCBjYW52YXNFbCA9IGNhbnZhcy5nZXQoMCk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhc0VsLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGNvbnN0IGltZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY29scywgcm93cyk7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgcm93czsgciArPSAxKSB7XG4gICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb2xzOyBjICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IChyICogY29scyArIGMpICogNDtcbiAgICAgICAgICAgIGNvbnN0IHsgY29sb3J2ZWMgfSA9IFBpZXQuY29sb3JzW21hdHJpeFtyXVtjXV07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhQaWV0LCBQaWV0LmNvbG9ycywgUGlldC5jb2xvcnNbbWF0cml4W3JdW2NdXSwgY29sb3J2ZWMpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgaW1kYXRhLmRhdGFbaWR4ICsgaV0gPSBjb2xvcnZlY1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnB1dEltYWdlRGF0YShpbWRhdGEsIDAsIDApO1xuICAgICAgICBjYW52YXNFbC50b0Jsb2IoYmxvYiA9PiB7XG4gICAgICAgICAgY29uc3QgcG5nVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICB0aGlzLmV4cG9ydC5wbmdCdXR0b24ucHJvcCh7IGhyZWY6IHBuZ1VybCB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnN0IHBuZ1VybCA9IGNhbnZhc0VsLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgICAgIC8vIHRoaXMuZXhwb3J0LnBuZ0J1dHRvbi5wcm9wKHsgaHJlZjogcG5nVXJsIH0pO1xuICAgICAgICBjb25zdCBzdmdTdHIgPSB0aGlzLmNvZGVTdmdcbiAgICAgICAgICAub3V0ZXJTVkcoKVxuICAgICAgICAgIC5yZXBsYWNlKCc8c3ZnJywgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiJyk7XG4gICAgICAgIGNvbnN0IHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnU3RyXSk7XG4gICAgICAgIGNvbnN0IHN2Z1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3ZnQmxvYik7XG4gICAgICAgIHRoaXMuZXhwb3J0LnN2Z0J1dHRvbi5wcm9wKHsgaHJlZjogc3ZnVXJsIH0pO1xuICAgICAgfSxcbiAgICB9O1xuICAgICQoJyNuYXYtc2hhcmUtdGFiJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5leHBvcnQudXBkYXRlRXhwb3J0TGluaygpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQaWV0IHtcbiAgc3RhdGljIGNvbW1hbmRUZXh0ID0gW1xuICAgIFsnJywgJysnLCAnLycsICc8JywgJ2R1cCcsICdpbkMnXSxcbiAgICBbJ3B1c2gnLCAnLScsICclJywgJ0RQKycsICdyb2xsJywgJ291dE4nXSxcbiAgICBbJ3BvcCcsICcqJywgJyEnLCAnQ0MrJywgJ2luTicsICdvdXRDJ10sXG4gIF07XG5cbiAgc3RhdGljIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5jaGFyMmNvbG9yID0ge307XG4gICAgdGhpcy5jb2xvcnMgPSBbXTtcbiAgICBjb25zdCBodWVNYXNrID0gWzQsIDYsIDIsIDMsIDEsIDVdO1xuICAgIGNvbnN0IGxpZ2h0U3RyID0gW1xuICAgICAgWydDMCcsICdGRiddLFxuICAgICAgWycwMCcsICdGRiddLFxuICAgICAgWycwMCcsICdDMCddLFxuICAgIF07XG4gICAgZm9yIChsZXQgZGFya25lc3MgPSAwOyBkYXJrbmVzcyA8IDM7IGRhcmtuZXNzICs9IDEpIHtcbiAgICAgIGNvbnN0IGxpZ2h0ID0gbGlnaHRTdHJbZGFya25lc3NdO1xuICAgICAgZm9yIChsZXQgaHVlID0gMDsgaHVlIDwgNjsgaHVlICs9IDEpIHtcbiAgICAgICAgY29uc3QgY2hhcmNvZGUgPSBkYXJrbmVzcyAqIDMyICsgaHVlICsgNDg7XG4gICAgICAgIGxldCBjb2xvcmNvZGUgPSAnIyc7XG4gICAgICAgIGNvbnN0IGNvbG9ydmVjID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSArPSAxKSB7XG4gICAgICAgICAgY29uc3QgbmV4dFZhbCA9IGxpZ2h0WyhodWVNYXNrW2h1ZV0gPj4gKDIgLSBpKSkgJiAxXTtcbiAgICAgICAgICBjb2xvcmNvZGUgKz0gbmV4dFZhbDtcbiAgICAgICAgICBjb2xvcnZlYy5wdXNoKE51bWJlci5wYXJzZUludChuZXh0VmFsLCAxNikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbG9ydmVjLnB1c2goMjU1KTtcbiAgICAgICAgY29uc3QgY2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhcmNvZGUpO1xuICAgICAgICB0aGlzLmNvbG9ycy5wdXNoKHsgY2hhcmNvZGUsIGNoYXIsIGNvbG9yY29kZSwgY29sb3J2ZWMgfSk7XG4gICAgICAgIHRoaXMuY2hhcjJjb2xvcltjaGFyXSA9IGRhcmtuZXNzICogNiArIGh1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb2xvcnMucHVzaCh7XG4gICAgICBjaGFyY29kZTogJ0AnLmNoYXJDb2RlQXQoKSxcbiAgICAgIGNoYXI6ICdAJyxcbiAgICAgIGNvbG9yY29kZTogJyNGRkZGRkYnLFxuICAgIH0pO1xuICAgIHRoaXMuY2hhcjJjb2xvclsnQCddID0gMTg7XG4gICAgdGhpcy5jb2xvcnMucHVzaCh7XG4gICAgICBjaGFyY29kZTogJyAnLmNoYXJDb2RlQXQoKSxcbiAgICAgIGNoYXI6ICcgJyxcbiAgICAgIGNvbG9yY29kZTogJyMwMDAwMDAnLFxuICAgIH0pO1xuICAgIHRoaXMuY2hhcjJjb2xvclsnICddID0gMTk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb2RlKSB7XG4gICAgY29uc3QgY29kZVN0ciA9IGNvZGUgfHwgJzAnO1xuICAgIHRoaXMuY29kZSA9IGNvZGVTdHJcbiAgICAgIC5zcGxpdCgvXFxyP1xcbi8pXG4gICAgICAubWFwKHJvdyA9PiBbLi4ucm93XS5tYXAoY2VsbCA9PiBQaWV0LmNoYXIyY29sb3JbY2VsbF0pKTtcbiAgICB0aGlzLnJvd3MgPSB0aGlzLmNvZGUubGVuZ3RoO1xuICAgIHRoaXMuY29scyA9IHRoaXMuY29kZVswXS5sZW5ndGg7XG4gIH1cblxuICBleHRlbmRDb2RlKGRpcmVjdGlvbikge1xuICAgIGlmIChkaXJlY3Rpb24gPT09ICdyJykge1xuICAgICAgdGhpcy5jb2RlLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgcm93LnB1c2goMTkpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbHMgKz0gMTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2wnKSB7XG4gICAgICB0aGlzLmNvZGUuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICByb3cudW5zaGlmdCgxOSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29scyArPSAxO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZCcpIHtcbiAgICAgIHRoaXMuY29kZS5wdXNoKHRoaXMuY29kZVswXS5tYXAoKCkgPT4gMTkpKTtcbiAgICAgIHRoaXMucm93cyArPSAxO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAndScpIHtcbiAgICAgIHRoaXMuY29kZS51bnNoaWZ0KHRoaXMuY29kZVswXS5tYXAoKCkgPT4gMTkpKTtcbiAgICAgIHRoaXMucm93cyArPSAxO1xuICAgIH1cbiAgfVxuXG4gIHNocmlua0NvZGUoZGlyZWN0aW9uKSB7XG4gICAgaWYgKFxuICAgICAgKChkaXJlY3Rpb24gPT09ICdyJyB8fCBkaXJlY3Rpb24gPT09ICdsJykgJiYgdGhpcy5jb2xzID09PSAxKSB8fFxuICAgICAgKChkaXJlY3Rpb24gPT09ICd1JyB8fCBkaXJlY3Rpb24gPT09ICdkJykgJiYgdGhpcy5yb3dzID09PSAxKVxuICAgICkge1xuICAgICAgY29uc29sZS5sb2coJ0RpbWVuc2lvbiBjYW5ub3QgYmUgcmVkdWNlZCBmcm9tIDEnKTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3InKSB7XG4gICAgICB0aGlzLmNvZGUuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICByb3cucG9wKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29scyAtPSAxO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbCcpIHtcbiAgICAgIHRoaXMuY29kZS5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgIHJvdy5zaGlmdCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbHMgLT0gMTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2QnKSB7XG4gICAgICB0aGlzLmNvZGUucG9wKCk7XG4gICAgICB0aGlzLnJvd3MgLT0gMTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3UnKSB7XG4gICAgICB0aGlzLmNvZGUuc2hpZnQoKTtcbiAgICAgIHRoaXMucm93cyAtPSAxO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9