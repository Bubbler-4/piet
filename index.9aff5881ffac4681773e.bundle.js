"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkpiet"] = self["webpackChunkpiet"] || []).push([["index"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./src/index.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/index.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/sourceMaps.js */ \"./node_modules/css-loader/dist/runtime/sourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"svg {\\n    margin: none;\\n    padding: 2px;\\n    border: 2px solid #ccc;\\n}\\n\\n#svg-palette {\\n    width: 368px;\\n    height: 128px;\\n}\\n\\ntextarea {\\n    resize: none;\\n    font-family: monospace;\\n    white-space: pre-wrap;\\n    overflow: hidden;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/index.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,YAAY;IACZ,YAAY;IACZ,sBAAsB;AAC1B;;AAEA;IACI,YAAY;IACZ,aAAa;AACjB;;AAEA;IACI,YAAY;IACZ,sBAAsB;IACtB,qBAAqB;IACrB,gBAAgB;AACpB\",\"sourcesContent\":[\"svg {\\n    margin: none;\\n    padding: 2px;\\n    border: 2px solid #ccc;\\n}\\n\\n#svg-palette {\\n    width: 368px;\\n    height: 128px;\\n}\\n\\ntextarea {\\n    resize: none;\\n    font-family: monospace;\\n    white-space: pre-wrap;\\n    overflow: hidden;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3NyYy9pbmRleC5jc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUMwRztBQUNqQjtBQUN6Riw4QkFBOEIsbUZBQTJCLENBQUMsNEZBQXFDO0FBQy9GO0FBQ0EsK0NBQStDLG1CQUFtQixtQkFBbUIsNkJBQTZCLEdBQUcsa0JBQWtCLG1CQUFtQixvQkFBb0IsR0FBRyxjQUFjLG1CQUFtQiw2QkFBNkIsNEJBQTRCLHVCQUF1QixHQUFHLE9BQU8sZ0ZBQWdGLFVBQVUsVUFBVSxZQUFZLE9BQU8sS0FBSyxVQUFVLFVBQVUsT0FBTyxLQUFLLFVBQVUsWUFBWSxhQUFhLGFBQWEsK0JBQStCLG1CQUFtQixtQkFBbUIsNkJBQTZCLEdBQUcsa0JBQWtCLG1CQUFtQixvQkFBb0IsR0FBRyxjQUFjLG1CQUFtQiw2QkFBNkIsNEJBQTRCLHVCQUF1QixHQUFHLG1CQUFtQjtBQUNoeUI7QUFDQSxpRUFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3BpZXQvLi9zcmMvaW5kZXguY3NzP2ZhYTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCJzdmcge1xcbiAgICBtYXJnaW46IG5vbmU7XFxuICAgIHBhZGRpbmc6IDJweDtcXG4gICAgYm9yZGVyOiAycHggc29saWQgI2NjYztcXG59XFxuXFxuI3N2Zy1wYWxldHRlIHtcXG4gICAgd2lkdGg6IDM2OHB4O1xcbiAgICBoZWlnaHQ6IDEyOHB4O1xcbn1cXG5cXG50ZXh0YXJlYSB7XFxuICAgIHJlc2l6ZTogbm9uZTtcXG4gICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcXG4gICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xcbn1cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vLi9zcmMvaW5kZXguY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0lBQ0ksWUFBWTtJQUNaLFlBQVk7SUFDWixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osYUFBYTtBQUNqQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixzQkFBc0I7SUFDdEIscUJBQXFCO0lBQ3JCLGdCQUFnQjtBQUNwQlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJzdmcge1xcbiAgICBtYXJnaW46IG5vbmU7XFxuICAgIHBhZGRpbmc6IDJweDtcXG4gICAgYm9yZGVyOiAycHggc29saWQgI2NjYztcXG59XFxuXFxuI3N2Zy1wYWxldHRlIHtcXG4gICAgd2lkdGg6IDM2OHB4O1xcbiAgICBoZWlnaHQ6IDEyOHB4O1xcbn1cXG5cXG50ZXh0YXJlYSB7XFxuICAgIHJlc2l6ZTogbm9uZTtcXG4gICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcXG4gICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/cjs.js!./src/index.css\n");

/***/ }),

/***/ "./src/index.css":
/*!***********************!*\
  !*** ./src/index.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./index.css */ \"./node_modules/css-loader/dist/cjs.js!./src/index.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_index_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguY3NzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQStGO0FBQy9GLE1BQXFGO0FBQ3JGLE1BQTRGO0FBQzVGLE1BQStHO0FBQy9HLE1BQXdHO0FBQ3hHLE1BQXdHO0FBQ3hHLE1BQW1HO0FBQ25HO0FBQ0E7O0FBRUE7O0FBRUEsNEJBQTRCLHFHQUFtQjtBQUMvQyx3QkFBd0Isa0hBQWE7O0FBRXJDLHVCQUF1Qix1R0FBYTtBQUNwQztBQUNBLGlCQUFpQiwrRkFBTTtBQUN2Qiw2QkFBNkIsc0dBQWtCOztBQUUvQyxhQUFhLDBHQUFHLENBQUMsc0ZBQU87Ozs7QUFJNkM7QUFDckUsT0FBTyxpRUFBZSxzRkFBTyxJQUFJLDZGQUFjLEdBQUcsNkZBQWMsWUFBWSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGlldC8uL3NyYy9pbmRleC5jc3M/Y2ZlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vaW5kZXguY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9pbmRleC5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.css\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bootstrap */ \"./node_modules/bootstrap/dist/js/bootstrap.esm.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! snapsvg */ \"./node_modules/snapsvg/dist/snap.svg.js\");\n/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(snapsvg__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _piet_ui_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./piet-ui.js */ \"./src/piet-ui.js\");\n/* harmony import */ var bootstrap_dist_css_bootstrap_min_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bootstrap/dist/css/bootstrap.min.css */ \"./node_modules/bootstrap/dist/css/bootstrap.min.css\");\n/* harmony import */ var bootstrap_icons_font_bootstrap_icons_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bootstrap-icons/font/bootstrap-icons.css */ \"./node_modules/bootstrap-icons/font/bootstrap-icons.css\");\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index.css */ \"./src/index.css\");\n\n\n\n\n\n\n\n\nfunction init() {\n  const ui = new _piet_ui_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n}\n\nwindow.onload = () => {\n  init();\n  console.log('loaded');\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF1QztBQUNoQjtBQUNJO0FBQ087QUFDWTtBQUNJO0FBQzdCOztBQUVyQjtBQUNBLGlCQUFpQixtREFBTTtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3BpZXQvLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBib290c3RyYXAgZnJvbSAnYm9vdHN0cmFwJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgU25hcCBmcm9tICdzbmFwc3ZnJztcbmltcG9ydCBQaWV0VUkgZnJvbSAnLi9waWV0LXVpLmpzJztcbmltcG9ydCAnYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzJztcbmltcG9ydCAnYm9vdHN0cmFwLWljb25zL2ZvbnQvYm9vdHN0cmFwLWljb25zLmNzcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgY29uc3QgdWkgPSBuZXcgUGlldFVJKCk7XG59XG5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG4gIGluaXQoKTtcbiAgY29uc29sZS5sb2coJ2xvYWRlZCcpO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/piet-run.js":
/*!*************************!*\
  !*** ./src/piet-run.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PietRun)\n/* harmony export */ });\n/* harmony import */ var _piet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./piet.js */ \"./src/piet.js\");\n\n\nfunction divmod(x, y) {\n  if ((x >= 0n && y > 0n) || (x < 0n && y < 0n)) {\n    return [x / y, x % y];\n  }\n  const xabs = x >= 0n ? x : -x;\n  const [yabs, ysgn] = y >= 0n ? [y, 1n] : [-y, -1n];\n  let div = xabs / yabs;\n  let mod = xabs % yabs;\n  if (mod !== 0n) {\n    div += 1n;\n    mod = yabs - mod;\n  }\n  return [-div, mod * ysgn];\n}\n\nclass PietRun {\n  static {\n    this.rOff = [0, 1, 0, -1];\n    this.cOff = [1, 0, -1, 0];\n    this.dpText = ['Right', 'Down', 'Left', 'Up'];\n    this.ccText = [\n      'Top',\n      'Bottom',\n      'Right',\n      'Left',\n      'Bottom',\n      'Top',\n      'Left',\n      'Right',\n    ];\n    this.abbrev = {\n      push: '',\n      pop: 'x',\n      '+': '+',\n      '-': '-',\n      '*': '*',\n      '/': '/',\n      '%': '%',\n      '!': '!',\n      '>': '>',\n      'DP+': 'D',\n      'CC+': 'C',\n      dup: 'd',\n      roll: 'r',\n      inN: 'I',\n      inC: 'i',\n      outN: 'O',\n      outC: 'o',\n    };\n    this.cmds = {\n      push: (self, size) => {\n        self.stack.push(BigInt(size));\n        self.lastCmd = `push ${size}`;\n      },\n      pop: self => {\n        self.stack.pop();\n      },\n      '+': self => {\n        if (self.stack.length >= 2) {\n          const [top2, top] = self.stack.splice(-2);\n          self.stack.push(top2 + top);\n        }\n      },\n      '-': self => {\n        if (self.stack.length >= 2) {\n          const [top2, top] = self.stack.splice(-2);\n          self.stack.push(top2 - top);\n        }\n      },\n      '*': self => {\n        if (self.stack.length >= 2) {\n          const [top2, top] = self.stack.splice(-2);\n          self.stack.push(top2 * top);\n        }\n      },\n      '/': self => {\n        if (\n          self.stack.length >= 2 &&\n          self.stack[self.stack.length - 1] !== 0n\n        ) {\n          const [top2, top] = self.stack.splice(-2);\n          self.stack.push(divmod(top2, top)[0]);\n        }\n      },\n      '%': self => {\n        if (\n          self.stack.length >= 2 &&\n          self.stack[self.stack.length - 1] !== 0n\n        ) {\n          const [top2, top] = self.stack.splice(-2);\n          self.stack.push(divmod(top2, top)[1]);\n        }\n      },\n      '!': self => {\n        if (self.stack.length >= 1) {\n          const top = self.stack.pop();\n          self.stack.push(top === 0n ? 1n : 0n);\n        }\n      },\n      '>': self => {\n        if (self.stack.length >= 2) {\n          const [top2, top] = self.stack.splice(-2);\n          self.stack.push(top2 > top ? 1n : 0n);\n        }\n      },\n      'DP+': self => {\n        if (self.stack.length >= 1) {\n          const top = self.stack.pop();\n          self.dp = (self.dp + Number(top % 4n) + 4) % 4;\n        }\n      },\n      'CC+': self => {\n        if (self.stack.length >= 1) {\n          const top = self.stack.pop();\n          self.cc = (self.cc + Number(top % 2n) + 2) % 2;\n        }\n      },\n      dup: self => {\n        if (self.stack.length >= 1) {\n          const top = self.stack.pop();\n          self.stack.push(top, top);\n        }\n      },\n      roll: self => {\n        if (self.stack.length >= 2) {\n          const [top2, top] = self.stack.splice(-2);\n          if (top2 >= 0n && self.stack.length >= Number(top2)) {\n            const rot = divmod(-top, top2)[1];\n            const removed = self.stack.splice(-Number(top2), Number(rot));\n            self.stack.push(...removed);\n          } else {\n            self.stack.push(top2, top);\n          }\n        }\n      },\n      inN: self => {\n        // skip whitespaces, accept digits and stop before non-digits\n        // if no digits found, no-op\n        const spaces = self.input.match(/^\\s*/)[0];\n        self.input = self.input.slice(spaces.length);\n        const number = self.input.match(/^[-+]?[0-9]+/);\n        if (number !== null) {\n          self.stack.push(BigInt(number[0]));\n          self.input = self.input.slice(number[0].length);\n        }\n      },\n      inC: self => {\n        if (self.input !== '') {\n          const cp = self.input.codePointAt(0);\n          if (cp >= 65536) {\n            self.input = self.input.slice(2);\n          } else {\n            self.input = self.input.slice(1);\n          }\n          self.stack.push(BigInt(cp));\n        }\n      },\n      outN: self => {\n        if (self.stack.length >= 1) {\n          const top = self.stack.pop();\n          self.output += top.toString();\n        }\n      },\n      outC: self => {\n        if (self.stack.length >= 1) {\n          const top = self.stack.pop();\n          if (top >= 0n && top <= 1114111n) {\n            self.output += String.fromCodePoint(Number(top));\n          }\n        }\n      },\n    };\n  }\n\n  constructor(code, input) {\n    this.dp = 0;\n    this.cc = 0;\n    this.curR = 0;\n    this.curC = 0;\n    this.lastCmd = 'N/A';\n    this.lastChange = 'none';\n    this.input = input;\n    this.output = '';\n    this.stack = [];\n    this.tryHistory = [];\n    this.finished = false;\n    const rows = code.length;\n    const cols = code[0].length;\n    // for each cell (except black): reference to area object\n    // for each area: list of cells, frontier cell for each dp and cc\n    // white is 1 area per cell\n    this.areas = [];\n    for (let r = 0; r < rows; r += 1) {\n      const areasRow = [];\n      for (let c = 0; c < cols; c += 1) {\n        areasRow.push(undefined);\n      }\n      this.areas.push(areasRow);\n    }\n    for (let r = 0; r < rows; r += 1) {\n      for (let c = 0; c < cols; c += 1) {\n        const curColor = code[r][c];\n        if (this.areas[r][c] === undefined && curColor !== 19) {\n          const newArea = {\n            cells: [],\n            color: curColor,\n            frontier: [0, 0, 0, 0, 0, 0, 0, 0],\n            frontierOut: [0, 0, 0, 0, 0, 0, 0, 0],\n            frontierBlocked: Array(8).fill(false),\n          };\n          const stack = [[r, c]];\n          while (stack.length !== 0) {\n            const [curR, curC] = stack.pop();\n            if (this.areas[curR][curC] === undefined) {\n              this.areas[curR][curC] = newArea;\n              newArea.cells.push([curR, curC]);\n              [\n                [curR - 1, curC],\n                [curR, curC - 1],\n                [curR + 1, curC],\n                [curR, curC + 1],\n              ].forEach(([nextR, nextC]) => {\n                if (\n                  nextR >= 0 &&\n                  nextR < rows &&\n                  nextC >= 0 &&\n                  nextC < cols &&\n                  code[nextR][nextC] === curColor &&\n                  curColor !== 18\n                ) {\n                  stack.push([nextR, nextC]);\n                }\n              });\n            }\n          }\n          // frontier calculation (right x2, down x2, left x2, up x2)\n          for (let i = 0; i < 8; i += 1) {\n            newArea.frontier[i] = [r, c];\n          }\n          newArea.cells.forEach(([curR, curC]) => {\n            const conds = [\n              ([fr, fc]) => curC > fc || (curC === fc && curR < fr),\n              ([fr, fc]) => curC > fc || (curC === fc && curR > fr),\n              ([fr, fc]) => curR > fr || (curR === fr && curC > fc),\n              ([fr, fc]) => curR > fr || (curR === fr && curC < fc),\n              ([fr, fc]) => curC < fc || (curC === fc && curR > fr),\n              ([fr, fc]) => curC < fc || (curC === fc && curR < fr),\n              ([fr, fc]) => curR < fr || (curR === fr && curC < fc),\n              ([fr, fc]) => curR < fr || (curR === fr && curC > fc),\n            ];\n            conds.forEach((cond, i) => {\n              const front = newArea.frontier[i];\n              if (cond(front)) {\n                newArea.frontier[i] = [curR, curC];\n              }\n            });\n          });\n          for (let i = 0; i < 8; i += 1) {\n            const [fr, fc] = newArea.frontier[i];\n            const outR = fr + PietRun.rOff[(i / 2) | 0];\n            const outC = fc + PietRun.cOff[(i / 2) | 0];\n            newArea.frontierOut[i] = [outR, outC];\n            newArea.frontierBlocked[i] =\n              outR < 0 ||\n              outR >= rows ||\n              outC < 0 ||\n              outC >= cols ||\n              code[outR][outC] === 19;\n          }\n        }\n      }\n    }\n    const startArea = this.areas[0][0];\n    [this.curR, this.curC] = startArea.frontier[this.dp * 2 + this.cc];\n  }\n\n  step() {\n    const cycleDetected = this.tryHistory.some(\n      ([r, c, dp, cc]) =>\n        this.curR === r && this.curC === c && this.dp === dp && this.cc === cc,\n    );\n    if (cycleDetected) {\n      this.finished = true;\n      return;\n    }\n    const curArea = this.areas[this.curR][this.curC];\n    const { color, frontierOut, frontierBlocked } = curArea;\n    const [nextR, nextC] = frontierOut[this.dp * 2 + this.cc];\n    const blocked = frontierBlocked[this.dp * 2 + this.cc];\n    if (blocked) {\n      this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);\n      if (this.lastChange === 'cc') {\n        this.dp = (this.dp + 1) & 3;\n        this.lastChange = 'dp';\n      } else {\n        this.cc = 1 - this.cc;\n        this.lastChange = 'cc';\n      }\n      [this.curR, this.curC] = curArea.frontier[this.dp * 2 + this.cc];\n      this.lastCmd = 'blocked';\n      // console.log('blocked');\n    } else {\n      this.lastChange = 'none';\n      if (color === 18) {\n        this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);\n        const nextArea = this.areas[nextR][nextC];\n        [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];\n        this.lastCmd = 'noop';\n        // console.log('noop');\n      } else {\n        this.tryHistory.length = 0;\n        const nextArea = this.areas[nextR][nextC];\n        [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];\n        const nextColor = nextArea.color;\n        if (nextColor === 18) {\n          this.lastCmd = 'noop';\n          // console.log('noop');\n        } else {\n          const lightDiff = (((nextColor / 6 + 3) | 0) - ((color / 6) | 0)) % 3;\n          const hueDiff = ((nextColor % 6) + 6 - (color % 6)) % 6;\n          this.lastCmd = _piet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].commandText[lightDiff][hueDiff];\n          // console.log('cmd:', lightDiff, hueDiff, this.lastCmd);\n          PietRun.cmds[this.lastCmd](this, curArea.cells.length);\n          [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];\n        }\n      }\n    }\n  }\n\n  dryStep() {\n    const cycleDetected = this.tryHistory.some(\n      ([r, c, dp, cc]) =>\n        this.curR === r && this.curC === c && this.dp === dp && this.cc === cc,\n    );\n    if (cycleDetected) {\n      this.finished = true;\n      return { finished: true };\n    }\n    const [lastR, lastC] = [this.curR, this.curC];\n    const curArea = this.areas[this.curR][this.curC];\n    const { color, frontierOut, frontierBlocked } = curArea;\n    const [nextR, nextC] = frontierOut[this.dp * 2 + this.cc];\n    const blocked = frontierBlocked[this.dp * 2 + this.cc];\n    if (blocked) {\n      this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);\n      if (this.lastChange === 'cc') {\n        this.dp = (this.dp + 1) & 3;\n        this.lastChange = 'dp';\n      } else {\n        this.cc = 1 - this.cc;\n        this.lastChange = 'cc';\n      }\n      [this.curR, this.curC] = curArea.frontier[this.dp * 2 + this.cc];\n      this.lastCmd = 'blocked';\n      return { finished: false, blocked: true };\n      // console.log('blocked');\n    }\n    this.lastChange = 'none';\n    if (color === 18) {\n      this.tryHistory.push([this.curR, this.curC, this.dp, this.cc]);\n      const nextArea = this.areas[nextR][nextC];\n      [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];\n      this.lastCmd = 'noop';\n      // console.log('noop');\n    } else {\n      this.tryHistory.length = 0;\n      const nextArea = this.areas[nextR][nextC];\n      [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];\n      const nextColor = nextArea.color;\n      if (nextColor === 18) {\n        this.lastCmd = 'noop';\n        // console.log('noop');\n      } else {\n        const lightDiff = (((nextColor / 6 + 3) | 0) - ((color / 6) | 0)) % 3;\n        const hueDiff = ((nextColor % 6) + 6 - (color % 6)) % 6;\n        this.lastCmd = _piet_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].commandText[lightDiff][hueDiff];\n        // console.log('cmd:', lightDiff, hueDiff, this.lastCmd);\n        // PietRun.cmds[this.lastCmd](this, curArea.cells.length);\n        [this.curR, this.curC] = nextArea.frontier[this.dp * 2 + this.cc];\n      }\n    }\n    let abb = '';\n    if (this.lastCmd === 'push') {\n      abb = `${curArea.cells.length}`;\n    } else if (this.lastCmd !== 'noop') {\n      abb = PietRun.abbrev[this.lastCmd];\n    }\n    return {\n      finished: false,\n      blocked: false,\n      data: [lastR, lastC, nextR, nextC, abb],\n      stop: abb === 'D' || abb === 'C', // stop tracing at DP+ or CC+\n    };\n  }\n\n  dryRun(row, col, dp, cc) {\n    const startArea = this.areas[row][col];\n    [this.curR, this.curC] = startArea.frontier[dp * 2 + cc];\n    this.dp = dp;\n    this.cc = cc;\n    const history = {};\n    this.finished = false;\n    const path = [];\n    let gFinished = false;\n    let gStop = false;\n    while (\n      !gFinished &&\n      !gStop &&\n      !history[[this.curR, this.curC, this.dp, this.cc]]\n    ) {\n      history[[this.curR, this.curC, this.dp, this.cc]] = true;\n      const { finished, blocked, data, stop } = this.dryStep();\n      if (finished) {\n        gFinished = true;\n      } else if (!blocked) {\n        path.push(data);\n        gStop = stop;\n      }\n    }\n    return path;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSx5QkFBeUIsNERBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0NBQXNDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSx1QkFBdUIsNERBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxxQkFBcUI7QUFDcEMsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0NBQWdDO0FBQzlDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waWV0Ly4vc3JjL3BpZXQtcnVuLmpzP2NlMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBpZXQgZnJvbSAnLi9waWV0LmpzJztcblxuZnVuY3Rpb24gZGl2bW9kKHgsIHkpIHtcbiAgaWYgKCh4ID49IDBuICYmIHkgPiAwbikgfHwgKHggPCAwbiAmJiB5IDwgMG4pKSB7XG4gICAgcmV0dXJuIFt4IC8geSwgeCAlIHldO1xuICB9XG4gIGNvbnN0IHhhYnMgPSB4ID49IDBuID8geCA6IC14O1xuICBjb25zdCBbeWFicywgeXNnbl0gPSB5ID49IDBuID8gW3ksIDFuXSA6IFsteSwgLTFuXTtcbiAgbGV0IGRpdiA9IHhhYnMgLyB5YWJzO1xuICBsZXQgbW9kID0geGFicyAlIHlhYnM7XG4gIGlmIChtb2QgIT09IDBuKSB7XG4gICAgZGl2ICs9IDFuO1xuICAgIG1vZCA9IHlhYnMgLSBtb2Q7XG4gIH1cbiAgcmV0dXJuIFstZGl2LCBtb2QgKiB5c2duXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGlldFJ1biB7XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5yT2ZmID0gWzAsIDEsIDAsIC0xXTtcbiAgICB0aGlzLmNPZmYgPSBbMSwgMCwgLTEsIDBdO1xuICAgIHRoaXMuZHBUZXh0ID0gWydSaWdodCcsICdEb3duJywgJ0xlZnQnLCAnVXAnXTtcbiAgICB0aGlzLmNjVGV4dCA9IFtcbiAgICAgICdUb3AnLFxuICAgICAgJ0JvdHRvbScsXG4gICAgICAnUmlnaHQnLFxuICAgICAgJ0xlZnQnLFxuICAgICAgJ0JvdHRvbScsXG4gICAgICAnVG9wJyxcbiAgICAgICdMZWZ0JyxcbiAgICAgICdSaWdodCcsXG4gICAgXTtcbiAgICB0aGlzLmFiYnJldiA9IHtcbiAgICAgIHB1c2g6ICcnLFxuICAgICAgcG9wOiAneCcsXG4gICAgICAnKyc6ICcrJyxcbiAgICAgICctJzogJy0nLFxuICAgICAgJyonOiAnKicsXG4gICAgICAnLyc6ICcvJyxcbiAgICAgICclJzogJyUnLFxuICAgICAgJyEnOiAnIScsXG4gICAgICAnPic6ICc+JyxcbiAgICAgICdEUCsnOiAnRCcsXG4gICAgICAnQ0MrJzogJ0MnLFxuICAgICAgZHVwOiAnZCcsXG4gICAgICByb2xsOiAncicsXG4gICAgICBpbk46ICdJJyxcbiAgICAgIGluQzogJ2knLFxuICAgICAgb3V0TjogJ08nLFxuICAgICAgb3V0QzogJ28nLFxuICAgIH07XG4gICAgdGhpcy5jbWRzID0ge1xuICAgICAgcHVzaDogKHNlbGYsIHNpemUpID0+IHtcbiAgICAgICAgc2VsZi5zdGFjay5wdXNoKEJpZ0ludChzaXplKSk7XG4gICAgICAgIHNlbGYubGFzdENtZCA9IGBwdXNoICR7c2l6ZX1gO1xuICAgICAgfSxcbiAgICAgIHBvcDogc2VsZiA9PiB7XG4gICAgICAgIHNlbGYuc3RhY2sucG9wKCk7XG4gICAgICB9LFxuICAgICAgJysnOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBjb25zdCBbdG9wMiwgdG9wXSA9IHNlbGYuc3RhY2suc3BsaWNlKC0yKTtcbiAgICAgICAgICBzZWxmLnN0YWNrLnB1c2godG9wMiArIHRvcCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnLSc6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5zdGFjay5sZW5ndGggPj0gMikge1xuICAgICAgICAgIGNvbnN0IFt0b3AyLCB0b3BdID0gc2VsZi5zdGFjay5zcGxpY2UoLTIpO1xuICAgICAgICAgIHNlbGYuc3RhY2sucHVzaCh0b3AyIC0gdG9wKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICcqJzogc2VsZiA9PiB7XG4gICAgICAgIGlmIChzZWxmLnN0YWNrLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgY29uc3QgW3RvcDIsIHRvcF0gPSBzZWxmLnN0YWNrLnNwbGljZSgtMik7XG4gICAgICAgICAgc2VsZi5zdGFjay5wdXNoKHRvcDIgKiB0b3ApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJy8nOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNlbGYuc3RhY2subGVuZ3RoID49IDIgJiZcbiAgICAgICAgICBzZWxmLnN0YWNrW3NlbGYuc3RhY2subGVuZ3RoIC0gMV0gIT09IDBuXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IFt0b3AyLCB0b3BdID0gc2VsZi5zdGFjay5zcGxpY2UoLTIpO1xuICAgICAgICAgIHNlbGYuc3RhY2sucHVzaChkaXZtb2QodG9wMiwgdG9wKVswXSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnJSc6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2VsZi5zdGFjay5sZW5ndGggPj0gMiAmJlxuICAgICAgICAgIHNlbGYuc3RhY2tbc2VsZi5zdGFjay5sZW5ndGggLSAxXSAhPT0gMG5cbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgW3RvcDIsIHRvcF0gPSBzZWxmLnN0YWNrLnNwbGljZSgtMik7XG4gICAgICAgICAgc2VsZi5zdGFjay5wdXNoKGRpdm1vZCh0b3AyLCB0b3ApWzFdKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICchJzogc2VsZiA9PiB7XG4gICAgICAgIGlmIChzZWxmLnN0YWNrLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgY29uc3QgdG9wID0gc2VsZi5zdGFjay5wb3AoKTtcbiAgICAgICAgICBzZWxmLnN0YWNrLnB1c2godG9wID09PSAwbiA/IDFuIDogMG4pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJz4nOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBjb25zdCBbdG9wMiwgdG9wXSA9IHNlbGYuc3RhY2suc3BsaWNlKC0yKTtcbiAgICAgICAgICBzZWxmLnN0YWNrLnB1c2godG9wMiA+IHRvcCA/IDFuIDogMG4pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ0RQKyc6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5zdGFjay5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIGNvbnN0IHRvcCA9IHNlbGYuc3RhY2sucG9wKCk7XG4gICAgICAgICAgc2VsZi5kcCA9IChzZWxmLmRwICsgTnVtYmVyKHRvcCAlIDRuKSArIDQpICUgNDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdDQysnOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDEpIHtcbiAgICAgICAgICBjb25zdCB0b3AgPSBzZWxmLnN0YWNrLnBvcCgpO1xuICAgICAgICAgIHNlbGYuY2MgPSAoc2VsZi5jYyArIE51bWJlcih0b3AgJSAybikgKyAyKSAlIDI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkdXA6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5zdGFjay5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIGNvbnN0IHRvcCA9IHNlbGYuc3RhY2sucG9wKCk7XG4gICAgICAgICAgc2VsZi5zdGFjay5wdXNoKHRvcCwgdG9wKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJvbGw6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5zdGFjay5sZW5ndGggPj0gMikge1xuICAgICAgICAgIGNvbnN0IFt0b3AyLCB0b3BdID0gc2VsZi5zdGFjay5zcGxpY2UoLTIpO1xuICAgICAgICAgIGlmICh0b3AyID49IDBuICYmIHNlbGYuc3RhY2subGVuZ3RoID49IE51bWJlcih0b3AyKSkge1xuICAgICAgICAgICAgY29uc3Qgcm90ID0gZGl2bW9kKC10b3AsIHRvcDIpWzFdO1xuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZCA9IHNlbGYuc3RhY2suc3BsaWNlKC1OdW1iZXIodG9wMiksIE51bWJlcihyb3QpKTtcbiAgICAgICAgICAgIHNlbGYuc3RhY2sucHVzaCguLi5yZW1vdmVkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5zdGFjay5wdXNoKHRvcDIsIHRvcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5OOiBzZWxmID0+IHtcbiAgICAgICAgLy8gc2tpcCB3aGl0ZXNwYWNlcywgYWNjZXB0IGRpZ2l0cyBhbmQgc3RvcCBiZWZvcmUgbm9uLWRpZ2l0c1xuICAgICAgICAvLyBpZiBubyBkaWdpdHMgZm91bmQsIG5vLW9wXG4gICAgICAgIGNvbnN0IHNwYWNlcyA9IHNlbGYuaW5wdXQubWF0Y2goL15cXHMqLylbMF07XG4gICAgICAgIHNlbGYuaW5wdXQgPSBzZWxmLmlucHV0LnNsaWNlKHNwYWNlcy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBudW1iZXIgPSBzZWxmLmlucHV0Lm1hdGNoKC9eWy0rXT9bMC05XSsvKTtcbiAgICAgICAgaWYgKG51bWJlciAhPT0gbnVsbCkge1xuICAgICAgICAgIHNlbGYuc3RhY2sucHVzaChCaWdJbnQobnVtYmVyWzBdKSk7XG4gICAgICAgICAgc2VsZi5pbnB1dCA9IHNlbGYuaW5wdXQuc2xpY2UobnVtYmVyWzBdLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbkM6IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5pbnB1dCAhPT0gJycpIHtcbiAgICAgICAgICBjb25zdCBjcCA9IHNlbGYuaW5wdXQuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgaWYgKGNwID49IDY1NTM2KSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0ID0gc2VsZi5pbnB1dC5zbGljZSgyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5pbnB1dCA9IHNlbGYuaW5wdXQuc2xpY2UoMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlbGYuc3RhY2sucHVzaChCaWdJbnQoY3ApKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG91dE46IHNlbGYgPT4ge1xuICAgICAgICBpZiAoc2VsZi5zdGFjay5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIGNvbnN0IHRvcCA9IHNlbGYuc3RhY2sucG9wKCk7XG4gICAgICAgICAgc2VsZi5vdXRwdXQgKz0gdG9wLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvdXRDOiBzZWxmID0+IHtcbiAgICAgICAgaWYgKHNlbGYuc3RhY2subGVuZ3RoID49IDEpIHtcbiAgICAgICAgICBjb25zdCB0b3AgPSBzZWxmLnN0YWNrLnBvcCgpO1xuICAgICAgICAgIGlmICh0b3AgPj0gMG4gJiYgdG9wIDw9IDExMTQxMTFuKSB7XG4gICAgICAgICAgICBzZWxmLm91dHB1dCArPSBTdHJpbmcuZnJvbUNvZGVQb2ludChOdW1iZXIodG9wKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb2RlLCBpbnB1dCkge1xuICAgIHRoaXMuZHAgPSAwO1xuICAgIHRoaXMuY2MgPSAwO1xuICAgIHRoaXMuY3VyUiA9IDA7XG4gICAgdGhpcy5jdXJDID0gMDtcbiAgICB0aGlzLmxhc3RDbWQgPSAnTi9BJztcbiAgICB0aGlzLmxhc3RDaGFuZ2UgPSAnbm9uZSc7XG4gICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgIHRoaXMub3V0cHV0ID0gJyc7XG4gICAgdGhpcy5zdGFjayA9IFtdO1xuICAgIHRoaXMudHJ5SGlzdG9yeSA9IFtdO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICBjb25zdCByb3dzID0gY29kZS5sZW5ndGg7XG4gICAgY29uc3QgY29scyA9IGNvZGVbMF0ubGVuZ3RoO1xuICAgIC8vIGZvciBlYWNoIGNlbGwgKGV4Y2VwdCBibGFjayk6IHJlZmVyZW5jZSB0byBhcmVhIG9iamVjdFxuICAgIC8vIGZvciBlYWNoIGFyZWE6IGxpc3Qgb2YgY2VsbHMsIGZyb250aWVyIGNlbGwgZm9yIGVhY2ggZHAgYW5kIGNjXG4gICAgLy8gd2hpdGUgaXMgMSBhcmVhIHBlciBjZWxsXG4gICAgdGhpcy5hcmVhcyA9IFtdO1xuICAgIGZvciAobGV0IHIgPSAwOyByIDwgcm93czsgciArPSAxKSB7XG4gICAgICBjb25zdCBhcmVhc1JvdyA9IFtdO1xuICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb2xzOyBjICs9IDEpIHtcbiAgICAgICAgYXJlYXNSb3cucHVzaCh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgICAgdGhpcy5hcmVhcy5wdXNoKGFyZWFzUm93KTtcbiAgICB9XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCByb3dzOyByICs9IDEpIHtcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY29sczsgYyArPSAxKSB7XG4gICAgICAgIGNvbnN0IGN1ckNvbG9yID0gY29kZVtyXVtjXTtcbiAgICAgICAgaWYgKHRoaXMuYXJlYXNbcl1bY10gPT09IHVuZGVmaW5lZCAmJiBjdXJDb2xvciAhPT0gMTkpIHtcbiAgICAgICAgICBjb25zdCBuZXdBcmVhID0ge1xuICAgICAgICAgICAgY2VsbHM6IFtdLFxuICAgICAgICAgICAgY29sb3I6IGN1ckNvbG9yLFxuICAgICAgICAgICAgZnJvbnRpZXI6IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgICAgIGZyb250aWVyT3V0OiBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgICAgICAgICBmcm9udGllckJsb2NrZWQ6IEFycmF5KDgpLmZpbGwoZmFsc2UpLFxuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3Qgc3RhY2sgPSBbW3IsIGNdXTtcbiAgICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBbY3VyUiwgY3VyQ10gPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZWFzW2N1clJdW2N1ckNdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5hcmVhc1tjdXJSXVtjdXJDXSA9IG5ld0FyZWE7XG4gICAgICAgICAgICAgIG5ld0FyZWEuY2VsbHMucHVzaChbY3VyUiwgY3VyQ10pO1xuICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgW2N1clIgLSAxLCBjdXJDXSxcbiAgICAgICAgICAgICAgICBbY3VyUiwgY3VyQyAtIDFdLFxuICAgICAgICAgICAgICAgIFtjdXJSICsgMSwgY3VyQ10sXG4gICAgICAgICAgICAgICAgW2N1clIsIGN1ckMgKyAxXSxcbiAgICAgICAgICAgICAgXS5mb3JFYWNoKChbbmV4dFIsIG5leHRDXSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIG5leHRSID49IDAgJiZcbiAgICAgICAgICAgICAgICAgIG5leHRSIDwgcm93cyAmJlxuICAgICAgICAgICAgICAgICAgbmV4dEMgPj0gMCAmJlxuICAgICAgICAgICAgICAgICAgbmV4dEMgPCBjb2xzICYmXG4gICAgICAgICAgICAgICAgICBjb2RlW25leHRSXVtuZXh0Q10gPT09IGN1ckNvbG9yICYmXG4gICAgICAgICAgICAgICAgICBjdXJDb2xvciAhPT0gMThcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goW25leHRSLCBuZXh0Q10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZyb250aWVyIGNhbGN1bGF0aW9uIChyaWdodCB4MiwgZG93biB4MiwgbGVmdCB4MiwgdXAgeDIpXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpICs9IDEpIHtcbiAgICAgICAgICAgIG5ld0FyZWEuZnJvbnRpZXJbaV0gPSBbciwgY107XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ld0FyZWEuY2VsbHMuZm9yRWFjaCgoW2N1clIsIGN1ckNdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25kcyA9IFtcbiAgICAgICAgICAgICAgKFtmciwgZmNdKSA9PiBjdXJDID4gZmMgfHwgKGN1ckMgPT09IGZjICYmIGN1clIgPCBmciksXG4gICAgICAgICAgICAgIChbZnIsIGZjXSkgPT4gY3VyQyA+IGZjIHx8IChjdXJDID09PSBmYyAmJiBjdXJSID4gZnIpLFxuICAgICAgICAgICAgICAoW2ZyLCBmY10pID0+IGN1clIgPiBmciB8fCAoY3VyUiA9PT0gZnIgJiYgY3VyQyA+IGZjKSxcbiAgICAgICAgICAgICAgKFtmciwgZmNdKSA9PiBjdXJSID4gZnIgfHwgKGN1clIgPT09IGZyICYmIGN1ckMgPCBmYyksXG4gICAgICAgICAgICAgIChbZnIsIGZjXSkgPT4gY3VyQyA8IGZjIHx8IChjdXJDID09PSBmYyAmJiBjdXJSID4gZnIpLFxuICAgICAgICAgICAgICAoW2ZyLCBmY10pID0+IGN1ckMgPCBmYyB8fCAoY3VyQyA9PT0gZmMgJiYgY3VyUiA8IGZyKSxcbiAgICAgICAgICAgICAgKFtmciwgZmNdKSA9PiBjdXJSIDwgZnIgfHwgKGN1clIgPT09IGZyICYmIGN1ckMgPCBmYyksXG4gICAgICAgICAgICAgIChbZnIsIGZjXSkgPT4gY3VyUiA8IGZyIHx8IChjdXJSID09PSBmciAmJiBjdXJDID4gZmMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbmRzLmZvckVhY2goKGNvbmQsIGkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZnJvbnQgPSBuZXdBcmVhLmZyb250aWVyW2ldO1xuICAgICAgICAgICAgICBpZiAoY29uZChmcm9udCkpIHtcbiAgICAgICAgICAgICAgICBuZXdBcmVhLmZyb250aWVyW2ldID0gW2N1clIsIGN1ckNdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgW2ZyLCBmY10gPSBuZXdBcmVhLmZyb250aWVyW2ldO1xuICAgICAgICAgICAgY29uc3Qgb3V0UiA9IGZyICsgUGlldFJ1bi5yT2ZmWyhpIC8gMikgfCAwXTtcbiAgICAgICAgICAgIGNvbnN0IG91dEMgPSBmYyArIFBpZXRSdW4uY09mZlsoaSAvIDIpIHwgMF07XG4gICAgICAgICAgICBuZXdBcmVhLmZyb250aWVyT3V0W2ldID0gW291dFIsIG91dENdO1xuICAgICAgICAgICAgbmV3QXJlYS5mcm9udGllckJsb2NrZWRbaV0gPVxuICAgICAgICAgICAgICBvdXRSIDwgMCB8fFxuICAgICAgICAgICAgICBvdXRSID49IHJvd3MgfHxcbiAgICAgICAgICAgICAgb3V0QyA8IDAgfHxcbiAgICAgICAgICAgICAgb3V0QyA+PSBjb2xzIHx8XG4gICAgICAgICAgICAgIGNvZGVbb3V0Ul1bb3V0Q10gPT09IDE5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzdGFydEFyZWEgPSB0aGlzLmFyZWFzWzBdWzBdO1xuICAgIFt0aGlzLmN1clIsIHRoaXMuY3VyQ10gPSBzdGFydEFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgfVxuXG4gIHN0ZXAoKSB7XG4gICAgY29uc3QgY3ljbGVEZXRlY3RlZCA9IHRoaXMudHJ5SGlzdG9yeS5zb21lKFxuICAgICAgKFtyLCBjLCBkcCwgY2NdKSA9PlxuICAgICAgICB0aGlzLmN1clIgPT09IHIgJiYgdGhpcy5jdXJDID09PSBjICYmIHRoaXMuZHAgPT09IGRwICYmIHRoaXMuY2MgPT09IGNjLFxuICAgICk7XG4gICAgaWYgKGN5Y2xlRGV0ZWN0ZWQpIHtcbiAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdXJBcmVhID0gdGhpcy5hcmVhc1t0aGlzLmN1clJdW3RoaXMuY3VyQ107XG4gICAgY29uc3QgeyBjb2xvciwgZnJvbnRpZXJPdXQsIGZyb250aWVyQmxvY2tlZCB9ID0gY3VyQXJlYTtcbiAgICBjb25zdCBbbmV4dFIsIG5leHRDXSA9IGZyb250aWVyT3V0W3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgY29uc3QgYmxvY2tlZCA9IGZyb250aWVyQmxvY2tlZFt0aGlzLmRwICogMiArIHRoaXMuY2NdO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICB0aGlzLnRyeUhpc3RvcnkucHVzaChbdGhpcy5jdXJSLCB0aGlzLmN1ckMsIHRoaXMuZHAsIHRoaXMuY2NdKTtcbiAgICAgIGlmICh0aGlzLmxhc3RDaGFuZ2UgPT09ICdjYycpIHtcbiAgICAgICAgdGhpcy5kcCA9ICh0aGlzLmRwICsgMSkgJiAzO1xuICAgICAgICB0aGlzLmxhc3RDaGFuZ2UgPSAnZHAnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYyA9IDEgLSB0aGlzLmNjO1xuICAgICAgICB0aGlzLmxhc3RDaGFuZ2UgPSAnY2MnO1xuICAgICAgfVxuICAgICAgW3RoaXMuY3VyUiwgdGhpcy5jdXJDXSA9IGN1ckFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICAgIHRoaXMubGFzdENtZCA9ICdibG9ja2VkJztcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdibG9ja2VkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFzdENoYW5nZSA9ICdub25lJztcbiAgICAgIGlmIChjb2xvciA9PT0gMTgpIHtcbiAgICAgICAgdGhpcy50cnlIaXN0b3J5LnB1c2goW3RoaXMuY3VyUiwgdGhpcy5jdXJDLCB0aGlzLmRwLCB0aGlzLmNjXSk7XG4gICAgICAgIGNvbnN0IG5leHRBcmVhID0gdGhpcy5hcmVhc1tuZXh0Ul1bbmV4dENdO1xuICAgICAgICBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdID0gbmV4dEFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICAgICAgdGhpcy5sYXN0Q21kID0gJ25vb3AnO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnbm9vcCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50cnlIaXN0b3J5Lmxlbmd0aCA9IDA7XG4gICAgICAgIGNvbnN0IG5leHRBcmVhID0gdGhpcy5hcmVhc1tuZXh0Ul1bbmV4dENdO1xuICAgICAgICBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdID0gbmV4dEFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICAgICAgY29uc3QgbmV4dENvbG9yID0gbmV4dEFyZWEuY29sb3I7XG4gICAgICAgIGlmIChuZXh0Q29sb3IgPT09IDE4KSB7XG4gICAgICAgICAgdGhpcy5sYXN0Q21kID0gJ25vb3AnO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdub29wJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbGlnaHREaWZmID0gKCgobmV4dENvbG9yIC8gNiArIDMpIHwgMCkgLSAoKGNvbG9yIC8gNikgfCAwKSkgJSAzO1xuICAgICAgICAgIGNvbnN0IGh1ZURpZmYgPSAoKG5leHRDb2xvciAlIDYpICsgNiAtIChjb2xvciAlIDYpKSAlIDY7XG4gICAgICAgICAgdGhpcy5sYXN0Q21kID0gUGlldC5jb21tYW5kVGV4dFtsaWdodERpZmZdW2h1ZURpZmZdO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjbWQ6JywgbGlnaHREaWZmLCBodWVEaWZmLCB0aGlzLmxhc3RDbWQpO1xuICAgICAgICAgIFBpZXRSdW4uY21kc1t0aGlzLmxhc3RDbWRdKHRoaXMsIGN1ckFyZWEuY2VsbHMubGVuZ3RoKTtcbiAgICAgICAgICBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdID0gbmV4dEFyZWEuZnJvbnRpZXJbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRyeVN0ZXAoKSB7XG4gICAgY29uc3QgY3ljbGVEZXRlY3RlZCA9IHRoaXMudHJ5SGlzdG9yeS5zb21lKFxuICAgICAgKFtyLCBjLCBkcCwgY2NdKSA9PlxuICAgICAgICB0aGlzLmN1clIgPT09IHIgJiYgdGhpcy5jdXJDID09PSBjICYmIHRoaXMuZHAgPT09IGRwICYmIHRoaXMuY2MgPT09IGNjLFxuICAgICk7XG4gICAgaWYgKGN5Y2xlRGV0ZWN0ZWQpIHtcbiAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHsgZmluaXNoZWQ6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgW2xhc3RSLCBsYXN0Q10gPSBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdO1xuICAgIGNvbnN0IGN1ckFyZWEgPSB0aGlzLmFyZWFzW3RoaXMuY3VyUl1bdGhpcy5jdXJDXTtcbiAgICBjb25zdCB7IGNvbG9yLCBmcm9udGllck91dCwgZnJvbnRpZXJCbG9ja2VkIH0gPSBjdXJBcmVhO1xuICAgIGNvbnN0IFtuZXh0UiwgbmV4dENdID0gZnJvbnRpZXJPdXRbdGhpcy5kcCAqIDIgKyB0aGlzLmNjXTtcbiAgICBjb25zdCBibG9ja2VkID0gZnJvbnRpZXJCbG9ja2VkW3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgIHRoaXMudHJ5SGlzdG9yeS5wdXNoKFt0aGlzLmN1clIsIHRoaXMuY3VyQywgdGhpcy5kcCwgdGhpcy5jY10pO1xuICAgICAgaWYgKHRoaXMubGFzdENoYW5nZSA9PT0gJ2NjJykge1xuICAgICAgICB0aGlzLmRwID0gKHRoaXMuZHAgKyAxKSAmIDM7XG4gICAgICAgIHRoaXMubGFzdENoYW5nZSA9ICdkcCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNjID0gMSAtIHRoaXMuY2M7XG4gICAgICAgIHRoaXMubGFzdENoYW5nZSA9ICdjYyc7XG4gICAgICB9XG4gICAgICBbdGhpcy5jdXJSLCB0aGlzLmN1ckNdID0gY3VyQXJlYS5mcm9udGllclt0aGlzLmRwICogMiArIHRoaXMuY2NdO1xuICAgICAgdGhpcy5sYXN0Q21kID0gJ2Jsb2NrZWQnO1xuICAgICAgcmV0dXJuIHsgZmluaXNoZWQ6IGZhbHNlLCBibG9ja2VkOiB0cnVlIH07XG4gICAgICAvLyBjb25zb2xlLmxvZygnYmxvY2tlZCcpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RDaGFuZ2UgPSAnbm9uZSc7XG4gICAgaWYgKGNvbG9yID09PSAxOCkge1xuICAgICAgdGhpcy50cnlIaXN0b3J5LnB1c2goW3RoaXMuY3VyUiwgdGhpcy5jdXJDLCB0aGlzLmRwLCB0aGlzLmNjXSk7XG4gICAgICBjb25zdCBuZXh0QXJlYSA9IHRoaXMuYXJlYXNbbmV4dFJdW25leHRDXTtcbiAgICAgIFt0aGlzLmN1clIsIHRoaXMuY3VyQ10gPSBuZXh0QXJlYS5mcm9udGllclt0aGlzLmRwICogMiArIHRoaXMuY2NdO1xuICAgICAgdGhpcy5sYXN0Q21kID0gJ25vb3AnO1xuICAgICAgLy8gY29uc29sZS5sb2coJ25vb3AnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50cnlIaXN0b3J5Lmxlbmd0aCA9IDA7XG4gICAgICBjb25zdCBuZXh0QXJlYSA9IHRoaXMuYXJlYXNbbmV4dFJdW25leHRDXTtcbiAgICAgIFt0aGlzLmN1clIsIHRoaXMuY3VyQ10gPSBuZXh0QXJlYS5mcm9udGllclt0aGlzLmRwICogMiArIHRoaXMuY2NdO1xuICAgICAgY29uc3QgbmV4dENvbG9yID0gbmV4dEFyZWEuY29sb3I7XG4gICAgICBpZiAobmV4dENvbG9yID09PSAxOCkge1xuICAgICAgICB0aGlzLmxhc3RDbWQgPSAnbm9vcCc7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdub29wJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBsaWdodERpZmYgPSAoKChuZXh0Q29sb3IgLyA2ICsgMykgfCAwKSAtICgoY29sb3IgLyA2KSB8IDApKSAlIDM7XG4gICAgICAgIGNvbnN0IGh1ZURpZmYgPSAoKG5leHRDb2xvciAlIDYpICsgNiAtIChjb2xvciAlIDYpKSAlIDY7XG4gICAgICAgIHRoaXMubGFzdENtZCA9IFBpZXQuY29tbWFuZFRleHRbbGlnaHREaWZmXVtodWVEaWZmXTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NtZDonLCBsaWdodERpZmYsIGh1ZURpZmYsIHRoaXMubGFzdENtZCk7XG4gICAgICAgIC8vIFBpZXRSdW4uY21kc1t0aGlzLmxhc3RDbWRdKHRoaXMsIGN1ckFyZWEuY2VsbHMubGVuZ3RoKTtcbiAgICAgICAgW3RoaXMuY3VyUiwgdGhpcy5jdXJDXSA9IG5leHRBcmVhLmZyb250aWVyW3RoaXMuZHAgKiAyICsgdGhpcy5jY107XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBhYmIgPSAnJztcbiAgICBpZiAodGhpcy5sYXN0Q21kID09PSAncHVzaCcpIHtcbiAgICAgIGFiYiA9IGAke2N1ckFyZWEuY2VsbHMubGVuZ3RofWA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmxhc3RDbWQgIT09ICdub29wJykge1xuICAgICAgYWJiID0gUGlldFJ1bi5hYmJyZXZbdGhpcy5sYXN0Q21kXTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZpbmlzaGVkOiBmYWxzZSxcbiAgICAgIGJsb2NrZWQ6IGZhbHNlLFxuICAgICAgZGF0YTogW2xhc3RSLCBsYXN0QywgbmV4dFIsIG5leHRDLCBhYmJdLFxuICAgICAgc3RvcDogYWJiID09PSAnRCcgfHwgYWJiID09PSAnQycsIC8vIHN0b3AgdHJhY2luZyBhdCBEUCsgb3IgQ0MrXG4gICAgfTtcbiAgfVxuXG4gIGRyeVJ1bihyb3csIGNvbCwgZHAsIGNjKSB7XG4gICAgY29uc3Qgc3RhcnRBcmVhID0gdGhpcy5hcmVhc1tyb3ddW2NvbF07XG4gICAgW3RoaXMuY3VyUiwgdGhpcy5jdXJDXSA9IHN0YXJ0QXJlYS5mcm9udGllcltkcCAqIDIgKyBjY107XG4gICAgdGhpcy5kcCA9IGRwO1xuICAgIHRoaXMuY2MgPSBjYztcbiAgICBjb25zdCBoaXN0b3J5ID0ge307XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIGNvbnN0IHBhdGggPSBbXTtcbiAgICBsZXQgZ0ZpbmlzaGVkID0gZmFsc2U7XG4gICAgbGV0IGdTdG9wID0gZmFsc2U7XG4gICAgd2hpbGUgKFxuICAgICAgIWdGaW5pc2hlZCAmJlxuICAgICAgIWdTdG9wICYmXG4gICAgICAhaGlzdG9yeVtbdGhpcy5jdXJSLCB0aGlzLmN1ckMsIHRoaXMuZHAsIHRoaXMuY2NdXVxuICAgICkge1xuICAgICAgaGlzdG9yeVtbdGhpcy5jdXJSLCB0aGlzLmN1ckMsIHRoaXMuZHAsIHRoaXMuY2NdXSA9IHRydWU7XG4gICAgICBjb25zdCB7IGZpbmlzaGVkLCBibG9ja2VkLCBkYXRhLCBzdG9wIH0gPSB0aGlzLmRyeVN0ZXAoKTtcbiAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICBnRmluaXNoZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICghYmxvY2tlZCkge1xuICAgICAgICBwYXRoLnB1c2goZGF0YSk7XG4gICAgICAgIGdTdG9wID0gc3RvcDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/piet-run.js\n");

/***/ }),

/***/ "./src/piet-ui.js":
/*!************************!*\
  !*** ./src/piet-ui.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PietUI)\n/* harmony export */ });\n/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! snapsvg */ \"./node_modules/snapsvg/dist/snap.svg.js\");\n/* harmony import */ var snapsvg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(snapsvg__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pako__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pako */ \"./node_modules/pako/dist/pako.esm.mjs\");\n/* harmony import */ var js_base64__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js-base64 */ \"./node_modules/js-base64/base64.mjs\");\n/* harmony import */ var _piet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./piet.js */ \"./src/piet.js\");\n/* harmony import */ var _piet_run_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./piet-run.js */ \"./src/piet-run.js\");\n\n\n\n\n\n\n\nfunction adjustHeight() {\n  this.style.height = 'auto';\n  this.style.height = `${this.scrollHeight}px`;\n}\n\n// cyrb53 from https://stackoverflow.com/a/52171480/4595904\nfunction cyrb53(str, seed = 0) {\n  let h1 = 0xdeadbeef ^ seed;\n  let h2 = 0x41c6ce57 ^ seed;\n  [...str].forEach(c => {\n    const ch = c.charCodeAt();\n    h1 = Math.imul(h1 ^ ch, 2654435761);\n    h2 = Math.imul(h2 ^ ch, 1597334677);\n  });\n  h1 =\n    Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^\n    Math.imul(h2 ^ (h2 >>> 13), 3266489909);\n  h2 =\n    Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^\n    Math.imul(h1 ^ (h1 >>> 13), 3266489909);\n  return `${h1}${h2}`;\n}\n\nclass PietUI {\n  constructor(code) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('textarea')\n      .each(function setAttr() {\n        this.setAttribute(\n          'style',\n          `height:${this.scrollHeight}px;overflow-y:hidden;`,\n        );\n      })\n      .on('input', adjustHeight);\n\n    this.paletteSvg = snapsvg__WEBPACK_IMPORTED_MODULE_0___default()('#svg-palette');\n    this.paletteRects = [];\n    this.paletteOverlays = [];\n    for (let light = 0; light < 3; light += 1) {\n      this.paletteOverlays.push([]);\n      for (let hue = 0; hue < 6; hue += 1) {\n        const color = light * 6 + hue;\n        const curRect = this.paletteSvg.el('rect', {\n          width: 60,\n          height: 30,\n          x: 60 * hue,\n          y: 30 * light,\n          fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colors[color].colorcode,\n        });\n        this.paletteRects.push(curRect);\n        const curCmd = this.paletteSvg\n          .text(60 * hue + 30, 30 * light + 15, '')\n          .attr({\n            'text-anchor': 'middle',\n            'dominant-baseline': 'middle',\n            'pointer-events': 'none',\n          });\n        if (hue === 4 && light >= 1) {\n          curCmd.attr({ fill: 'white' });\n        } else {\n          curCmd.attr({ fill: 'black' });\n        }\n        this.paletteOverlays[light].push(curCmd);\n        this.paletteSvg.g(curRect, curCmd).click(e => {\n          e.stopPropagation();\n          e.preventDefault();\n          console.log(e);\n          console.log(color);\n          this.edit.updateColor(color);\n        });\n      }\n    }\n    for (let color = 18; color <= 19; color += 1) {\n      const curRect = this.paletteSvg\n        .el('rect', {\n          width: 180,\n          height: 30,\n          x: 180 * (color - 18),\n          y: 90,\n          fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colors[color].colorcode,\n        })\n        .click(e => {\n          e.stopPropagation();\n          e.preventDefault();\n          console.log(e);\n          console.log(color);\n          this.edit.updateColor(color);\n        });\n      this.paletteRects.push(curRect);\n    }\n    this.codeSvg = snapsvg__WEBPACK_IMPORTED_MODULE_0___default()('#svg-code');\n    this.code = new _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"](code);\n    const codeRect = this.codeSvg\n      .el('rect', { width: 30, height: 30 })\n      .toDefs();\n    this.codeRects = [[]];\n    this.codeRects.update = () => {\n      let prevRows = this.codeRects.length;\n      let prevCols = this.codeRects[0].length;\n      while (prevCols < this.code.cols) {\n        const c = prevCols;\n        this.codeRects.forEach((row, r) => {\n          const newRect = this.codeSvg.use(codeRect);\n          newRect.attr({\n            x: 30 * c,\n            y: 30 * r,\n            fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colors[this.code.code[r][c]].colorcode,\n          });\n          row.push(newRect);\n        });\n        prevCols += 1;\n      }\n      while (prevCols > this.code.cols) {\n        this.codeRects.forEach(row => row.pop().remove());\n        prevCols -= 1;\n      }\n      while (prevRows < this.code.rows) {\n        const r = prevRows;\n        const newRow = this.code.code[r].map((color, c) => {\n          const curRect = this.codeSvg.use(codeRect);\n          return curRect.attr({\n            x: 30 * c,\n            y: 30 * r,\n            fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colors[color].colorcode,\n          });\n        });\n        this.codeRects.push(newRow);\n        prevRows += 1;\n      }\n      while (prevRows > this.code.rows) {\n        this.codeRects.pop().forEach(rect => rect.remove());\n        prevRows -= 1;\n      }\n      this.codeRects.forEach((row, r) => {\n        row.forEach((rect, c) => {\n          rect.attr({ fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colors[this.code.code[r][c]].colorcode });\n        });\n      });\n      this.codeSvg.attr({\n        width: 30 * this.code.cols + 8,\n        height: 30 * this.code.rows + 8,\n      });\n    };\n    this.codeRects.update();\n    this.edit = {\n      mode: 'write',\n      color: 0,\n      selectColor: clr => {\n        this.paletteRects[clr].attr({\n          stroke: 'gray',\n          'stroke-width': 6,\n          x: '+=3',\n          y: '+=3',\n          width: '-=6',\n          height: '-=6',\n        });\n        if (clr < 18) {\n          const curHue = clr % 6;\n          const curLight = (clr / 6) | 0;\n          for (let lightOff = 0; lightOff < 3; lightOff += 1) {\n            for (let hueOff = 0; hueOff < 6; hueOff += 1) {\n              const s = _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].commandText[lightOff][hueOff];\n              const nextHue = (curHue + hueOff) % 6;\n              const nextLight = (curLight + lightOff) % 3;\n              this.paletteOverlays[nextLight][nextHue].node.textContent = s;\n            }\n          }\n        } else {\n          for (let light = 0; light < 3; light += 1) {\n            for (let hue = 0; hue < 6; hue += 1) {\n              this.paletteOverlays[light][hue].node.textContent = '';\n            }\n          }\n        }\n      },\n      unselectColor: clr => {\n        this.paletteRects[clr].attr({\n          stroke: undefined,\n          'stroke-width': undefined,\n          x: '-=3',\n          y: '-=3',\n          width: '+=6',\n          height: '+=6',\n        });\n      },\n      updateColor: clr => {\n        const prevColor = this.edit.color;\n        this.edit.color = clr;\n        this.edit.unselectColor(prevColor);\n        this.edit.selectColor(clr);\n      },\n      updateCodeColor1: (r, c, clr) => {\n        this.code.code[r][c] = clr;\n        this.codeRects[r][c].attr({ fill: _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colors[clr].colorcode });\n      },\n    };\n    this.edit.selectColor(0);\n\n    ['l', 'u', 'r', 'd'].forEach(direction => {\n      ['plus', 'minus'].forEach(action => {\n        const id = `#grid-${direction}${action}`;\n        const button = jquery__WEBPACK_IMPORTED_MODULE_1___default()(id);\n        button.on('click', e => {\n          e.stopPropagation();\n          e.preventDefault();\n          if (action === 'plus') {\n            this.code.extendCode(direction);\n          } else {\n            this.code.shrinkCode(direction);\n          }\n          this.codeRects.update();\n        });\n      });\n    });\n\n    const writeButton = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#grid-write');\n    const pickButton = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#grid-pick');\n    writeButton.on('click', () => {\n      this.codeSvg.unclick();\n      this.codeSvg.drag(\n        (dx, dy, x, y, e) => {\n          const curR = ((e.offsetY - 3) / 30) | 0;\n          const curC = ((e.offsetX - 3) / 30) | 0;\n          if (\n            curR >= 0 &&\n            curR < this.code.rows &&\n            curC >= 0 &&\n            curC < this.code.cols\n          ) {\n            this.edit.updateCodeColor1(curR, curC, this.edit.color);\n          }\n        },\n        (x, y, e) => {\n          const curR = ((e.offsetY - 3) / 30) | 0;\n          const curC = ((e.offsetX - 3) / 30) | 0;\n          if (\n            curR >= 0 &&\n            curR < this.code.rows &&\n            curC >= 0 &&\n            curC < this.code.cols\n          ) {\n            this.edit.updateCodeColor1(curR, curC, this.edit.color);\n          }\n        },\n        () => {},\n      );\n    });\n    pickButton.on('click', () => {\n      this.codeSvg.undrag();\n      this.codeSvg.click(e => {\n        const curR = ((e.offsetY - 3) / 30) | 0;\n        const curC = ((e.offsetX - 3) / 30) | 0;\n        if (\n          curR >= 0 &&\n          curR < this.code.rows &&\n          curC >= 0 &&\n          curC < this.code.cols\n        ) {\n          this.edit.updateColor(this.code.code[curR][curC]);\n        }\n      });\n    });\n    writeButton.trigger('click');\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-edit-tab').on('click', () => {\n      writeButton.trigger('click');\n    });\n\n    this.export = {\n      pngButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-png'),\n      svgButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-svg'),\n      asciiGrid: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-ascii-grid'),\n      asciiMini: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-ascii-mini'),\n      shareContent: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#share-content'),\n      permButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-perm'),\n      golfButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-golf'),\n      updateExportLink: () => {\n        const { rows, cols } = this.code;\n        const matrix = this.code.code;\n        const canvas = jquery__WEBPACK_IMPORTED_MODULE_1___default()('<canvas/>');\n        canvas.prop({ width: cols, height: rows });\n        const canvasEl = canvas.get(0);\n        const ctx = canvasEl.getContext('2d');\n        const imdata = ctx.getImageData(0, 0, cols, rows);\n        for (let r = 0; r < rows; r += 1) {\n          for (let c = 0; c < cols; c += 1) {\n            const idx = (r * cols + c) * 4;\n            const { colorvec } = _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colors[matrix[r][c]];\n            for (let i = 0; i < 4; i += 1) {\n              imdata.data[idx + i] = colorvec[i];\n            }\n          }\n        }\n        ctx.putImageData(imdata, 0, 0);\n        canvasEl.toBlob(blob => {\n          const pngUrl = URL.createObjectURL(blob);\n          this.export.pngButton.prop({ href: pngUrl });\n        });\n        // const pngUrl = canvasEl.toDataURL('image/png');\n        // this.export.pngButton.prop({ href: pngUrl });\n        const svgStr = this.codeSvg\n          .outerSVG()\n          .replace('<svg', '<svg xmlns=\"http://www.w3.org/2000/svg\"');\n        const svgBlob = new Blob([svgStr]);\n        const svgUrl = URL.createObjectURL(svgBlob);\n        this.export.svgButton.prop({ href: svgUrl });\n      },\n    };\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-share-tab').on('click', () => {\n      this.export.updateExportLink();\n    });\n    this.export.asciiGrid.on('click', () => {\n      const ap = this.code.toAsciiPiet(false);\n      this.export.shareContent.val(ap);\n      adjustHeight.call(this.export.shareContent.get(0));\n    });\n    this.export.asciiMini.on('click', () => {\n      const ap = this.code.toAsciiPiet(true);\n      this.export.shareContent.val(ap);\n      adjustHeight.call(this.export.shareContent.get(0));\n    });\n    const getPermalink = () => {\n      // code, sep, lim, input, esc\n      const exportObj = {\n        code: this.code.code,\n        sep: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-sep').val(),\n        lim: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-limit').val(),\n        esc: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-escape').prop('checked'),\n        input: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input').val(),\n      };\n      this.export.shareContent.val(JSON.stringify(exportObj));\n      const compressed = pako__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deflate(JSON.stringify(exportObj));\n      const b64 = js_base64__WEBPACK_IMPORTED_MODULE_3__.Base64.fromUint8Array(compressed, true);\n      return `${document.URL.split('#')[0]}#${b64}`;\n    };\n    this.export.permButton.on('click', () => {\n      const permalink = getPermalink();\n      this.export.shareContent.val(permalink);\n      adjustHeight.call(this.export.shareContent.get(0));\n    });\n    this.export.golfButton.on('click', () => {\n      const asciiPiet = this.code.toAsciiPiet(true);\n      const bytes = asciiPiet.length;\n      const codels = this.code.rows * this.code.cols;\n      const permalink = getPermalink();\n      const hash = cyrb53(permalink);\n      const postHeader = `# [Piet] + [ascii-piet], ${bytes} bytes (${this.code.rows}\\xd7${this.code.cols}=${codels} codels)`;\n      const postMain = ['```none', asciiPiet, '```'].join('\\n');\n      const postFooter = `[Try Piet online!][piet-${hash}]`;\n      const links = [\n        '[Piet]: https://www.dangermouse.net/esoteric/piet.html',\n        '[ascii-piet]: https://github.com/dloscutoff/ascii-piet',\n        `[piet-${hash}]: ${permalink}`,\n      ].join('\\n');\n      const post = [postHeader, postMain, postFooter, links].join('\\n\\n');\n      this.export.shareContent.val(post);\n      adjustHeight.call(this.export.shareContent.get(0));\n    });\n\n    this.import = {\n      fileButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#import-file'),\n      fileInputButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#import-file-input'),\n      asciiButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#import-ascii'),\n      asciiText: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#share-content'),\n    };\n    this.import.asciiButton.on('click', () => {\n      const ascii = this.import.asciiText.val();\n      const codeGrid = _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].fromAsciiPiet(ascii);\n      console.log(codeGrid);\n      this.code.replaceCode(codeGrid);\n      this.codeRects.update();\n      this.export.updateExportLink();\n    });\n    this.import.fileButton.on('click', () =>\n      this.import.fileInputButton.trigger('click'),\n    );\n    this.import.fileInputButton.on('change', e => {\n      const file = e.target.files[0];\n      const url = URL.createObjectURL(file);\n      const img = new Image();\n      img.onload = () => {\n        URL.revokeObjectURL(url);\n        let width = img.naturalWidth;\n        let height = img.naturalHeight;\n        const canvas = jquery__WEBPACK_IMPORTED_MODULE_1___default()('<canvas/>');\n        canvas.prop({ width, height });\n        const canvasEl = canvas.get(0);\n        const ctx = canvasEl.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        const imdata = ctx.getImageData(0, 0, width, height);\n        const codeGrid = [];\n        if (width === 0 || height === 0) {\n          codeGrid.push([19]); // fallback to single black cell\n          width = 1;\n          height = 1;\n        } else {\n          for (let r = 0; r < height; r += 1) {\n            codeGrid.push([]);\n            for (let c = 0; c < width; c += 1) {\n              const idx = r * width * 4 + c * 4;\n              const color =\n                _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].colorvec2color[imdata.data.slice(idx, idx + 4)] ?? 19;\n              codeGrid[r].push(color);\n            }\n          }\n        }\n        const codeGrid2 = _piet_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].compress(codeGrid, width, height);\n        this.code.replaceCode(codeGrid2);\n        this.codeRects.update();\n        this.export.updateExportLink();\n      };\n      img.src = url;\n      e.target.value = '';\n    });\n\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-debug-tab').on('click', () => {\n      const codeGrid = this.code.code;\n      const startEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-start');\n      const stepEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-step');\n      const resetEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-reset');\n      const inputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-input');\n      const outputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-output');\n      const stackEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-stack');\n      const statusEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-status');\n      const dpEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-dp');\n      const ccEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-cc');\n      const cmdEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-cmd');\n      const speedEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-speed');\n      const runEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-run');\n      const pauseEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-pause');\n      startEl.off('click');\n      stepEl.off('click');\n      resetEl.off('click');\n      runEl.off('click');\n      pauseEl.off('click');\n      let animationId;\n      let animationStartTime;\n      let animationSpeed;\n      let animationSteps;\n      let origInput;\n      let arrowEl;\n      const updateUi = () => {\n        const { dp, cc, input, output, stack, lastCmd } = this.runner;\n        const dpDesc = _piet_run_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].dpText[dp];\n        const ccDesc = _piet_run_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].ccText[dp * 2 + cc];\n        dpEl.text(`${dp} (${dpDesc})`);\n        ccEl.text(`${cc} (${ccDesc})`);\n        inputEl.val(input);\n        outputEl.val(output);\n        const stackStr = stack.map(n => n.toString()).join(' ');\n        stackEl.val(stackStr);\n        adjustHeight.call(inputEl.get(0));\n        adjustHeight.call(outputEl.get(0));\n        adjustHeight.call(stackEl.get(0));\n        cmdEl.text(lastCmd);\n      };\n      startEl.on('click', () => {\n        outputEl.val('');\n        adjustHeight.call(outputEl.get(0));\n        if (codeGrid[0][0] === 19) {\n          statusEl.text('Error: Starting black cell detected');\n          dpEl.text('N/A');\n          ccEl.text('N/A');\n        } else {\n          origInput = inputEl.val();\n          this.runner = new _piet_run_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](codeGrid, origInput);\n          console.log(this.runner);\n          startEl.prop('disabled', true);\n          stepEl.prop('disabled', false);\n          resetEl.prop('disabled', false);\n          runEl.prop('disabled', false);\n          inputEl.prop('readonly', true);\n          statusEl.text('Running');\n          updateUi();\n          arrowEl = this.codeSvg.polygon(20, 5, 20, 25, 30, 15);\n          arrowEl.attr({ fill: 'gray' });\n          const mat = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().matrix().translate(\n            this.runner.curC * 30,\n            this.runner.curR * 30,\n          );\n          arrowEl.transform(mat);\n        }\n      });\n      stepEl.on('click', () => {\n        console.log('step');\n        statusEl.text('Running');\n        this.runner.step();\n        updateUi();\n        const mat = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().matrix()\n          .translate(this.runner.curC * 30, this.runner.curR * 30)\n          .rotate(this.runner.dp * 90, 15, 15);\n        arrowEl.transform(mat);\n        if (this.runner.finished) {\n          stepEl.prop('disabled', true);\n          statusEl.text('Finished');\n          arrowEl.remove();\n        }\n      });\n      runEl.on('click', () => {\n        animationSpeed = Number(speedEl.val());\n        if (\n          Number.isSafeInteger(animationSpeed) &&\n          animationSpeed > 0 &&\n          animationSpeed <= 100\n        ) {\n          runEl.prop('disabled', true);\n          pauseEl.prop('disabled', false);\n          stepEl.prop('disabled', true);\n          statusEl.text('Running');\n          animationStartTime = performance.now();\n          animationSteps = 0;\n          const updateFrame = time => {\n            animationId = requestAnimationFrame(updateFrame);\n            const timeElapsed = time - animationStartTime;\n            const nextSteps = Math.ceil((animationSpeed * timeElapsed) / 1000);\n            for (; animationSteps < nextSteps; animationSteps += 1) {\n              stepEl.trigger('click');\n              if (this.runner.finished) {\n                pauseEl.prop('disabled', true);\n                cancelAnimationFrame(animationId);\n                return;\n              }\n            }\n          };\n          animationId = requestAnimationFrame(updateFrame);\n        } else {\n          console.log('Invalid speed value');\n          statusEl.text('Invalid speed value. Allowed values: 1 - 100');\n        }\n      });\n      pauseEl.on('click', () => {\n        runEl.prop('disabled', false);\n        pauseEl.prop('disabled', true);\n        stepEl.prop('disabled', false);\n        cancelAnimationFrame(animationId);\n      });\n      resetEl.on('click', () => {\n        console.log('reset');\n        startEl.prop('disabled', false);\n        stepEl.prop('disabled', true);\n        resetEl.prop('disabled', true);\n        inputEl.prop('readonly', false);\n        inputEl.val(origInput);\n        adjustHeight.call(inputEl.get(0));\n        statusEl.text('N/A');\n        dpEl.text('N/A');\n        ccEl.text('N/A');\n        cmdEl.text('N/A');\n        if (arrowEl !== undefined) arrowEl.remove();\n      });\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-edit-tab, #nav-test-tab, #nav-explain-tab, #nav-share-tab').on(\n      'click',\n      () => {\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#debug-reset').trigger('click');\n      },\n    );\n\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-test-tab').on('click', () => {\n      const sepEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-sep');\n      const limitEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-limit');\n      const runEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-run');\n      const stopEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-stop');\n      const escapeEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-escape');\n      const statusEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-status');\n      const inputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input');\n      const outputEl = jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-output');\n\n      runEl.on('click', () => {\n        const sep = sepEl.val() === '' ? '---' : sepEl.val();\n        sepEl.val(sep);\n        const limitVal = Number(limitEl.val());\n        const limit =\n          Number.isSafeInteger(limitVal) && limitVal > 0 ? limitVal : 10000;\n        limitEl.val(limit);\n        runEl.prop('disabled', true);\n        stopEl.prop('disabled', false);\n        inputEl.prop('readonly', true);\n        const doEscape = escapeEl.prop('checked');\n        let inputs = inputEl.val().split(`\\n${sep}\\n`);\n        if (doEscape) {\n          inputs = inputs.map(s =>\n            s.replace(\n              /\\\\[0'\"\\\\nrvtbf]|\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}|\\\\x[0-9a-fA-F]{2}/g,\n              match => {\n                if (match.startsWith('\\\\u') || match.startsWith('\\\\x')) {\n                  const hex = match.startsWith('\\\\u{')\n                    ? match.slice(3, -1)\n                    : match.slice(2);\n                  return String.fromCodePoint(Number.parseInt(hex, 16));\n                }\n                return {\n                  '\\\\0': '\\0',\n                  \"\\\\'\": \"'\",\n                  '\\\\\"': '\"',\n                  '\\\\\\\\': '\\\\',\n                  '\\\\n': '\\n',\n                  '\\\\r': '\\r',\n                  '\\\\v': '\\v',\n                  '\\\\t': '\\t',\n                  '\\\\b': '\\b',\n                  '\\\\f': '\\f',\n                }[match];\n              },\n            ),\n          );\n        }\n        const runners = inputs.map(input => new _piet_run_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.code.code, input));\n        const stepsPerRunner = runners.map(() => 0);\n        let alive = runners.length;\n        const steps = 10; // steps per ms\n        const startTime = performance.now();\n        let stepsRun = 0;\n        let runId;\n        statusEl.text('Running');\n        const update = time => {\n          if (alive === 0) {\n            stopEl.trigger('click');\n            return;\n          }\n          runId = requestAnimationFrame(update);\n          const totalSteps = Math.ceil(steps * (time - startTime));\n          const singleSteps = Math.round((totalSteps - stepsRun) / alive);\n          runners.forEach((runner, i) => {\n            if (runner.finished) return;\n            for (let s = 0; s < singleSteps; s += 1) {\n              runner.step();\n              stepsRun += 1;\n              stepsPerRunner[i] += 1;\n              if (stepsPerRunner[i] >= limit) {\n                runner.finished = true;\n              }\n              if (runner.finished) {\n                alive -= 1;\n                break;\n              }\n            }\n          });\n        };\n        stopEl.one('click', () => {\n          cancelAnimationFrame(runId);\n          const outputs = runners.map(runner => runner.output);\n          runners.forEach((runner, i) => {\n            if (!runner.finished) {\n              outputs[i] += '\\n** Aborted';\n            } else if (stepsPerRunner[i] >= limit) {\n              outputs[i] += '\\n** Exceeded Step Limit';\n            }\n          });\n          outputEl.val(outputs.join('\\n---\\n'));\n          adjustHeight.call(outputEl.get(0));\n          statusEl.text('Finished');\n          stopEl.prop('disabled', true);\n          runEl.prop('disabled', false);\n          inputEl.prop('readonly', false);\n        });\n        runId = requestAnimationFrame(update);\n      });\n    });\n\n    // explained: push[num] pop[x] [+] [-] [*] [/] [%] [!] [>] [D]P+ [C]C+\n    // [d]up [r]oll [I]nN [i]nC [O]utN [o]utC\n    this.codeSvg\n      .circle(0, 0, 5)\n      .attr({ fill: 'gray', stroke: 'none' })\n      .marker(-5, -5, 10, 10, 0, 0)\n      .attr({ id: 'mark2' });\n    this.codeSvg\n      .polygon([0, -10, 0, 10, 10, 0])\n      .attr({ fill: 'black', stroke: 'none' })\n      .marker(0, -10, 10, 20, 10, 0)\n      .attr({ id: 'mark1' });\n    // path[r][c] = [...[fromr, fromc, tor, toc, cmd]]\n    // pathG[r][c] = svg group that contains all line segments\n    this.explain = {\n      path: [[]],\n      pathG: [[]],\n      initPath: () => {\n        this.explain.path = this.code.code.map(row => row.map(() => []));\n        this.explain.pathG = this.code.code.map(row =>\n          row.map(() => this.codeSvg.g()),\n        );\n        this.explain.runner = new _piet_run_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"](this.code.code, '');\n      },\n      destroyPath: () => {\n        this.explain.pathG.forEach(row => row.forEach(g => g.remove()));\n      },\n      drawCmd: (groupEl, prevRow, prevCol, nextRow, nextCol, cmd, isFirst) => {\n        const x1 = prevCol * 30 + 15;\n        const y1 = prevRow * 30 + 15;\n        const x2 = nextCol * 30 + 15;\n        const y2 = nextRow * 30 + 15;\n        const line = groupEl.line(x1, y1, x2, y2);\n        // line.attr({ stroke: 'black', 'marker-end': 'url(#mark2)' });\n        line.attr({ stroke: 'black' });\n        line.node.style['marker-end'] = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().url('mark2');\n        if (isFirst) {\n          line.node.style['marker-start'] = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().url('mark1');\n          // line.attr({ 'marker-start': 'url(#mark1)' });\n        } else {\n          line.node.style['marker-start'] = snapsvg__WEBPACK_IMPORTED_MODULE_0___default().url('mark2');\n          // line.attr({ 'marker-start': 'url(#mark2)' });\n        }\n        if (cmd !== '') {\n          let [xt, yt] = [0, 0];\n          if (nextCol === prevCol + 1) {\n            [xt, yt] = [prevCol * 30 + 22, prevRow * 30 + 8];\n          } else if (nextRow === prevRow + 1) {\n            [xt, yt] = [prevCol * 30 + 22, prevRow * 30 + 22];\n          } else if (nextCol === prevCol - 1) {\n            [xt, yt] = [prevCol * 30 + 8, prevRow * 30 + 22];\n          } else if (nextRow === prevRow - 1) {\n            [xt, yt] = [prevCol * 30 + 8, prevRow * 30 + 8];\n          }\n          const cmdText = groupEl.text(xt, yt, cmd);\n          const prevCode = this.code.code[prevRow][prevCol];\n          cmdText.attr({\n            'text-anchor': 'middle',\n            'dominant-baseline': 'middle',\n            'pointer-events': 'none',\n            'font-size': '10px',\n            fill: prevCode === 10 || prevCode === 16 ? 'white' : 'black',\n          });\n        }\n      },\n      drawDash: (groupEl, prevRow, prevCol, nextRow, nextCol) => {\n        const x1 = prevCol * 30 + 15;\n        const y1 = prevRow * 30 + 15;\n        const x2 = nextCol * 30 + 15;\n        const y2 = nextRow * 30 + 15;\n        const line = groupEl.line(x1, y1, x2, y2);\n        line.attr({ stroke: 'black', 'stroke-dasharray': '4' });\n      },\n      addPath: (row, col, dp, cc) => {\n        const path = this.explain.runner.dryRun(row, col, dp, cc);\n        this.explain.path[row][col] = path;\n        let [curRow, curCol] = [row, col];\n        const g = this.explain.pathG[row][col];\n        path.forEach(([prevRow, prevCol, nextRow, nextCol, cmd], i) => {\n          // draw commands, and dashed lines on big area jumps\n          if (curRow !== prevRow || curCol !== prevCol) {\n            this.explain.drawDash(g, curRow, curCol, prevRow, prevCol);\n          }\n          this.explain.drawCmd(\n            g,\n            prevRow,\n            prevCol,\n            nextRow,\n            nextCol,\n            cmd,\n            i === 0,\n          );\n          [curRow, curCol] = [nextRow, nextCol];\n        });\n      },\n      removePath: (row, col) => {\n        this.explain.path[row][col].length = 0;\n        this.explain.pathG[row][col]\n          .children()\n          .forEach(child => child.remove());\n      },\n      togglePath: (row, col, dp, cc) => {\n        if (this.explain.path[row][col].length === 0) {\n          this.explain.addPath(row, col, dp, cc);\n        } else {\n          this.explain.removePath(row, col);\n        }\n      },\n      exportButton: jquery__WEBPACK_IMPORTED_MODULE_1___default()('#export-explained'),\n      exportUrl: undefined,\n      updateExportLink: () => {\n        if (this.explain.exportUrl !== undefined) {\n          URL.revokeObjectURL(this.explain.exportUrl);\n        }\n        const svgStr = this.codeSvg\n          .outerSVG()\n          .replace('<svg', '<svg xmlns=\"http://www.w3.org/2000/svg\"');\n        const svgBlob = new Blob([svgStr]);\n        const svgUrl = URL.createObjectURL(svgBlob);\n        this.explain.exportButton.prop({ href: svgUrl });\n        this.explain.exportUrl = svgUrl;\n      },\n    };\n\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-explain-tab').on('click', () => {\n      // on svg click: if there's already a path, remove it;\n      // otherwise add a new path starting there\n      this.codeSvg.undrag();\n      this.codeSvg.unclick();\n      this.explain.initPath();\n      this.codeSvg.click(e => {\n        const curR = ((e.offsetY - 3) / 30) | 0;\n        const curC = ((e.offsetX - 3) / 30) | 0;\n        if (\n          curR >= 0 &&\n          curR < this.code.rows &&\n          curC >= 0 &&\n          curC < this.code.cols &&\n          this.code.code[curR][curC] !== 19\n        ) {\n          let dp = 0;\n          if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-0').prop('checked')) {\n            dp = 0;\n          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-1').prop('checked')) {\n            dp = 1;\n          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-2').prop('checked')) {\n            dp = 2;\n          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-dp-3').prop('checked')) {\n            dp = 3;\n          }\n          let cc = 0;\n          if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-cc-0').prop('checked')) {\n            cc = 0;\n          } else if (jquery__WEBPACK_IMPORTED_MODULE_1___default()('#explain-cc-1').prop('checked')) {\n            cc = 1;\n          }\n          this.explain.togglePath(curR, curC, dp, cc);\n          // console.log(this.explain);\n          this.explain.updateExportLink();\n        }\n      });\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-debug-tab, #nav-test-tab, #nav-share-tab').on('click', () => {\n      this.codeSvg.undrag();\n      this.codeSvg.unclick();\n      this.explain.destroyPath();\n    });\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-edit-tab').on('click', () => {\n      this.explain.destroyPath();\n    });\n\n    const loadFromPermalink = () => {\n      const hash = document.location.hash.slice(1);\n      const compressed = js_base64__WEBPACK_IMPORTED_MODULE_3__.Base64.toUint8Array(hash);\n      try {\n        const exportJSON = pako__WEBPACK_IMPORTED_MODULE_2__[\"default\"].inflate(compressed, { to: 'string' });\n        const exportObj = JSON.parse(exportJSON);\n        // ensure that the obj has all five fields\n        if (\n          exportObj.code === undefined ||\n          exportObj.sep === undefined ||\n          exportObj.lim === undefined ||\n          exportObj.esc === undefined ||\n          exportObj.input === undefined\n        ) {\n          console.log(exportObj);\n          throw new TypeError('Decoded object does not have necessary fields');\n        }\n        this.code.replaceCode(exportObj.code);\n        this.codeRects.update();\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-sep').val(exportObj.sep);\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-limit').val(exportObj.lim);\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-escape').val(exportObj.esc);\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input').val(exportObj.input);\n        jquery__WEBPACK_IMPORTED_MODULE_1___default()('#nav-test-tab').trigger('click');\n        setTimeout(() => adjustHeight.call(jquery__WEBPACK_IMPORTED_MODULE_1___default()('#test-input').get(0)), 1000);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    if (document.location.hash !== '') {\n      loadFromPermalink();\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZLFNBQVMsNkNBQUM7QUFDdEI7QUFDQSxZQUFZLFNBQVMsNkNBQUM7QUFDdEI7QUFDQSxZQUFZLFNBQVMsNkNBQUM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2Q0FBQztBQUNmO0FBQ0EsWUFBWSxTQUFTLDZDQUFDO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsSUFBSSw2Q0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLDZDQUFDO0FBQ0w7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSx5QkFBeUIsMERBQW1CO0FBQzVDO0FBQ0EsMkJBQTJCLG9EQUFZLGVBQWUsY0FBYztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2Q0FBQztBQUNULFFBQVEsNkNBQUM7QUFDVCxRQUFRLDZDQUFDO0FBQ1QsUUFBUSw2Q0FBQztBQUNULFFBQVEsNkNBQUM7QUFDVCwyQ0FBMkMsNkNBQUM7QUFDNUMsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waWV0Ly4vc3JjL3BpZXQtdWkuanM/YmI4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU25hcCBmcm9tICdzbmFwc3ZnJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgcGFrbyBmcm9tICdwYWtvJztcbmltcG9ydCB7IEJhc2U2NCB9IGZyb20gJ2pzLWJhc2U2NCc7XG5pbXBvcnQgUGlldCBmcm9tICcuL3BpZXQuanMnO1xuaW1wb3J0IFBpZXRSdW4gZnJvbSAnLi9waWV0LXJ1bi5qcyc7XG5cbmZ1bmN0aW9uIGFkanVzdEhlaWdodCgpIHtcbiAgdGhpcy5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gIHRoaXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5zY3JvbGxIZWlnaHR9cHhgO1xufVxuXG4vLyBjeXJiNTMgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTIxNzE0ODAvNDU5NTkwNFxuZnVuY3Rpb24gY3lyYjUzKHN0ciwgc2VlZCA9IDApIHtcbiAgbGV0IGgxID0gMHhkZWFkYmVlZiBeIHNlZWQ7XG4gIGxldCBoMiA9IDB4NDFjNmNlNTcgXiBzZWVkO1xuICBbLi4uc3RyXS5mb3JFYWNoKGMgPT4ge1xuICAgIGNvbnN0IGNoID0gYy5jaGFyQ29kZUF0KCk7XG4gICAgaDEgPSBNYXRoLmltdWwoaDEgXiBjaCwgMjY1NDQzNTc2MSk7XG4gICAgaDIgPSBNYXRoLmltdWwoaDIgXiBjaCwgMTU5NzMzNDY3Nyk7XG4gIH0pO1xuICBoMSA9XG4gICAgTWF0aC5pbXVsKGgxIF4gKGgxID4+PiAxNiksIDIyNDY4MjI1MDcpIF5cbiAgICBNYXRoLmltdWwoaDIgXiAoaDIgPj4+IDEzKSwgMzI2NjQ4OTkwOSk7XG4gIGgyID1cbiAgICBNYXRoLmltdWwoaDIgXiAoaDIgPj4+IDE2KSwgMjI0NjgyMjUwNykgXlxuICAgIE1hdGguaW11bChoMSBeIChoMSA+Pj4gMTMpLCAzMjY2NDg5OTA5KTtcbiAgcmV0dXJuIGAke2gxfSR7aDJ9YDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGlldFVJIHtcbiAgY29uc3RydWN0b3IoY29kZSkge1xuICAgICQoJ3RleHRhcmVhJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uIHNldEF0dHIoKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICdzdHlsZScsXG4gICAgICAgICAgYGhlaWdodDoke3RoaXMuc2Nyb2xsSGVpZ2h0fXB4O292ZXJmbG93LXk6aGlkZGVuO2AsXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLm9uKCdpbnB1dCcsIGFkanVzdEhlaWdodCk7XG5cbiAgICB0aGlzLnBhbGV0dGVTdmcgPSBTbmFwKCcjc3ZnLXBhbGV0dGUnKTtcbiAgICB0aGlzLnBhbGV0dGVSZWN0cyA9IFtdO1xuICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzID0gW107XG4gICAgZm9yIChsZXQgbGlnaHQgPSAwOyBsaWdodCA8IDM7IGxpZ2h0ICs9IDEpIHtcbiAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzLnB1c2goW10pO1xuICAgICAgZm9yIChsZXQgaHVlID0gMDsgaHVlIDwgNjsgaHVlICs9IDEpIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSBsaWdodCAqIDYgKyBodWU7XG4gICAgICAgIGNvbnN0IGN1clJlY3QgPSB0aGlzLnBhbGV0dGVTdmcuZWwoJ3JlY3QnLCB7XG4gICAgICAgICAgd2lkdGg6IDYwLFxuICAgICAgICAgIGhlaWdodDogMzAsXG4gICAgICAgICAgeDogNjAgKiBodWUsXG4gICAgICAgICAgeTogMzAgKiBsaWdodCxcbiAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wYWxldHRlUmVjdHMucHVzaChjdXJSZWN0KTtcbiAgICAgICAgY29uc3QgY3VyQ21kID0gdGhpcy5wYWxldHRlU3ZnXG4gICAgICAgICAgLnRleHQoNjAgKiBodWUgKyAzMCwgMzAgKiBsaWdodCArIDE1LCAnJylcbiAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnbWlkZGxlJyxcbiAgICAgICAgICAgICdkb21pbmFudC1iYXNlbGluZSc6ICdtaWRkbGUnLFxuICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLFxuICAgICAgICAgIH0pO1xuICAgICAgICBpZiAoaHVlID09PSA0ICYmIGxpZ2h0ID49IDEpIHtcbiAgICAgICAgICBjdXJDbWQuYXR0cih7IGZpbGw6ICd3aGl0ZScgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VyQ21kLmF0dHIoeyBmaWxsOiAnYmxhY2snIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzW2xpZ2h0XS5wdXNoKGN1ckNtZCk7XG4gICAgICAgIHRoaXMucGFsZXR0ZVN2Zy5nKGN1clJlY3QsIGN1ckNtZCkuY2xpY2soZSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coY29sb3IpO1xuICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2xvcihjb2xvcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBjb2xvciA9IDE4OyBjb2xvciA8PSAxOTsgY29sb3IgKz0gMSkge1xuICAgICAgY29uc3QgY3VyUmVjdCA9IHRoaXMucGFsZXR0ZVN2Z1xuICAgICAgICAuZWwoJ3JlY3QnLCB7XG4gICAgICAgICAgd2lkdGg6IDE4MCxcbiAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgIHg6IDE4MCAqIChjb2xvciAtIDE4KSxcbiAgICAgICAgICB5OiA5MCxcbiAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICB9KVxuICAgICAgICAuY2xpY2soZSA9PiB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coY29sb3IpO1xuICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2xvcihjb2xvcik7XG4gICAgICAgIH0pO1xuICAgICAgdGhpcy5wYWxldHRlUmVjdHMucHVzaChjdXJSZWN0KTtcbiAgICB9XG4gICAgdGhpcy5jb2RlU3ZnID0gU25hcCgnI3N2Zy1jb2RlJyk7XG4gICAgdGhpcy5jb2RlID0gbmV3IFBpZXQoY29kZSk7XG4gICAgY29uc3QgY29kZVJlY3QgPSB0aGlzLmNvZGVTdmdcbiAgICAgIC5lbCgncmVjdCcsIHsgd2lkdGg6IDMwLCBoZWlnaHQ6IDMwIH0pXG4gICAgICAudG9EZWZzKCk7XG4gICAgdGhpcy5jb2RlUmVjdHMgPSBbW11dO1xuICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGxldCBwcmV2Um93cyA9IHRoaXMuY29kZVJlY3RzLmxlbmd0aDtcbiAgICAgIGxldCBwcmV2Q29scyA9IHRoaXMuY29kZVJlY3RzWzBdLmxlbmd0aDtcbiAgICAgIHdoaWxlIChwcmV2Q29scyA8IHRoaXMuY29kZS5jb2xzKSB7XG4gICAgICAgIGNvbnN0IGMgPSBwcmV2Q29scztcbiAgICAgICAgdGhpcy5jb2RlUmVjdHMuZm9yRWFjaCgocm93LCByKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3UmVjdCA9IHRoaXMuY29kZVN2Zy51c2UoY29kZVJlY3QpO1xuICAgICAgICAgIG5ld1JlY3QuYXR0cih7XG4gICAgICAgICAgICB4OiAzMCAqIGMsXG4gICAgICAgICAgICB5OiAzMCAqIHIsXG4gICAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1t0aGlzLmNvZGUuY29kZVtyXVtjXV0uY29sb3Jjb2RlLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJvdy5wdXNoKG5ld1JlY3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJldkNvbHMgKz0gMTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChwcmV2Q29scyA+IHRoaXMuY29kZS5jb2xzKSB7XG4gICAgICAgIHRoaXMuY29kZVJlY3RzLmZvckVhY2gocm93ID0+IHJvdy5wb3AoKS5yZW1vdmUoKSk7XG4gICAgICAgIHByZXZDb2xzIC09IDE7XG4gICAgICB9XG4gICAgICB3aGlsZSAocHJldlJvd3MgPCB0aGlzLmNvZGUucm93cykge1xuICAgICAgICBjb25zdCByID0gcHJldlJvd3M7XG4gICAgICAgIGNvbnN0IG5ld1JvdyA9IHRoaXMuY29kZS5jb2RlW3JdLm1hcCgoY29sb3IsIGMpID0+IHtcbiAgICAgICAgICBjb25zdCBjdXJSZWN0ID0gdGhpcy5jb2RlU3ZnLnVzZShjb2RlUmVjdCk7XG4gICAgICAgICAgcmV0dXJuIGN1clJlY3QuYXR0cih7XG4gICAgICAgICAgICB4OiAzMCAqIGMsXG4gICAgICAgICAgICB5OiAzMCAqIHIsXG4gICAgICAgICAgICBmaWxsOiBQaWV0LmNvbG9yc1tjb2xvcl0uY29sb3Jjb2RlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb2RlUmVjdHMucHVzaChuZXdSb3cpO1xuICAgICAgICBwcmV2Um93cyArPSAxO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHByZXZSb3dzID4gdGhpcy5jb2RlLnJvd3MpIHtcbiAgICAgICAgdGhpcy5jb2RlUmVjdHMucG9wKCkuZm9yRWFjaChyZWN0ID0+IHJlY3QucmVtb3ZlKCkpO1xuICAgICAgICBwcmV2Um93cyAtPSAxO1xuICAgICAgfVxuICAgICAgdGhpcy5jb2RlUmVjdHMuZm9yRWFjaCgocm93LCByKSA9PiB7XG4gICAgICAgIHJvdy5mb3JFYWNoKChyZWN0LCBjKSA9PiB7XG4gICAgICAgICAgcmVjdC5hdHRyKHsgZmlsbDogUGlldC5jb2xvcnNbdGhpcy5jb2RlLmNvZGVbcl1bY11dLmNvbG9yY29kZSB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29kZVN2Zy5hdHRyKHtcbiAgICAgICAgd2lkdGg6IDMwICogdGhpcy5jb2RlLmNvbHMgKyA4LFxuICAgICAgICBoZWlnaHQ6IDMwICogdGhpcy5jb2RlLnJvd3MgKyA4LFxuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLmNvZGVSZWN0cy51cGRhdGUoKTtcbiAgICB0aGlzLmVkaXQgPSB7XG4gICAgICBtb2RlOiAnd3JpdGUnLFxuICAgICAgY29sb3I6IDAsXG4gICAgICBzZWxlY3RDb2xvcjogY2xyID0+IHtcbiAgICAgICAgdGhpcy5wYWxldHRlUmVjdHNbY2xyXS5hdHRyKHtcbiAgICAgICAgICBzdHJva2U6ICdncmF5JyxcbiAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogNixcbiAgICAgICAgICB4OiAnKz0zJyxcbiAgICAgICAgICB5OiAnKz0zJyxcbiAgICAgICAgICB3aWR0aDogJy09NicsXG4gICAgICAgICAgaGVpZ2h0OiAnLT02JyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjbHIgPCAxOCkge1xuICAgICAgICAgIGNvbnN0IGN1ckh1ZSA9IGNsciAlIDY7XG4gICAgICAgICAgY29uc3QgY3VyTGlnaHQgPSAoY2xyIC8gNikgfCAwO1xuICAgICAgICAgIGZvciAobGV0IGxpZ2h0T2ZmID0gMDsgbGlnaHRPZmYgPCAzOyBsaWdodE9mZiArPSAxKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBodWVPZmYgPSAwOyBodWVPZmYgPCA2OyBodWVPZmYgKz0gMSkge1xuICAgICAgICAgICAgICBjb25zdCBzID0gUGlldC5jb21tYW5kVGV4dFtsaWdodE9mZl1baHVlT2ZmXTtcbiAgICAgICAgICAgICAgY29uc3QgbmV4dEh1ZSA9IChjdXJIdWUgKyBodWVPZmYpICUgNjtcbiAgICAgICAgICAgICAgY29uc3QgbmV4dExpZ2h0ID0gKGN1ckxpZ2h0ICsgbGlnaHRPZmYpICUgMztcbiAgICAgICAgICAgICAgdGhpcy5wYWxldHRlT3ZlcmxheXNbbmV4dExpZ2h0XVtuZXh0SHVlXS5ub2RlLnRleHRDb250ZW50ID0gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgbGlnaHQgPSAwOyBsaWdodCA8IDM7IGxpZ2h0ICs9IDEpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGh1ZSA9IDA7IGh1ZSA8IDY7IGh1ZSArPSAxKSB7XG4gICAgICAgICAgICAgIHRoaXMucGFsZXR0ZU92ZXJsYXlzW2xpZ2h0XVtodWVdLm5vZGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1bnNlbGVjdENvbG9yOiBjbHIgPT4ge1xuICAgICAgICB0aGlzLnBhbGV0dGVSZWN0c1tjbHJdLmF0dHIoe1xuICAgICAgICAgIHN0cm9rZTogdW5kZWZpbmVkLFxuICAgICAgICAgICdzdHJva2Utd2lkdGgnOiB1bmRlZmluZWQsXG4gICAgICAgICAgeDogJy09MycsXG4gICAgICAgICAgeTogJy09MycsXG4gICAgICAgICAgd2lkdGg6ICcrPTYnLFxuICAgICAgICAgIGhlaWdodDogJys9NicsXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVwZGF0ZUNvbG9yOiBjbHIgPT4ge1xuICAgICAgICBjb25zdCBwcmV2Q29sb3IgPSB0aGlzLmVkaXQuY29sb3I7XG4gICAgICAgIHRoaXMuZWRpdC5jb2xvciA9IGNscjtcbiAgICAgICAgdGhpcy5lZGl0LnVuc2VsZWN0Q29sb3IocHJldkNvbG9yKTtcbiAgICAgICAgdGhpcy5lZGl0LnNlbGVjdENvbG9yKGNscik7XG4gICAgICB9LFxuICAgICAgdXBkYXRlQ29kZUNvbG9yMTogKHIsIGMsIGNscikgPT4ge1xuICAgICAgICB0aGlzLmNvZGUuY29kZVtyXVtjXSA9IGNscjtcbiAgICAgICAgdGhpcy5jb2RlUmVjdHNbcl1bY10uYXR0cih7IGZpbGw6IFBpZXQuY29sb3JzW2Nscl0uY29sb3Jjb2RlIH0pO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHRoaXMuZWRpdC5zZWxlY3RDb2xvcigwKTtcblxuICAgIFsnbCcsICd1JywgJ3InLCAnZCddLmZvckVhY2goZGlyZWN0aW9uID0+IHtcbiAgICAgIFsncGx1cycsICdtaW51cyddLmZvckVhY2goYWN0aW9uID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBgI2dyaWQtJHtkaXJlY3Rpb259JHthY3Rpb259YDtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gJChpZCk7XG4gICAgICAgIGJ1dHRvbi5vbignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoYWN0aW9uID09PSAncGx1cycpIHtcbiAgICAgICAgICAgIHRoaXMuY29kZS5leHRlbmRDb2RlKGRpcmVjdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29kZS5zaHJpbmtDb2RlKGRpcmVjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuY29kZVJlY3RzLnVwZGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgd3JpdGVCdXR0b24gPSAkKCcjZ3JpZC13cml0ZScpO1xuICAgIGNvbnN0IHBpY2tCdXR0b24gPSAkKCcjZ3JpZC1waWNrJyk7XG4gICAgd3JpdGVCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb2RlU3ZnLnVuY2xpY2soKTtcbiAgICAgIHRoaXMuY29kZVN2Zy5kcmFnKFxuICAgICAgICAoZHgsIGR5LCB4LCB5LCBlKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VyUiA9ICgoZS5vZmZzZXRZIC0gMykgLyAzMCkgfCAwO1xuICAgICAgICAgIGNvbnN0IGN1ckMgPSAoKGUub2Zmc2V0WCAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjdXJSID49IDAgJiZcbiAgICAgICAgICAgIGN1clIgPCB0aGlzLmNvZGUucm93cyAmJlxuICAgICAgICAgICAgY3VyQyA+PSAwICYmXG4gICAgICAgICAgICBjdXJDIDwgdGhpcy5jb2RlLmNvbHNcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdC51cGRhdGVDb2RlQ29sb3IxKGN1clIsIGN1ckMsIHRoaXMuZWRpdC5jb2xvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoeCwgeSwgZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGN1clIgPSAoKGUub2Zmc2V0WSAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgICBjb25zdCBjdXJDID0gKChlLm9mZnNldFggLSAzKSAvIDMwKSB8IDA7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY3VyUiA+PSAwICYmXG4gICAgICAgICAgICBjdXJSIDwgdGhpcy5jb2RlLnJvd3MgJiZcbiAgICAgICAgICAgIGN1ckMgPj0gMCAmJlxuICAgICAgICAgICAgY3VyQyA8IHRoaXMuY29kZS5jb2xzXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXQudXBkYXRlQ29kZUNvbG9yMShjdXJSLCBjdXJDLCB0aGlzLmVkaXQuY29sb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge30sXG4gICAgICApO1xuICAgIH0pO1xuICAgIHBpY2tCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb2RlU3ZnLnVuZHJhZygpO1xuICAgICAgdGhpcy5jb2RlU3ZnLmNsaWNrKGUgPT4ge1xuICAgICAgICBjb25zdCBjdXJSID0gKChlLm9mZnNldFkgLSAzKSAvIDMwKSB8IDA7XG4gICAgICAgIGNvbnN0IGN1ckMgPSAoKGUub2Zmc2V0WCAtIDMpIC8gMzApIHwgMDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGN1clIgPj0gMCAmJlxuICAgICAgICAgIGN1clIgPCB0aGlzLmNvZGUucm93cyAmJlxuICAgICAgICAgIGN1ckMgPj0gMCAmJlxuICAgICAgICAgIGN1ckMgPCB0aGlzLmNvZGUuY29sc1xuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmVkaXQudXBkYXRlQ29sb3IodGhpcy5jb2RlLmNvZGVbY3VyUl1bY3VyQ10pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB3cml0ZUJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuICAgICQoJyNuYXYtZWRpdC10YWInKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB3cml0ZUJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5leHBvcnQgPSB7XG4gICAgICBwbmdCdXR0b246ICQoJyNleHBvcnQtcG5nJyksXG4gICAgICBzdmdCdXR0b246ICQoJyNleHBvcnQtc3ZnJyksXG4gICAgICBhc2NpaUdyaWQ6ICQoJyNleHBvcnQtYXNjaWktZ3JpZCcpLFxuICAgICAgYXNjaWlNaW5pOiAkKCcjZXhwb3J0LWFzY2lpLW1pbmknKSxcbiAgICAgIHNoYXJlQ29udGVudDogJCgnI3NoYXJlLWNvbnRlbnQnKSxcbiAgICAgIHBlcm1CdXR0b246ICQoJyNleHBvcnQtcGVybScpLFxuICAgICAgZ29sZkJ1dHRvbjogJCgnI2V4cG9ydC1nb2xmJyksXG4gICAgICB1cGRhdGVFeHBvcnRMaW5rOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcm93cywgY29scyB9ID0gdGhpcy5jb2RlO1xuICAgICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmNvZGUuY29kZTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gJCgnPGNhbnZhcy8+Jyk7XG4gICAgICAgIGNhbnZhcy5wcm9wKHsgd2lkdGg6IGNvbHMsIGhlaWdodDogcm93cyB9KTtcbiAgICAgICAgY29uc3QgY2FudmFzRWwgPSBjYW52YXMuZ2V0KDApO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXNFbC5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjb25zdCBpbWRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNvbHMsIHJvd3MpO1xuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHJvd3M7IHIgKz0gMSkge1xuICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgY29sczsgYyArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBpZHggPSAociAqIGNvbHMgKyBjKSAqIDQ7XG4gICAgICAgICAgICBjb25zdCB7IGNvbG9ydmVjIH0gPSBQaWV0LmNvbG9yc1ttYXRyaXhbcl1bY11dO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgaW1kYXRhLmRhdGFbaWR4ICsgaV0gPSBjb2xvcnZlY1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnB1dEltYWdlRGF0YShpbWRhdGEsIDAsIDApO1xuICAgICAgICBjYW52YXNFbC50b0Jsb2IoYmxvYiA9PiB7XG4gICAgICAgICAgY29uc3QgcG5nVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICB0aGlzLmV4cG9ydC5wbmdCdXR0b24ucHJvcCh7IGhyZWY6IHBuZ1VybCB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNvbnN0IHBuZ1VybCA9IGNhbnZhc0VsLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgICAgIC8vIHRoaXMuZXhwb3J0LnBuZ0J1dHRvbi5wcm9wKHsgaHJlZjogcG5nVXJsIH0pO1xuICAgICAgICBjb25zdCBzdmdTdHIgPSB0aGlzLmNvZGVTdmdcbiAgICAgICAgICAub3V0ZXJTVkcoKVxuICAgICAgICAgIC5yZXBsYWNlKCc8c3ZnJywgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiJyk7XG4gICAgICAgIGNvbnN0IHN2Z0Jsb2IgPSBuZXcgQmxvYihbc3ZnU3RyXSk7XG4gICAgICAgIGNvbnN0IHN2Z1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3ZnQmxvYik7XG4gICAgICAgIHRoaXMuZXhwb3J0LnN2Z0J1dHRvbi5wcm9wKHsgaHJlZjogc3ZnVXJsIH0pO1xuICAgICAgfSxcbiAgICB9O1xuICAgICQoJyNuYXYtc2hhcmUtdGFiJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5leHBvcnQudXBkYXRlRXhwb3J0TGluaygpO1xuICAgIH0pO1xuICAgIHRoaXMuZXhwb3J0LmFzY2lpR3JpZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBhcCA9IHRoaXMuY29kZS50b0FzY2lpUGlldChmYWxzZSk7XG4gICAgICB0aGlzLmV4cG9ydC5zaGFyZUNvbnRlbnQudmFsKGFwKTtcbiAgICAgIGFkanVzdEhlaWdodC5jYWxsKHRoaXMuZXhwb3J0LnNoYXJlQ29udGVudC5nZXQoMCkpO1xuICAgIH0pO1xuICAgIHRoaXMuZXhwb3J0LmFzY2lpTWluaS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBhcCA9IHRoaXMuY29kZS50b0FzY2lpUGlldCh0cnVlKTtcbiAgICAgIHRoaXMuZXhwb3J0LnNoYXJlQ29udGVudC52YWwoYXApO1xuICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwodGhpcy5leHBvcnQuc2hhcmVDb250ZW50LmdldCgwKSk7XG4gICAgfSk7XG4gICAgY29uc3QgZ2V0UGVybWFsaW5rID0gKCkgPT4ge1xuICAgICAgLy8gY29kZSwgc2VwLCBsaW0sIGlucHV0LCBlc2NcbiAgICAgIGNvbnN0IGV4cG9ydE9iaiA9IHtcbiAgICAgICAgY29kZTogdGhpcy5jb2RlLmNvZGUsXG4gICAgICAgIHNlcDogJCgnI3Rlc3Qtc2VwJykudmFsKCksXG4gICAgICAgIGxpbTogJCgnI3Rlc3QtbGltaXQnKS52YWwoKSxcbiAgICAgICAgZXNjOiAkKCcjdGVzdC1lc2NhcGUnKS5wcm9wKCdjaGVja2VkJyksXG4gICAgICAgIGlucHV0OiAkKCcjdGVzdC1pbnB1dCcpLnZhbCgpLFxuICAgICAgfTtcbiAgICAgIHRoaXMuZXhwb3J0LnNoYXJlQ29udGVudC52YWwoSlNPTi5zdHJpbmdpZnkoZXhwb3J0T2JqKSk7XG4gICAgICBjb25zdCBjb21wcmVzc2VkID0gcGFrby5kZWZsYXRlKEpTT04uc3RyaW5naWZ5KGV4cG9ydE9iaikpO1xuICAgICAgY29uc3QgYjY0ID0gQmFzZTY0LmZyb21VaW50OEFycmF5KGNvbXByZXNzZWQsIHRydWUpO1xuICAgICAgcmV0dXJuIGAke2RvY3VtZW50LlVSTC5zcGxpdCgnIycpWzBdfSMke2I2NH1gO1xuICAgIH07XG4gICAgdGhpcy5leHBvcnQucGVybUJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBwZXJtYWxpbmsgPSBnZXRQZXJtYWxpbmsoKTtcbiAgICAgIHRoaXMuZXhwb3J0LnNoYXJlQ29udGVudC52YWwocGVybWFsaW5rKTtcbiAgICAgIGFkanVzdEhlaWdodC5jYWxsKHRoaXMuZXhwb3J0LnNoYXJlQ29udGVudC5nZXQoMCkpO1xuICAgIH0pO1xuICAgIHRoaXMuZXhwb3J0LmdvbGZCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgYXNjaWlQaWV0ID0gdGhpcy5jb2RlLnRvQXNjaWlQaWV0KHRydWUpO1xuICAgICAgY29uc3QgYnl0ZXMgPSBhc2NpaVBpZXQubGVuZ3RoO1xuICAgICAgY29uc3QgY29kZWxzID0gdGhpcy5jb2RlLnJvd3MgKiB0aGlzLmNvZGUuY29scztcbiAgICAgIGNvbnN0IHBlcm1hbGluayA9IGdldFBlcm1hbGluaygpO1xuICAgICAgY29uc3QgaGFzaCA9IGN5cmI1MyhwZXJtYWxpbmspO1xuICAgICAgY29uc3QgcG9zdEhlYWRlciA9IGAjIFtQaWV0XSArIFthc2NpaS1waWV0XSwgJHtieXRlc30gYnl0ZXMgKCR7dGhpcy5jb2RlLnJvd3N9XFx4ZDcke3RoaXMuY29kZS5jb2xzfT0ke2NvZGVsc30gY29kZWxzKWA7XG4gICAgICBjb25zdCBwb3N0TWFpbiA9IFsnYGBgbm9uZScsIGFzY2lpUGlldCwgJ2BgYCddLmpvaW4oJ1xcbicpO1xuICAgICAgY29uc3QgcG9zdEZvb3RlciA9IGBbVHJ5IFBpZXQgb25saW5lIV1bcGlldC0ke2hhc2h9XWA7XG4gICAgICBjb25zdCBsaW5rcyA9IFtcbiAgICAgICAgJ1tQaWV0XTogaHR0cHM6Ly93d3cuZGFuZ2VybW91c2UubmV0L2Vzb3RlcmljL3BpZXQuaHRtbCcsXG4gICAgICAgICdbYXNjaWktcGlldF06IGh0dHBzOi8vZ2l0aHViLmNvbS9kbG9zY3V0b2ZmL2FzY2lpLXBpZXQnLFxuICAgICAgICBgW3BpZXQtJHtoYXNofV06ICR7cGVybWFsaW5rfWAsXG4gICAgICBdLmpvaW4oJ1xcbicpO1xuICAgICAgY29uc3QgcG9zdCA9IFtwb3N0SGVhZGVyLCBwb3N0TWFpbiwgcG9zdEZvb3RlciwgbGlua3NdLmpvaW4oJ1xcblxcbicpO1xuICAgICAgdGhpcy5leHBvcnQuc2hhcmVDb250ZW50LnZhbChwb3N0KTtcbiAgICAgIGFkanVzdEhlaWdodC5jYWxsKHRoaXMuZXhwb3J0LnNoYXJlQ29udGVudC5nZXQoMCkpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5pbXBvcnQgPSB7XG4gICAgICBmaWxlQnV0dG9uOiAkKCcjaW1wb3J0LWZpbGUnKSxcbiAgICAgIGZpbGVJbnB1dEJ1dHRvbjogJCgnI2ltcG9ydC1maWxlLWlucHV0JyksXG4gICAgICBhc2NpaUJ1dHRvbjogJCgnI2ltcG9ydC1hc2NpaScpLFxuICAgICAgYXNjaWlUZXh0OiAkKCcjc2hhcmUtY29udGVudCcpLFxuICAgIH07XG4gICAgdGhpcy5pbXBvcnQuYXNjaWlCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgYXNjaWkgPSB0aGlzLmltcG9ydC5hc2NpaVRleHQudmFsKCk7XG4gICAgICBjb25zdCBjb2RlR3JpZCA9IFBpZXQuZnJvbUFzY2lpUGlldChhc2NpaSk7XG4gICAgICBjb25zb2xlLmxvZyhjb2RlR3JpZCk7XG4gICAgICB0aGlzLmNvZGUucmVwbGFjZUNvZGUoY29kZUdyaWQpO1xuICAgICAgdGhpcy5jb2RlUmVjdHMudXBkYXRlKCk7XG4gICAgICB0aGlzLmV4cG9ydC51cGRhdGVFeHBvcnRMaW5rKCk7XG4gICAgfSk7XG4gICAgdGhpcy5pbXBvcnQuZmlsZUJ1dHRvbi5vbignY2xpY2snLCAoKSA9PlxuICAgICAgdGhpcy5pbXBvcnQuZmlsZUlucHV0QnV0dG9uLnRyaWdnZXIoJ2NsaWNrJyksXG4gICAgKTtcbiAgICB0aGlzLmltcG9ydC5maWxlSW5wdXRCdXR0b24ub24oJ2NoYW5nZScsIGUgPT4ge1xuICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICBsZXQgd2lkdGggPSBpbWcubmF0dXJhbFdpZHRoO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gaW1nLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9ICQoJzxjYW52YXMvPicpO1xuICAgICAgICBjYW52YXMucHJvcCh7IHdpZHRoLCBoZWlnaHQgfSk7XG4gICAgICAgIGNvbnN0IGNhbnZhc0VsID0gY2FudmFzLmdldCgwKTtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzRWwuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApO1xuICAgICAgICBjb25zdCBpbWRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBjb25zdCBjb2RlR3JpZCA9IFtdO1xuICAgICAgICBpZiAod2lkdGggPT09IDAgfHwgaGVpZ2h0ID09PSAwKSB7XG4gICAgICAgICAgY29kZUdyaWQucHVzaChbMTldKTsgLy8gZmFsbGJhY2sgdG8gc2luZ2xlIGJsYWNrIGNlbGxcbiAgICAgICAgICB3aWR0aCA9IDE7XG4gICAgICAgICAgaGVpZ2h0ID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGhlaWdodDsgciArPSAxKSB7XG4gICAgICAgICAgICBjb2RlR3JpZC5wdXNoKFtdKTtcbiAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgd2lkdGg7IGMgKz0gMSkge1xuICAgICAgICAgICAgICBjb25zdCBpZHggPSByICogd2lkdGggKiA0ICsgYyAqIDQ7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbG9yID1cbiAgICAgICAgICAgICAgICBQaWV0LmNvbG9ydmVjMmNvbG9yW2ltZGF0YS5kYXRhLnNsaWNlKGlkeCwgaWR4ICsgNCldID8/IDE5O1xuICAgICAgICAgICAgICBjb2RlR3JpZFtyXS5wdXNoKGNvbG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29kZUdyaWQyID0gUGlldC5jb21wcmVzcyhjb2RlR3JpZCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuY29kZS5yZXBsYWNlQ29kZShjb2RlR3JpZDIpO1xuICAgICAgICB0aGlzLmNvZGVSZWN0cy51cGRhdGUoKTtcbiAgICAgICAgdGhpcy5leHBvcnQudXBkYXRlRXhwb3J0TGluaygpO1xuICAgICAgfTtcbiAgICAgIGltZy5zcmMgPSB1cmw7XG4gICAgICBlLnRhcmdldC52YWx1ZSA9ICcnO1xuICAgIH0pO1xuXG4gICAgJCgnI25hdi1kZWJ1Zy10YWInKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlR3JpZCA9IHRoaXMuY29kZS5jb2RlO1xuICAgICAgY29uc3Qgc3RhcnRFbCA9ICQoJyNkZWJ1Zy1zdGFydCcpO1xuICAgICAgY29uc3Qgc3RlcEVsID0gJCgnI2RlYnVnLXN0ZXAnKTtcbiAgICAgIGNvbnN0IHJlc2V0RWwgPSAkKCcjZGVidWctcmVzZXQnKTtcbiAgICAgIGNvbnN0IGlucHV0RWwgPSAkKCcjZGVidWctaW5wdXQnKTtcbiAgICAgIGNvbnN0IG91dHB1dEVsID0gJCgnI2RlYnVnLW91dHB1dCcpO1xuICAgICAgY29uc3Qgc3RhY2tFbCA9ICQoJyNkZWJ1Zy1zdGFjaycpO1xuICAgICAgY29uc3Qgc3RhdHVzRWwgPSAkKCcjZGVidWctc3RhdHVzJyk7XG4gICAgICBjb25zdCBkcEVsID0gJCgnI2RlYnVnLWRwJyk7XG4gICAgICBjb25zdCBjY0VsID0gJCgnI2RlYnVnLWNjJyk7XG4gICAgICBjb25zdCBjbWRFbCA9ICQoJyNkZWJ1Zy1jbWQnKTtcbiAgICAgIGNvbnN0IHNwZWVkRWwgPSAkKCcjZGVidWctc3BlZWQnKTtcbiAgICAgIGNvbnN0IHJ1bkVsID0gJCgnI2RlYnVnLXJ1bicpO1xuICAgICAgY29uc3QgcGF1c2VFbCA9ICQoJyNkZWJ1Zy1wYXVzZScpO1xuICAgICAgc3RhcnRFbC5vZmYoJ2NsaWNrJyk7XG4gICAgICBzdGVwRWwub2ZmKCdjbGljaycpO1xuICAgICAgcmVzZXRFbC5vZmYoJ2NsaWNrJyk7XG4gICAgICBydW5FbC5vZmYoJ2NsaWNrJyk7XG4gICAgICBwYXVzZUVsLm9mZignY2xpY2snKTtcbiAgICAgIGxldCBhbmltYXRpb25JZDtcbiAgICAgIGxldCBhbmltYXRpb25TdGFydFRpbWU7XG4gICAgICBsZXQgYW5pbWF0aW9uU3BlZWQ7XG4gICAgICBsZXQgYW5pbWF0aW9uU3RlcHM7XG4gICAgICBsZXQgb3JpZ0lucHV0O1xuICAgICAgbGV0IGFycm93RWw7XG4gICAgICBjb25zdCB1cGRhdGVVaSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBkcCwgY2MsIGlucHV0LCBvdXRwdXQsIHN0YWNrLCBsYXN0Q21kIH0gPSB0aGlzLnJ1bm5lcjtcbiAgICAgICAgY29uc3QgZHBEZXNjID0gUGlldFJ1bi5kcFRleHRbZHBdO1xuICAgICAgICBjb25zdCBjY0Rlc2MgPSBQaWV0UnVuLmNjVGV4dFtkcCAqIDIgKyBjY107XG4gICAgICAgIGRwRWwudGV4dChgJHtkcH0gKCR7ZHBEZXNjfSlgKTtcbiAgICAgICAgY2NFbC50ZXh0KGAke2NjfSAoJHtjY0Rlc2N9KWApO1xuICAgICAgICBpbnB1dEVsLnZhbChpbnB1dCk7XG4gICAgICAgIG91dHB1dEVsLnZhbChvdXRwdXQpO1xuICAgICAgICBjb25zdCBzdGFja1N0ciA9IHN0YWNrLm1hcChuID0+IG4udG9TdHJpbmcoKSkuam9pbignICcpO1xuICAgICAgICBzdGFja0VsLnZhbChzdGFja1N0cik7XG4gICAgICAgIGFkanVzdEhlaWdodC5jYWxsKGlucHV0RWwuZ2V0KDApKTtcbiAgICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwob3V0cHV0RWwuZ2V0KDApKTtcbiAgICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwoc3RhY2tFbC5nZXQoMCkpO1xuICAgICAgICBjbWRFbC50ZXh0KGxhc3RDbWQpO1xuICAgICAgfTtcbiAgICAgIHN0YXJ0RWwub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBvdXRwdXRFbC52YWwoJycpO1xuICAgICAgICBhZGp1c3RIZWlnaHQuY2FsbChvdXRwdXRFbC5nZXQoMCkpO1xuICAgICAgICBpZiAoY29kZUdyaWRbMF1bMF0gPT09IDE5KSB7XG4gICAgICAgICAgc3RhdHVzRWwudGV4dCgnRXJyb3I6IFN0YXJ0aW5nIGJsYWNrIGNlbGwgZGV0ZWN0ZWQnKTtcbiAgICAgICAgICBkcEVsLnRleHQoJ04vQScpO1xuICAgICAgICAgIGNjRWwudGV4dCgnTi9BJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3JpZ0lucHV0ID0gaW5wdXRFbC52YWwoKTtcbiAgICAgICAgICB0aGlzLnJ1bm5lciA9IG5ldyBQaWV0UnVuKGNvZGVHcmlkLCBvcmlnSW5wdXQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucnVubmVyKTtcbiAgICAgICAgICBzdGFydEVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgc3RlcEVsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgIHJlc2V0RWwucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgcnVuRWwucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgaW5wdXRFbC5wcm9wKCdyZWFkb25seScsIHRydWUpO1xuICAgICAgICAgIHN0YXR1c0VsLnRleHQoJ1J1bm5pbmcnKTtcbiAgICAgICAgICB1cGRhdGVVaSgpO1xuICAgICAgICAgIGFycm93RWwgPSB0aGlzLmNvZGVTdmcucG9seWdvbigyMCwgNSwgMjAsIDI1LCAzMCwgMTUpO1xuICAgICAgICAgIGFycm93RWwuYXR0cih7IGZpbGw6ICdncmF5JyB9KTtcbiAgICAgICAgICBjb25zdCBtYXQgPSBTbmFwLm1hdHJpeCgpLnRyYW5zbGF0ZShcbiAgICAgICAgICAgIHRoaXMucnVubmVyLmN1ckMgKiAzMCxcbiAgICAgICAgICAgIHRoaXMucnVubmVyLmN1clIgKiAzMCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGFycm93RWwudHJhbnNmb3JtKG1hdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgc3RlcEVsLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3N0ZXAnKTtcbiAgICAgICAgc3RhdHVzRWwudGV4dCgnUnVubmluZycpO1xuICAgICAgICB0aGlzLnJ1bm5lci5zdGVwKCk7XG4gICAgICAgIHVwZGF0ZVVpKCk7XG4gICAgICAgIGNvbnN0IG1hdCA9IFNuYXAubWF0cml4KClcbiAgICAgICAgICAudHJhbnNsYXRlKHRoaXMucnVubmVyLmN1ckMgKiAzMCwgdGhpcy5ydW5uZXIuY3VyUiAqIDMwKVxuICAgICAgICAgIC5yb3RhdGUodGhpcy5ydW5uZXIuZHAgKiA5MCwgMTUsIDE1KTtcbiAgICAgICAgYXJyb3dFbC50cmFuc2Zvcm0obWF0KTtcbiAgICAgICAgaWYgKHRoaXMucnVubmVyLmZpbmlzaGVkKSB7XG4gICAgICAgICAgc3RlcEVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgc3RhdHVzRWwudGV4dCgnRmluaXNoZWQnKTtcbiAgICAgICAgICBhcnJvd0VsLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJ1bkVsLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYW5pbWF0aW9uU3BlZWQgPSBOdW1iZXIoc3BlZWRFbC52YWwoKSk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBOdW1iZXIuaXNTYWZlSW50ZWdlcihhbmltYXRpb25TcGVlZCkgJiZcbiAgICAgICAgICBhbmltYXRpb25TcGVlZCA+IDAgJiZcbiAgICAgICAgICBhbmltYXRpb25TcGVlZCA8PSAxMDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgcnVuRWwucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICBwYXVzZUVsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgIHN0ZXBFbC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgIHN0YXR1c0VsLnRleHQoJ1J1bm5pbmcnKTtcbiAgICAgICAgICBhbmltYXRpb25TdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgICBhbmltYXRpb25TdGVwcyA9IDA7XG4gICAgICAgICAgY29uc3QgdXBkYXRlRnJhbWUgPSB0aW1lID0+IHtcbiAgICAgICAgICAgIGFuaW1hdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZUZyYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVFbGFwc2VkID0gdGltZSAtIGFuaW1hdGlvblN0YXJ0VGltZTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTdGVwcyA9IE1hdGguY2VpbCgoYW5pbWF0aW9uU3BlZWQgKiB0aW1lRWxhcHNlZCkgLyAxMDAwKTtcbiAgICAgICAgICAgIGZvciAoOyBhbmltYXRpb25TdGVwcyA8IG5leHRTdGVwczsgYW5pbWF0aW9uU3RlcHMgKz0gMSkge1xuICAgICAgICAgICAgICBzdGVwRWwudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgaWYgKHRoaXMucnVubmVyLmZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgcGF1c2VFbC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbklkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGFuaW1hdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZUZyYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBzcGVlZCB2YWx1ZScpO1xuICAgICAgICAgIHN0YXR1c0VsLnRleHQoJ0ludmFsaWQgc3BlZWQgdmFsdWUuIEFsbG93ZWQgdmFsdWVzOiAxIC0gMTAwJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcGF1c2VFbC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHJ1bkVsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICBwYXVzZUVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIHN0ZXBFbC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uSWQpO1xuICAgICAgfSk7XG4gICAgICByZXNldEVsLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Jlc2V0Jyk7XG4gICAgICAgIHN0YXJ0RWwucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIHN0ZXBFbC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICByZXNldEVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIGlucHV0RWwucHJvcCgncmVhZG9ubHknLCBmYWxzZSk7XG4gICAgICAgIGlucHV0RWwudmFsKG9yaWdJbnB1dCk7XG4gICAgICAgIGFkanVzdEhlaWdodC5jYWxsKGlucHV0RWwuZ2V0KDApKTtcbiAgICAgICAgc3RhdHVzRWwudGV4dCgnTi9BJyk7XG4gICAgICAgIGRwRWwudGV4dCgnTi9BJyk7XG4gICAgICAgIGNjRWwudGV4dCgnTi9BJyk7XG4gICAgICAgIGNtZEVsLnRleHQoJ04vQScpO1xuICAgICAgICBpZiAoYXJyb3dFbCAhPT0gdW5kZWZpbmVkKSBhcnJvd0VsLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgJCgnI25hdi1lZGl0LXRhYiwgI25hdi10ZXN0LXRhYiwgI25hdi1leHBsYWluLXRhYiwgI25hdi1zaGFyZS10YWInKS5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAoKSA9PiB7XG4gICAgICAgICQoJyNkZWJ1Zy1yZXNldCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICB9LFxuICAgICk7XG5cbiAgICAkKCcjbmF2LXRlc3QtdGFiJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VwRWwgPSAkKCcjdGVzdC1zZXAnKTtcbiAgICAgIGNvbnN0IGxpbWl0RWwgPSAkKCcjdGVzdC1saW1pdCcpO1xuICAgICAgY29uc3QgcnVuRWwgPSAkKCcjdGVzdC1ydW4nKTtcbiAgICAgIGNvbnN0IHN0b3BFbCA9ICQoJyN0ZXN0LXN0b3AnKTtcbiAgICAgIGNvbnN0IGVzY2FwZUVsID0gJCgnI3Rlc3QtZXNjYXBlJyk7XG4gICAgICBjb25zdCBzdGF0dXNFbCA9ICQoJyN0ZXN0LXN0YXR1cycpO1xuICAgICAgY29uc3QgaW5wdXRFbCA9ICQoJyN0ZXN0LWlucHV0Jyk7XG4gICAgICBjb25zdCBvdXRwdXRFbCA9ICQoJyN0ZXN0LW91dHB1dCcpO1xuXG4gICAgICBydW5FbC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlcCA9IHNlcEVsLnZhbCgpID09PSAnJyA/ICctLS0nIDogc2VwRWwudmFsKCk7XG4gICAgICAgIHNlcEVsLnZhbChzZXApO1xuICAgICAgICBjb25zdCBsaW1pdFZhbCA9IE51bWJlcihsaW1pdEVsLnZhbCgpKTtcbiAgICAgICAgY29uc3QgbGltaXQgPVxuICAgICAgICAgIE51bWJlci5pc1NhZmVJbnRlZ2VyKGxpbWl0VmFsKSAmJiBsaW1pdFZhbCA+IDAgPyBsaW1pdFZhbCA6IDEwMDAwO1xuICAgICAgICBsaW1pdEVsLnZhbChsaW1pdCk7XG4gICAgICAgIHJ1bkVsLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIHN0b3BFbC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgaW5wdXRFbC5wcm9wKCdyZWFkb25seScsIHRydWUpO1xuICAgICAgICBjb25zdCBkb0VzY2FwZSA9IGVzY2FwZUVsLnByb3AoJ2NoZWNrZWQnKTtcbiAgICAgICAgbGV0IGlucHV0cyA9IGlucHV0RWwudmFsKCkuc3BsaXQoYFxcbiR7c2VwfVxcbmApO1xuICAgICAgICBpZiAoZG9Fc2NhcGUpIHtcbiAgICAgICAgICBpbnB1dHMgPSBpbnB1dHMubWFwKHMgPT5cbiAgICAgICAgICAgIHMucmVwbGFjZShcbiAgICAgICAgICAgICAgL1xcXFxbMCdcIlxcXFxucnZ0YmZdfFxcXFx1WzAtOWEtZkEtRl17NH18XFxcXHVcXHtbMC05YS1mQS1GXStcXH18XFxcXHhbMC05YS1mQS1GXXsyfS9nLFxuICAgICAgICAgICAgICBtYXRjaCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoLnN0YXJ0c1dpdGgoJ1xcXFx1JykgfHwgbWF0Y2guc3RhcnRzV2l0aCgnXFxcXHgnKSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgaGV4ID0gbWF0Y2guc3RhcnRzV2l0aCgnXFxcXHV7JylcbiAgICAgICAgICAgICAgICAgICAgPyBtYXRjaC5zbGljZSgzLCAtMSlcbiAgICAgICAgICAgICAgICAgICAgOiBtYXRjaC5zbGljZSgyKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChOdW1iZXIucGFyc2VJbnQoaGV4LCAxNikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgJ1xcXFwwJzogJ1xcMCcsXG4gICAgICAgICAgICAgICAgICBcIlxcXFwnXCI6IFwiJ1wiLFxuICAgICAgICAgICAgICAgICAgJ1xcXFxcIic6ICdcIicsXG4gICAgICAgICAgICAgICAgICAnXFxcXFxcXFwnOiAnXFxcXCcsXG4gICAgICAgICAgICAgICAgICAnXFxcXG4nOiAnXFxuJyxcbiAgICAgICAgICAgICAgICAgICdcXFxccic6ICdcXHInLFxuICAgICAgICAgICAgICAgICAgJ1xcXFx2JzogJ1xcdicsXG4gICAgICAgICAgICAgICAgICAnXFxcXHQnOiAnXFx0JyxcbiAgICAgICAgICAgICAgICAgICdcXFxcYic6ICdcXGInLFxuICAgICAgICAgICAgICAgICAgJ1xcXFxmJzogJ1xcZicsXG4gICAgICAgICAgICAgICAgfVttYXRjaF07XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmVycyA9IGlucHV0cy5tYXAoaW5wdXQgPT4gbmV3IFBpZXRSdW4odGhpcy5jb2RlLmNvZGUsIGlucHV0KSk7XG4gICAgICAgIGNvbnN0IHN0ZXBzUGVyUnVubmVyID0gcnVubmVycy5tYXAoKCkgPT4gMCk7XG4gICAgICAgIGxldCBhbGl2ZSA9IHJ1bm5lcnMubGVuZ3RoO1xuICAgICAgICBjb25zdCBzdGVwcyA9IDEwOyAvLyBzdGVwcyBwZXIgbXNcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIGxldCBzdGVwc1J1biA9IDA7XG4gICAgICAgIGxldCBydW5JZDtcbiAgICAgICAgc3RhdHVzRWwudGV4dCgnUnVubmluZycpO1xuICAgICAgICBjb25zdCB1cGRhdGUgPSB0aW1lID0+IHtcbiAgICAgICAgICBpZiAoYWxpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHN0b3BFbC50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBydW5JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xuICAgICAgICAgIGNvbnN0IHRvdGFsU3RlcHMgPSBNYXRoLmNlaWwoc3RlcHMgKiAodGltZSAtIHN0YXJ0VGltZSkpO1xuICAgICAgICAgIGNvbnN0IHNpbmdsZVN0ZXBzID0gTWF0aC5yb3VuZCgodG90YWxTdGVwcyAtIHN0ZXBzUnVuKSAvIGFsaXZlKTtcbiAgICAgICAgICBydW5uZXJzLmZvckVhY2goKHJ1bm5lciwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5lci5maW5pc2hlZCkgcmV0dXJuO1xuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzaW5nbGVTdGVwczsgcyArPSAxKSB7XG4gICAgICAgICAgICAgIHJ1bm5lci5zdGVwKCk7XG4gICAgICAgICAgICAgIHN0ZXBzUnVuICs9IDE7XG4gICAgICAgICAgICAgIHN0ZXBzUGVyUnVubmVyW2ldICs9IDE7XG4gICAgICAgICAgICAgIGlmIChzdGVwc1BlclJ1bm5lcltpXSA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgIHJ1bm5lci5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHJ1bm5lci5maW5pc2hlZCkge1xuICAgICAgICAgICAgICAgIGFsaXZlIC09IDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgc3RvcEVsLm9uZSgnY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocnVuSWQpO1xuICAgICAgICAgIGNvbnN0IG91dHB1dHMgPSBydW5uZXJzLm1hcChydW5uZXIgPT4gcnVubmVyLm91dHB1dCk7XG4gICAgICAgICAgcnVubmVycy5mb3JFYWNoKChydW5uZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGlmICghcnVubmVyLmZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgIG91dHB1dHNbaV0gKz0gJ1xcbioqIEFib3J0ZWQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGVwc1BlclJ1bm5lcltpXSA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICBvdXRwdXRzW2ldICs9ICdcXG4qKiBFeGNlZWRlZCBTdGVwIExpbWl0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBvdXRwdXRFbC52YWwob3V0cHV0cy5qb2luKCdcXG4tLS1cXG4nKSk7XG4gICAgICAgICAgYWRqdXN0SGVpZ2h0LmNhbGwob3V0cHV0RWwuZ2V0KDApKTtcbiAgICAgICAgICBzdGF0dXNFbC50ZXh0KCdGaW5pc2hlZCcpO1xuICAgICAgICAgIHN0b3BFbC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgIHJ1bkVsLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgIGlucHV0RWwucHJvcCgncmVhZG9ubHknLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBydW5JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBleHBsYWluZWQ6IHB1c2hbbnVtXSBwb3BbeF0gWytdIFstXSBbKl0gWy9dIFslXSBbIV0gWz5dIFtEXVArIFtDXUMrXG4gICAgLy8gW2RddXAgW3Jdb2xsIFtJXW5OIFtpXW5DIFtPXXV0TiBbb111dENcbiAgICB0aGlzLmNvZGVTdmdcbiAgICAgIC5jaXJjbGUoMCwgMCwgNSlcbiAgICAgIC5hdHRyKHsgZmlsbDogJ2dyYXknLCBzdHJva2U6ICdub25lJyB9KVxuICAgICAgLm1hcmtlcigtNSwgLTUsIDEwLCAxMCwgMCwgMClcbiAgICAgIC5hdHRyKHsgaWQ6ICdtYXJrMicgfSk7XG4gICAgdGhpcy5jb2RlU3ZnXG4gICAgICAucG9seWdvbihbMCwgLTEwLCAwLCAxMCwgMTAsIDBdKVxuICAgICAgLmF0dHIoeyBmaWxsOiAnYmxhY2snLCBzdHJva2U6ICdub25lJyB9KVxuICAgICAgLm1hcmtlcigwLCAtMTAsIDEwLCAyMCwgMTAsIDApXG4gICAgICAuYXR0cih7IGlkOiAnbWFyazEnIH0pO1xuICAgIC8vIHBhdGhbcl1bY10gPSBbLi4uW2Zyb21yLCBmcm9tYywgdG9yLCB0b2MsIGNtZF1dXG4gICAgLy8gcGF0aEdbcl1bY10gPSBzdmcgZ3JvdXAgdGhhdCBjb250YWlucyBhbGwgbGluZSBzZWdtZW50c1xuICAgIHRoaXMuZXhwbGFpbiA9IHtcbiAgICAgIHBhdGg6IFtbXV0sXG4gICAgICBwYXRoRzogW1tdXSxcbiAgICAgIGluaXRQYXRoOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoID0gdGhpcy5jb2RlLmNvZGUubWFwKHJvdyA9PiByb3cubWFwKCgpID0+IFtdKSk7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoRyA9IHRoaXMuY29kZS5jb2RlLm1hcChyb3cgPT5cbiAgICAgICAgICByb3cubWFwKCgpID0+IHRoaXMuY29kZVN2Zy5nKCkpLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmV4cGxhaW4ucnVubmVyID0gbmV3IFBpZXRSdW4odGhpcy5jb2RlLmNvZGUsICcnKTtcbiAgICAgIH0sXG4gICAgICBkZXN0cm95UGF0aDogKCkgPT4ge1xuICAgICAgICB0aGlzLmV4cGxhaW4ucGF0aEcuZm9yRWFjaChyb3cgPT4gcm93LmZvckVhY2goZyA9PiBnLnJlbW92ZSgpKSk7XG4gICAgICB9LFxuICAgICAgZHJhd0NtZDogKGdyb3VwRWwsIHByZXZSb3csIHByZXZDb2wsIG5leHRSb3csIG5leHRDb2wsIGNtZCwgaXNGaXJzdCkgPT4ge1xuICAgICAgICBjb25zdCB4MSA9IHByZXZDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MSA9IHByZXZSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB4MiA9IG5leHRDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MiA9IG5leHRSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCBsaW5lID0gZ3JvdXBFbC5saW5lKHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgLy8gbGluZS5hdHRyKHsgc3Ryb2tlOiAnYmxhY2snLCAnbWFya2VyLWVuZCc6ICd1cmwoI21hcmsyKScgfSk7XG4gICAgICAgIGxpbmUuYXR0cih7IHN0cm9rZTogJ2JsYWNrJyB9KTtcbiAgICAgICAgbGluZS5ub2RlLnN0eWxlWydtYXJrZXItZW5kJ10gPSBTbmFwLnVybCgnbWFyazInKTtcbiAgICAgICAgaWYgKGlzRmlyc3QpIHtcbiAgICAgICAgICBsaW5lLm5vZGUuc3R5bGVbJ21hcmtlci1zdGFydCddID0gU25hcC51cmwoJ21hcmsxJyk7XG4gICAgICAgICAgLy8gbGluZS5hdHRyKHsgJ21hcmtlci1zdGFydCc6ICd1cmwoI21hcmsxKScgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGluZS5ub2RlLnN0eWxlWydtYXJrZXItc3RhcnQnXSA9IFNuYXAudXJsKCdtYXJrMicpO1xuICAgICAgICAgIC8vIGxpbmUuYXR0cih7ICdtYXJrZXItc3RhcnQnOiAndXJsKCNtYXJrMiknIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbWQgIT09ICcnKSB7XG4gICAgICAgICAgbGV0IFt4dCwgeXRdID0gWzAsIDBdO1xuICAgICAgICAgIGlmIChuZXh0Q29sID09PSBwcmV2Q29sICsgMSkge1xuICAgICAgICAgICAgW3h0LCB5dF0gPSBbcHJldkNvbCAqIDMwICsgMjIsIHByZXZSb3cgKiAzMCArIDhdO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV4dFJvdyA9PT0gcHJldlJvdyArIDEpIHtcbiAgICAgICAgICAgIFt4dCwgeXRdID0gW3ByZXZDb2wgKiAzMCArIDIyLCBwcmV2Um93ICogMzAgKyAyMl07XG4gICAgICAgICAgfSBlbHNlIGlmIChuZXh0Q29sID09PSBwcmV2Q29sIC0gMSkge1xuICAgICAgICAgICAgW3h0LCB5dF0gPSBbcHJldkNvbCAqIDMwICsgOCwgcHJldlJvdyAqIDMwICsgMjJdO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV4dFJvdyA9PT0gcHJldlJvdyAtIDEpIHtcbiAgICAgICAgICAgIFt4dCwgeXRdID0gW3ByZXZDb2wgKiAzMCArIDgsIHByZXZSb3cgKiAzMCArIDhdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjbWRUZXh0ID0gZ3JvdXBFbC50ZXh0KHh0LCB5dCwgY21kKTtcbiAgICAgICAgICBjb25zdCBwcmV2Q29kZSA9IHRoaXMuY29kZS5jb2RlW3ByZXZSb3ddW3ByZXZDb2xdO1xuICAgICAgICAgIGNtZFRleHQuYXR0cih7XG4gICAgICAgICAgICAndGV4dC1hbmNob3InOiAnbWlkZGxlJyxcbiAgICAgICAgICAgICdkb21pbmFudC1iYXNlbGluZSc6ICdtaWRkbGUnLFxuICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnLFxuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMHB4JyxcbiAgICAgICAgICAgIGZpbGw6IHByZXZDb2RlID09PSAxMCB8fCBwcmV2Q29kZSA9PT0gMTYgPyAnd2hpdGUnIDogJ2JsYWNrJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRyYXdEYXNoOiAoZ3JvdXBFbCwgcHJldlJvdywgcHJldkNvbCwgbmV4dFJvdywgbmV4dENvbCkgPT4ge1xuICAgICAgICBjb25zdCB4MSA9IHByZXZDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MSA9IHByZXZSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB4MiA9IG5leHRDb2wgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCB5MiA9IG5leHRSb3cgKiAzMCArIDE1O1xuICAgICAgICBjb25zdCBsaW5lID0gZ3JvdXBFbC5saW5lKHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgbGluZS5hdHRyKHsgc3Ryb2tlOiAnYmxhY2snLCAnc3Ryb2tlLWRhc2hhcnJheSc6ICc0JyB9KTtcbiAgICAgIH0sXG4gICAgICBhZGRQYXRoOiAocm93LCBjb2wsIGRwLCBjYykgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5leHBsYWluLnJ1bm5lci5kcnlSdW4ocm93LCBjb2wsIGRwLCBjYyk7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoW3Jvd11bY29sXSA9IHBhdGg7XG4gICAgICAgIGxldCBbY3VyUm93LCBjdXJDb2xdID0gW3JvdywgY29sXTtcbiAgICAgICAgY29uc3QgZyA9IHRoaXMuZXhwbGFpbi5wYXRoR1tyb3ddW2NvbF07XG4gICAgICAgIHBhdGguZm9yRWFjaCgoW3ByZXZSb3csIHByZXZDb2wsIG5leHRSb3csIG5leHRDb2wsIGNtZF0sIGkpID0+IHtcbiAgICAgICAgICAvLyBkcmF3IGNvbW1hbmRzLCBhbmQgZGFzaGVkIGxpbmVzIG9uIGJpZyBhcmVhIGp1bXBzXG4gICAgICAgICAgaWYgKGN1clJvdyAhPT0gcHJldlJvdyB8fCBjdXJDb2wgIT09IHByZXZDb2wpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwbGFpbi5kcmF3RGFzaChnLCBjdXJSb3csIGN1ckNvbCwgcHJldlJvdywgcHJldkNvbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZXhwbGFpbi5kcmF3Q21kKFxuICAgICAgICAgICAgZyxcbiAgICAgICAgICAgIHByZXZSb3csXG4gICAgICAgICAgICBwcmV2Q29sLFxuICAgICAgICAgICAgbmV4dFJvdyxcbiAgICAgICAgICAgIG5leHRDb2wsXG4gICAgICAgICAgICBjbWQsXG4gICAgICAgICAgICBpID09PSAwLFxuICAgICAgICAgICk7XG4gICAgICAgICAgW2N1clJvdywgY3VyQ29sXSA9IFtuZXh0Um93LCBuZXh0Q29sXTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlUGF0aDogKHJvdywgY29sKSA9PiB7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5wYXRoW3Jvd11bY29sXS5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmV4cGxhaW4ucGF0aEdbcm93XVtjb2xdXG4gICAgICAgICAgLmNoaWxkcmVuKClcbiAgICAgICAgICAuZm9yRWFjaChjaGlsZCA9PiBjaGlsZC5yZW1vdmUoKSk7XG4gICAgICB9LFxuICAgICAgdG9nZ2xlUGF0aDogKHJvdywgY29sLCBkcCwgY2MpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZXhwbGFpbi5wYXRoW3Jvd11bY29sXS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmV4cGxhaW4uYWRkUGF0aChyb3csIGNvbCwgZHAsIGNjKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmV4cGxhaW4ucmVtb3ZlUGF0aChyb3csIGNvbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBleHBvcnRCdXR0b246ICQoJyNleHBvcnQtZXhwbGFpbmVkJyksXG4gICAgICBleHBvcnRVcmw6IHVuZGVmaW5lZCxcbiAgICAgIHVwZGF0ZUV4cG9ydExpbms6ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZXhwbGFpbi5leHBvcnRVcmwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5leHBsYWluLmV4cG9ydFVybCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3ZnU3RyID0gdGhpcy5jb2RlU3ZnXG4gICAgICAgICAgLm91dGVyU1ZHKClcbiAgICAgICAgICAucmVwbGFjZSgnPHN2ZycsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIicpO1xuICAgICAgICBjb25zdCBzdmdCbG9iID0gbmV3IEJsb2IoW3N2Z1N0cl0pO1xuICAgICAgICBjb25zdCBzdmdVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN2Z0Jsb2IpO1xuICAgICAgICB0aGlzLmV4cGxhaW4uZXhwb3J0QnV0dG9uLnByb3AoeyBocmVmOiBzdmdVcmwgfSk7XG4gICAgICAgIHRoaXMuZXhwbGFpbi5leHBvcnRVcmwgPSBzdmdVcmw7XG4gICAgICB9LFxuICAgIH07XG5cbiAgICAkKCcjbmF2LWV4cGxhaW4tdGFiJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgLy8gb24gc3ZnIGNsaWNrOiBpZiB0aGVyZSdzIGFscmVhZHkgYSBwYXRoLCByZW1vdmUgaXQ7XG4gICAgICAvLyBvdGhlcndpc2UgYWRkIGEgbmV3IHBhdGggc3RhcnRpbmcgdGhlcmVcbiAgICAgIHRoaXMuY29kZVN2Zy51bmRyYWcoKTtcbiAgICAgIHRoaXMuY29kZVN2Zy51bmNsaWNrKCk7XG4gICAgICB0aGlzLmV4cGxhaW4uaW5pdFBhdGgoKTtcbiAgICAgIHRoaXMuY29kZVN2Zy5jbGljayhlID0+IHtcbiAgICAgICAgY29uc3QgY3VyUiA9ICgoZS5vZmZzZXRZIC0gMykgLyAzMCkgfCAwO1xuICAgICAgICBjb25zdCBjdXJDID0gKChlLm9mZnNldFggLSAzKSAvIDMwKSB8IDA7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjdXJSID49IDAgJiZcbiAgICAgICAgICBjdXJSIDwgdGhpcy5jb2RlLnJvd3MgJiZcbiAgICAgICAgICBjdXJDID49IDAgJiZcbiAgICAgICAgICBjdXJDIDwgdGhpcy5jb2RlLmNvbHMgJiZcbiAgICAgICAgICB0aGlzLmNvZGUuY29kZVtjdXJSXVtjdXJDXSAhPT0gMTlcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGV0IGRwID0gMDtcbiAgICAgICAgICBpZiAoJCgnI2V4cGxhaW4tZHAtMCcpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAwO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJCgnI2V4cGxhaW4tZHAtMScpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAxO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJCgnI2V4cGxhaW4tZHAtMicpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAyO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJCgnI2V4cGxhaW4tZHAtMycpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgZHAgPSAzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY2MgPSAwO1xuICAgICAgICAgIGlmICgkKCcjZXhwbGFpbi1jYy0wJykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgICBjYyA9IDA7XG4gICAgICAgICAgfSBlbHNlIGlmICgkKCcjZXhwbGFpbi1jYy0xJykucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgICBjYyA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZXhwbGFpbi50b2dnbGVQYXRoKGN1clIsIGN1ckMsIGRwLCBjYyk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5leHBsYWluKTtcbiAgICAgICAgICB0aGlzLmV4cGxhaW4udXBkYXRlRXhwb3J0TGluaygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICAkKCcjbmF2LWRlYnVnLXRhYiwgI25hdi10ZXN0LXRhYiwgI25hdi1zaGFyZS10YWInKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvZGVTdmcudW5kcmFnKCk7XG4gICAgICB0aGlzLmNvZGVTdmcudW5jbGljaygpO1xuICAgICAgdGhpcy5leHBsYWluLmRlc3Ryb3lQYXRoKCk7XG4gICAgfSk7XG4gICAgJCgnI25hdi1lZGl0LXRhYicpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuZXhwbGFpbi5kZXN0cm95UGF0aCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbG9hZEZyb21QZXJtYWxpbmsgPSAoKSA9PiB7XG4gICAgICBjb25zdCBoYXNoID0gZG9jdW1lbnQubG9jYXRpb24uaGFzaC5zbGljZSgxKTtcbiAgICAgIGNvbnN0IGNvbXByZXNzZWQgPSBCYXNlNjQudG9VaW50OEFycmF5KGhhc2gpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZXhwb3J0SlNPTiA9IHBha28uaW5mbGF0ZShjb21wcmVzc2VkLCB7IHRvOiAnc3RyaW5nJyB9KTtcbiAgICAgICAgY29uc3QgZXhwb3J0T2JqID0gSlNPTi5wYXJzZShleHBvcnRKU09OKTtcbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIG9iaiBoYXMgYWxsIGZpdmUgZmllbGRzXG4gICAgICAgIGlmIChcbiAgICAgICAgICBleHBvcnRPYmouY29kZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgZXhwb3J0T2JqLnNlcCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgZXhwb3J0T2JqLmxpbSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgZXhwb3J0T2JqLmVzYyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgZXhwb3J0T2JqLmlucHV0ID09PSB1bmRlZmluZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXhwb3J0T2JqKTtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdEZWNvZGVkIG9iamVjdCBkb2VzIG5vdCBoYXZlIG5lY2Vzc2FyeSBmaWVsZHMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvZGUucmVwbGFjZUNvZGUoZXhwb3J0T2JqLmNvZGUpO1xuICAgICAgICB0aGlzLmNvZGVSZWN0cy51cGRhdGUoKTtcbiAgICAgICAgJCgnI3Rlc3Qtc2VwJykudmFsKGV4cG9ydE9iai5zZXApO1xuICAgICAgICAkKCcjdGVzdC1saW1pdCcpLnZhbChleHBvcnRPYmoubGltKTtcbiAgICAgICAgJCgnI3Rlc3QtZXNjYXBlJykudmFsKGV4cG9ydE9iai5lc2MpO1xuICAgICAgICAkKCcjdGVzdC1pbnB1dCcpLnZhbChleHBvcnRPYmouaW5wdXQpO1xuICAgICAgICAkKCcjbmF2LXRlc3QtdGFiJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBhZGp1c3RIZWlnaHQuY2FsbCgkKCcjdGVzdC1pbnB1dCcpLmdldCgwKSksIDEwMDApO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoZG9jdW1lbnQubG9jYXRpb24uaGFzaCAhPT0gJycpIHtcbiAgICAgIGxvYWRGcm9tUGVybWFsaW5rKCk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/piet-ui.js\n");

/***/ }),

/***/ "./src/piet.js":
/*!*********************!*\
  !*** ./src/piet.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Piet)\n/* harmony export */ });\nclass Piet {\n  static commandText = [\n    ['', '+', '/', '>', 'dup', 'inC'],\n    ['push', '-', '%', 'DP+', 'roll', 'outN'],\n    ['pop', '*', '!', 'CC+', 'inN', 'outC'],\n  ];\n\n  static {\n    this.char2color = {};\n    this.colorvec2color = {};\n    this.colors = [];\n    const hueMask = [4, 6, 2, 3, 1, 5];\n    const lightStr = [\n      ['C0', 'FF'],\n      ['00', 'FF'],\n      ['00', 'C0'],\n    ];\n    for (let darkness = 0; darkness < 3; darkness += 1) {\n      const light = lightStr[darkness];\n      for (let hue = 0; hue < 6; hue += 1) {\n        const charcode = darkness * 32 + hue + 48;\n        let colorcode = '#';\n        const colorvec = [];\n        for (let i = 0; i < 3; i += 1) {\n          const nextVal = light[(hueMask[hue] >> (2 - i)) & 1];\n          colorcode += nextVal;\n          colorvec.push(Number.parseInt(nextVal, 16));\n        }\n        colorvec.push(255);\n        const char = String.fromCharCode(charcode);\n        this.colors.push({ charcode, char, colorcode, colorvec });\n        this.char2color[char] = darkness * 6 + hue;\n        this.colorvec2color[colorvec] = darkness * 6 + hue;\n      }\n    }\n    this.colors.push({\n      charcode: '@'.charCodeAt(),\n      char: '@',\n      colorcode: '#FFFFFF',\n      colorvec: [255, 255, 255, 255],\n    });\n    this.char2color['@'] = 18;\n    this.colorvec2color[this.colors[18].colorvec] = 18;\n    this.colors.push({\n      charcode: ' '.charCodeAt(),\n      char: ' ',\n      colorcode: '#000000',\n      colorvec: [0, 0, 0, 255],\n    });\n    this.char2color[' '] = 19;\n    this.colorvec2color[this.colors[19].colorvec] = 19;\n  }\n\n  static compress(codeGrid, width, height) {\n    function gcd(a, b) {\n      let [x, y] = [a, b];\n      while (y !== 0) {\n        [x, y] = [y, x % y];\n      }\n      return x;\n    }\n    const g = gcd(width, height);\n    function check(s) {\n      for (let r = 0; r < height / s; r += 1) {\n        for (let c = 0; c < width / s; c += 1) {\n          const rmin = r * s;\n          const rmax = (r + 1) * s;\n          const cmin = c * s;\n          const cmax = (c + 1) * s;\n          const expected = codeGrid[rmin][cmin];\n          for (let rr = rmin; rr < rmax; rr += 1) {\n            for (let cc = cmin; cc < cmax; cc += 1) {\n              if (expected !== codeGrid[rr][cc]) {\n                return false;\n              }\n            }\n          }\n        }\n      }\n      return true;\n    }\n    for (let gg = g; gg >= 1; gg -= 1) {\n      if (g % gg === 0) {\n        if (check(gg)) {\n          return codeGrid\n            .filter((r, i) => i % gg === 0)\n            .map(row => row.filter((c, i) => i % gg === 0));\n        }\n      }\n    }\n    return codeGrid;\n  }\n\n  static fromAsciiPiet(apcode) {\n    const apgrid = apcode.replace(/[@A-Z_]/g, s => {\n      if (s === '@') {\n        return ' \\n';\n      }\n      if (s === '_') {\n        return '?\\n';\n      }\n      return `${s.toLowerCase()}\\n`;\n    });\n    const ap = 'tvrsqulnjkimdfbcae? ';\n    const codeGrid = apgrid\n      .split('\\n')\n      .map(s => [...s].map(c => (ap.indexOf(c) + 20) % 20));\n    const cols = Math.max(1, ...codeGrid.map(row => row.length));\n    codeGrid.forEach(row => {\n      while (row.length < cols) {\n        row.push(19);\n      }\n    });\n    return codeGrid;\n  }\n\n  toAsciiPiet(compact) {\n    const ap = 'tvrsqulnjkimdfbcae? ';\n    const codeStr = this.code.map(row => {\n      const rowStr = row\n        .map(cell => ap[cell])\n        .join('')\n        .trimEnd();\n      return rowStr;\n    });\n    if (!compact) {\n      return codeStr.join('\\n');\n    }\n    return codeStr\n      .map((row, i) => {\n        if (i === codeStr.length - 1) {\n          return row;\n        }\n        const [front, back] = [row.slice(0, -1), row.slice(-1)];\n        if (back === '?') {\n          return `${front}_`;\n        }\n        return front + back.toUpperCase();\n      })\n      .join('');\n  }\n\n  constructor(code) {\n    const codeStr = code || '0';\n    this.code = codeStr\n      .split(/\\r?\\n/)\n      .map(row => [...row].map(cell => Piet.char2color[cell]));\n    this.rows = this.code.length;\n    this.cols = this.code[0].length;\n  }\n\n  extendCode(direction) {\n    if (direction === 'r') {\n      this.code.forEach(row => {\n        row.push(19);\n      });\n      this.cols += 1;\n    } else if (direction === 'l') {\n      this.code.forEach(row => {\n        row.unshift(19);\n      });\n      this.cols += 1;\n    } else if (direction === 'd') {\n      this.code.push(this.code[0].map(() => 19));\n      this.rows += 1;\n    } else if (direction === 'u') {\n      this.code.unshift(this.code[0].map(() => 19));\n      this.rows += 1;\n    }\n  }\n\n  shrinkCode(direction) {\n    if (\n      ((direction === 'r' || direction === 'l') && this.cols === 1) ||\n      ((direction === 'u' || direction === 'd') && this.rows === 1)\n    ) {\n      console.log('Dimension cannot be reduced from 1');\n    } else if (direction === 'r') {\n      this.code.forEach(row => {\n        row.pop();\n      });\n      this.cols -= 1;\n    } else if (direction === 'l') {\n      this.code.forEach(row => {\n        row.shift();\n      });\n      this.cols -= 1;\n    } else if (direction === 'd') {\n      this.code.pop();\n      this.rows -= 1;\n    } else if (direction === 'u') {\n      this.code.shift();\n      this.rows -= 1;\n    }\n  }\n\n  replaceCode(newCode) {\n    this.code = newCode;\n    this.rows = this.code.length;\n    this.cols = this.code[0].length;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGlldC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGNBQWM7QUFDekM7QUFDQSx3QkFBd0IsU0FBUztBQUNqQztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscUNBQXFDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsZ0JBQWdCO0FBQ3RDLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsV0FBVztBQUN6QyxnQ0FBZ0MsV0FBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNO0FBQzFCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGlldC8uL3NyYy9waWV0LmpzPzk3MTgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGlldCB7XG4gIHN0YXRpYyBjb21tYW5kVGV4dCA9IFtcbiAgICBbJycsICcrJywgJy8nLCAnPicsICdkdXAnLCAnaW5DJ10sXG4gICAgWydwdXNoJywgJy0nLCAnJScsICdEUCsnLCAncm9sbCcsICdvdXROJ10sXG4gICAgWydwb3AnLCAnKicsICchJywgJ0NDKycsICdpbk4nLCAnb3V0QyddLFxuICBdO1xuXG4gIHN0YXRpYyB7XG4gICAgdGhpcy5jaGFyMmNvbG9yID0ge307XG4gICAgdGhpcy5jb2xvcnZlYzJjb2xvciA9IHt9O1xuICAgIHRoaXMuY29sb3JzID0gW107XG4gICAgY29uc3QgaHVlTWFzayA9IFs0LCA2LCAyLCAzLCAxLCA1XTtcbiAgICBjb25zdCBsaWdodFN0ciA9IFtcbiAgICAgIFsnQzAnLCAnRkYnXSxcbiAgICAgIFsnMDAnLCAnRkYnXSxcbiAgICAgIFsnMDAnLCAnQzAnXSxcbiAgICBdO1xuICAgIGZvciAobGV0IGRhcmtuZXNzID0gMDsgZGFya25lc3MgPCAzOyBkYXJrbmVzcyArPSAxKSB7XG4gICAgICBjb25zdCBsaWdodCA9IGxpZ2h0U3RyW2RhcmtuZXNzXTtcbiAgICAgIGZvciAobGV0IGh1ZSA9IDA7IGh1ZSA8IDY7IGh1ZSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNoYXJjb2RlID0gZGFya25lc3MgKiAzMiArIGh1ZSArIDQ4O1xuICAgICAgICBsZXQgY29sb3Jjb2RlID0gJyMnO1xuICAgICAgICBjb25zdCBjb2xvcnZlYyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IG5leHRWYWwgPSBsaWdodFsoaHVlTWFza1todWVdID4+ICgyIC0gaSkpICYgMV07XG4gICAgICAgICAgY29sb3Jjb2RlICs9IG5leHRWYWw7XG4gICAgICAgICAgY29sb3J2ZWMucHVzaChOdW1iZXIucGFyc2VJbnQobmV4dFZhbCwgMTYpKTtcbiAgICAgICAgfVxuICAgICAgICBjb2xvcnZlYy5wdXNoKDI1NSk7XG4gICAgICAgIGNvbnN0IGNoYXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJjb2RlKTtcbiAgICAgICAgdGhpcy5jb2xvcnMucHVzaCh7IGNoYXJjb2RlLCBjaGFyLCBjb2xvcmNvZGUsIGNvbG9ydmVjIH0pO1xuICAgICAgICB0aGlzLmNoYXIyY29sb3JbY2hhcl0gPSBkYXJrbmVzcyAqIDYgKyBodWU7XG4gICAgICAgIHRoaXMuY29sb3J2ZWMyY29sb3JbY29sb3J2ZWNdID0gZGFya25lc3MgKiA2ICsgaHVlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbG9ycy5wdXNoKHtcbiAgICAgIGNoYXJjb2RlOiAnQCcuY2hhckNvZGVBdCgpLFxuICAgICAgY2hhcjogJ0AnLFxuICAgICAgY29sb3Jjb2RlOiAnI0ZGRkZGRicsXG4gICAgICBjb2xvcnZlYzogWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgfSk7XG4gICAgdGhpcy5jaGFyMmNvbG9yWydAJ10gPSAxODtcbiAgICB0aGlzLmNvbG9ydmVjMmNvbG9yW3RoaXMuY29sb3JzWzE4XS5jb2xvcnZlY10gPSAxODtcbiAgICB0aGlzLmNvbG9ycy5wdXNoKHtcbiAgICAgIGNoYXJjb2RlOiAnICcuY2hhckNvZGVBdCgpLFxuICAgICAgY2hhcjogJyAnLFxuICAgICAgY29sb3Jjb2RlOiAnIzAwMDAwMCcsXG4gICAgICBjb2xvcnZlYzogWzAsIDAsIDAsIDI1NV0sXG4gICAgfSk7XG4gICAgdGhpcy5jaGFyMmNvbG9yWycgJ10gPSAxOTtcbiAgICB0aGlzLmNvbG9ydmVjMmNvbG9yW3RoaXMuY29sb3JzWzE5XS5jb2xvcnZlY10gPSAxOTtcbiAgfVxuXG4gIHN0YXRpYyBjb21wcmVzcyhjb2RlR3JpZCwgd2lkdGgsIGhlaWdodCkge1xuICAgIGZ1bmN0aW9uIGdjZChhLCBiKSB7XG4gICAgICBsZXQgW3gsIHldID0gW2EsIGJdO1xuICAgICAgd2hpbGUgKHkgIT09IDApIHtcbiAgICAgICAgW3gsIHldID0gW3ksIHggJSB5XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgICBjb25zdCBnID0gZ2NkKHdpZHRoLCBoZWlnaHQpO1xuICAgIGZ1bmN0aW9uIGNoZWNrKHMpIHtcbiAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgaGVpZ2h0IC8gczsgciArPSAxKSB7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgd2lkdGggLyBzOyBjICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBybWluID0gciAqIHM7XG4gICAgICAgICAgY29uc3Qgcm1heCA9IChyICsgMSkgKiBzO1xuICAgICAgICAgIGNvbnN0IGNtaW4gPSBjICogcztcbiAgICAgICAgICBjb25zdCBjbWF4ID0gKGMgKyAxKSAqIHM7XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBjb2RlR3JpZFtybWluXVtjbWluXTtcbiAgICAgICAgICBmb3IgKGxldCByciA9IHJtaW47IHJyIDwgcm1heDsgcnIgKz0gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgY2MgPSBjbWluOyBjYyA8IGNtYXg7IGNjICs9IDEpIHtcbiAgICAgICAgICAgICAgaWYgKGV4cGVjdGVkICE9PSBjb2RlR3JpZFtycl1bY2NdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZm9yIChsZXQgZ2cgPSBnOyBnZyA+PSAxOyBnZyAtPSAxKSB7XG4gICAgICBpZiAoZyAlIGdnID09PSAwKSB7XG4gICAgICAgIGlmIChjaGVjayhnZykpIHtcbiAgICAgICAgICByZXR1cm4gY29kZUdyaWRcbiAgICAgICAgICAgIC5maWx0ZXIoKHIsIGkpID0+IGkgJSBnZyA9PT0gMClcbiAgICAgICAgICAgIC5tYXAocm93ID0+IHJvdy5maWx0ZXIoKGMsIGkpID0+IGkgJSBnZyA9PT0gMCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb2RlR3JpZDtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tQXNjaWlQaWV0KGFwY29kZSkge1xuICAgIGNvbnN0IGFwZ3JpZCA9IGFwY29kZS5yZXBsYWNlKC9bQEEtWl9dL2csIHMgPT4ge1xuICAgICAgaWYgKHMgPT09ICdAJykge1xuICAgICAgICByZXR1cm4gJyBcXG4nO1xuICAgICAgfVxuICAgICAgaWYgKHMgPT09ICdfJykge1xuICAgICAgICByZXR1cm4gJz9cXG4nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGAke3MudG9Mb3dlckNhc2UoKX1cXG5gO1xuICAgIH0pO1xuICAgIGNvbnN0IGFwID0gJ3R2cnNxdWxuamtpbWRmYmNhZT8gJztcbiAgICBjb25zdCBjb2RlR3JpZCA9IGFwZ3JpZFxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLm1hcChzID0+IFsuLi5zXS5tYXAoYyA9PiAoYXAuaW5kZXhPZihjKSArIDIwKSAlIDIwKSk7XG4gICAgY29uc3QgY29scyA9IE1hdGgubWF4KDEsIC4uLmNvZGVHcmlkLm1hcChyb3cgPT4gcm93Lmxlbmd0aCkpO1xuICAgIGNvZGVHcmlkLmZvckVhY2gocm93ID0+IHtcbiAgICAgIHdoaWxlIChyb3cubGVuZ3RoIDwgY29scykge1xuICAgICAgICByb3cucHVzaCgxOSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvZGVHcmlkO1xuICB9XG5cbiAgdG9Bc2NpaVBpZXQoY29tcGFjdCkge1xuICAgIGNvbnN0IGFwID0gJ3R2cnNxdWxuamtpbWRmYmNhZT8gJztcbiAgICBjb25zdCBjb2RlU3RyID0gdGhpcy5jb2RlLm1hcChyb3cgPT4ge1xuICAgICAgY29uc3Qgcm93U3RyID0gcm93XG4gICAgICAgIC5tYXAoY2VsbCA9PiBhcFtjZWxsXSlcbiAgICAgICAgLmpvaW4oJycpXG4gICAgICAgIC50cmltRW5kKCk7XG4gICAgICByZXR1cm4gcm93U3RyO1xuICAgIH0pO1xuICAgIGlmICghY29tcGFjdCkge1xuICAgICAgcmV0dXJuIGNvZGVTdHIuam9pbignXFxuJyk7XG4gICAgfVxuICAgIHJldHVybiBjb2RlU3RyXG4gICAgICAubWFwKChyb3csIGkpID0+IHtcbiAgICAgICAgaWYgKGkgPT09IGNvZGVTdHIubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHJldHVybiByb3c7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW2Zyb250LCBiYWNrXSA9IFtyb3cuc2xpY2UoMCwgLTEpLCByb3cuc2xpY2UoLTEpXTtcbiAgICAgICAgaWYgKGJhY2sgPT09ICc/Jykge1xuICAgICAgICAgIHJldHVybiBgJHtmcm9udH1fYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJvbnQgKyBiYWNrLnRvVXBwZXJDYXNlKCk7XG4gICAgICB9KVxuICAgICAgLmpvaW4oJycpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoY29kZSkge1xuICAgIGNvbnN0IGNvZGVTdHIgPSBjb2RlIHx8ICcwJztcbiAgICB0aGlzLmNvZGUgPSBjb2RlU3RyXG4gICAgICAuc3BsaXQoL1xccj9cXG4vKVxuICAgICAgLm1hcChyb3cgPT4gWy4uLnJvd10ubWFwKGNlbGwgPT4gUGlldC5jaGFyMmNvbG9yW2NlbGxdKSk7XG4gICAgdGhpcy5yb3dzID0gdGhpcy5jb2RlLmxlbmd0aDtcbiAgICB0aGlzLmNvbHMgPSB0aGlzLmNvZGVbMF0ubGVuZ3RoO1xuICB9XG5cbiAgZXh0ZW5kQ29kZShkaXJlY3Rpb24pIHtcbiAgICBpZiAoZGlyZWN0aW9uID09PSAncicpIHtcbiAgICAgIHRoaXMuY29kZS5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgIHJvdy5wdXNoKDE5KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb2xzICs9IDE7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdsJykge1xuICAgICAgdGhpcy5jb2RlLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgcm93LnVuc2hpZnQoMTkpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbHMgKz0gMTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2QnKSB7XG4gICAgICB0aGlzLmNvZGUucHVzaCh0aGlzLmNvZGVbMF0ubWFwKCgpID0+IDE5KSk7XG4gICAgICB0aGlzLnJvd3MgKz0gMTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3UnKSB7XG4gICAgICB0aGlzLmNvZGUudW5zaGlmdCh0aGlzLmNvZGVbMF0ubWFwKCgpID0+IDE5KSk7XG4gICAgICB0aGlzLnJvd3MgKz0gMTtcbiAgICB9XG4gIH1cblxuICBzaHJpbmtDb2RlKGRpcmVjdGlvbikge1xuICAgIGlmIChcbiAgICAgICgoZGlyZWN0aW9uID09PSAncicgfHwgZGlyZWN0aW9uID09PSAnbCcpICYmIHRoaXMuY29scyA9PT0gMSkgfHxcbiAgICAgICgoZGlyZWN0aW9uID09PSAndScgfHwgZGlyZWN0aW9uID09PSAnZCcpICYmIHRoaXMucm93cyA9PT0gMSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEaW1lbnNpb24gY2Fubm90IGJlIHJlZHVjZWQgZnJvbSAxJyk7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdyJykge1xuICAgICAgdGhpcy5jb2RlLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgcm93LnBvcCgpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbHMgLT0gMTtcbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2wnKSB7XG4gICAgICB0aGlzLmNvZGUuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICByb3cuc2hpZnQoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb2xzIC09IDE7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdkJykge1xuICAgICAgdGhpcy5jb2RlLnBvcCgpO1xuICAgICAgdGhpcy5yb3dzIC09IDE7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICd1Jykge1xuICAgICAgdGhpcy5jb2RlLnNoaWZ0KCk7XG4gICAgICB0aGlzLnJvd3MgLT0gMTtcbiAgICB9XG4gIH1cblxuICByZXBsYWNlQ29kZShuZXdDb2RlKSB7XG4gICAgdGhpcy5jb2RlID0gbmV3Q29kZTtcbiAgICB0aGlzLnJvd3MgPSB0aGlzLmNvZGUubGVuZ3RoO1xuICAgIHRoaXMuY29scyA9IHRoaXMuY29kZVswXS5sZW5ndGg7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/piet.js\n");

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e":
/*!*********************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e ***!
  \*********************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e":
/*!***********************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e ***!
  \***********************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e":
/*!************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e ***!
  \************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":
/*!*************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e ***!
  \*************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e":
/*!****************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e ***!
  \****************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27M2 5l6 6 6-6%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e":
/*!**************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e ***!
  \**************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10l3 3l6-6%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":
/*!************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e ***!
  \************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":
/*!******************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e ***!
  \******************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e";

/***/ }),

/***/ "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e":
/*!***********************************************************************************************************************************************************************************************************************************************************!*\
  !*** data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e ***!
  \***********************************************************************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e";

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__("./src/index.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);